(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{Bbko:function(t,e,i){"use strict";i.r(e);var n=i("rwUr"),o=i("g3if");for(var s in o)["default"].indexOf(s)<0&&function(t){i.d(e,t,(function(){return o[t]}))}(s);i("dZf6");var a=i("KHd+"),c=Object(a.a)(o.default,n.a,n.b,!1,null,"54e4686e",null);c.options.__file="src/views/processManagement/notice/noticeConfigure.vue",e.default=c.exports},BgSV:function(t,e,i){},GNPu:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("CeR/"),o=a(i("Whvt")),s=a(i("0hVY"));function a(t){return t&&t.__esModule?t:{default:t}}e.default={name:"noticeConfigure",components:{editorNotice:o.default},mixins:[s.default],data:function(){return{isDataLoading:!0,remindWayList:[{id:"WEIXIN",name:this.$t('m.treeinfo["企业微信"]')},{id:"EMAIL",name:this.$t('m.treeinfo["邮件"]')},{id:"SMS",name:this.$t('m.treeinfo["手机短信"]')}],checkId:"WEIXIN",noticeList:[],noticeInfo:{show:!1,title:this.$t('m.deployPage["编辑"]'),width:700,formInfo:{}}}},computed:{sliderStatus:function(){return this.$store.state.common.slideStatus}},mounted:function(){this.getNoticeList()},methods:{getNoticeList:function(){var t=this;this.isDataLoading=!0;var e={notify_type:this.checkId};this.$store.dispatch("noticeConfigure/getNoticeList",{params:e}).then((function(e){t.noticeList=e.data})).catch((function(e){(0,n.errorHandler)(e,t)})).finally((function(){t.isDataLoading=!1}))},changeNotice:function(t,e){this.checkId=t.id,this.getNoticeList()},editorInfo:function(t){this.hasPermission(["notification_manage"],this.$store.state.project.projectAuthActions)?(this.noticeInfo.formInfo=t,this.noticeInfo.show=!0):this.applyForPermission(["notification_manage"],this.$store.state.project.projectAuthActions,{})},closeEditor:function(){this.noticeInfo.show=!1},closeSideslider:function(){var t=this;this.$bkInfo({title:this.$t('m["内容未保存，离开将取消操作！"]'),confirmLoading:!0,confirmFn:function(){t.noticeInfo.show=!1},cancelFn:function(){t.noticeInfo.show=!0}})}}}},dZf6:function(t,e,i){"use strict";i("BgSV")},g3if:function(t,e,i){"use strict";i.r(e);var n=i("GNPu"),o=i.n(n);for(var s in n)["default"].indexOf(s)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(s);e.default=o.a},rwUr:function(t,e,i){"use strict";i.d(e,"a",(function(){return n})),i.d(e,"b",(function(){return o}));var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"bk-itsm-service"},[i("div",{staticClass:"is-title",class:{"bk-title-left":!t.sliderStatus}},[i("p",{staticClass:"bk-come-back"},[t._v("\n            "+t._s(t.$t('m.navigation["通知配置"]'))+"\n        ")])]),t._v(" "),i("div",{staticClass:"itsm-page-content"},[i("ul",{staticClass:"bk-notice-tab"},t._l(t.remindWayList,(function(e,n){return i("li",{key:e.id,class:{"bk-check-notice":t.checkId===e.id},on:{click:function(i){return t.changeNotice(e,n)}}},[i("span",[t._v(t._s(e.name))])])})),0),t._v(" "),i("bk-table",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:t.isDataLoading},expression:"{ isLoading: isDataLoading }"}],attrs:{data:t.noticeList,size:"small"}},[i("bk-table-column",{attrs:{type:"index",label:"No.",align:"center",width:"60"}}),t._v(" "),i("bk-table-column",{attrs:{label:t.$t("m.deployPage['通知类型']")},scopedSlots:t._u([{key:"default",fn:function(e){return[t.hasPermission(["notification_manage"],t.$store.state.project.projectAuthActions)?[i("span",{staticClass:"bk-lable-primary",on:{click:function(i){return t.editorInfo(e.row)}}},[t._v(t._s(e.row.action_name))])]:i("span",{directives:[{name:"cursor",rawName:"v-cursor",value:{active:!t.hasPermission(["notification_manage"],t.$store.state.project.projectAuthActions)},expression:"{ active: !hasPermission(['notification_manage'], $store.state.project.projectAuthActions) }"}],staticClass:"bk-table-permission",on:{click:function(i){return t.editorInfo(e.row)}}},[t._v(t._s(e.row.action_name))])]}}])}),t._v(" "),i("bk-table-column",{attrs:{label:t.$t("m.slaContent['更新时间']"),prop:"update_at"}}),t._v(" "),i("bk-table-column",{attrs:{label:t.$t("m.deployPage['更新人']"),prop:"updated_by"}}),t._v(" "),i("bk-table-column",{attrs:{label:t.$t("m.deployPage['操作']"),width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("bk-button",{directives:[{name:"cursor",rawName:"v-cursor",value:{active:!t.hasPermission(["notification_manage"],t.$store.state.project.projectAuthActions)},expression:"{ active: !hasPermission(['notification_manage'], $store.state.project.projectAuthActions) }"}],attrs:{theme:"primary",disabled:!t.hasPermission(["notification_manage"],t.$store.state.project.projectAuthActions),text:""},on:{click:function(i){return t.editorInfo(e.row)}}},[t._v("\n                        "+t._s(t.$t('m.deployPage["编辑"]'))+"\n                    ")])]}}])})],1)],1),t._v(" "),i("div",{staticClass:"bk-add-data"},[i("bk-sideslider",{attrs:{"is-show":t.noticeInfo.show,title:t.noticeInfo.title,"quick-close":!0,"before-close":t.closeSideslider,width:t.noticeInfo.width},on:{"update:isShow":function(e){return t.$set(t.noticeInfo,"show",e)},"update:is-show":function(e){return t.$set(t.noticeInfo,"show",e)}}},[t.noticeInfo.show?i("div",{staticStyle:{padding:"20px 34px"},attrs:{slot:"content"},slot:"content"},[i("editor-notice",{ref:"editorNotice",attrs:{"check-id":t.checkId,"notice-info":t.noticeInfo.formInfo},on:{closeEditor:t.closeEditor}})],1):t._e()])],1)])},o=[];n._withStripped=!0}}]);