(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{"2we1":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=u(a("14Xm")),n=u(a("D3Ub")),o=u(a("4d7F")),s=u(a("EstQ")),r=u(a("XsVg")),c=u(a("xgcw")),l=a("CeR/");function u(t){return t&&t.__esModule?t:{default:t}}var d=[{name:"todo",id:"myTodoTicket",label:s.default.t("m.managePage['我的待办']")},{name:"approval",id:"myApprovalTicket",label:s.default.t("m.home['待我审批']")},{name:"created",id:"myCreatedTicket",label:s.default.t("m.home['我的申请']")},{name:"attention",id:"myAttentionTicket",label:s.default.t("m.home['我的关注']")}];e.default={name:"TicketTable",components:{ApprovalDialog:r.default},mixins:[c.default],data:function(){return{panels:d,activePanel:d[0].name,todoList:[],createdList:[],attentionList:[],approvalList:[],count:{},loading:!1,todoListLoading:!1,createdListLoading:!1,attentionListLoading:!1,approvalListLoading:!1,isApprovalDialogShow:!1,approvalInfo:{showAllOption:!1,result:!0,approvalList:[]}}},computed:{ticketList:function(){return this[this.activePanel+"List"]},tabLoading:function(){return this[this.activePanel+"ListLoading"]}},created:function(){this.getData()},methods:{getData:function(){var t=this;this.loading=!0,o.default.all([this.getToDoList(),this.getCreatedList(),this.getAttentionList(),this.getApprovalList()]).then((function(e){t.loading=!1}))},getToDoList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"-create_at";return this.todoListLoading=!0,this.$store.dispatch("change/getList",{page_size:10,page:1,is_draft:0,view_type:"my_todo",ordering:e}).then((function(e){e.result&&(t.todoList=e.data.items,t.$set(t.count,"todo",e.data.count),t.__asyncReplaceTicketListAttr(t.todoList))})).catch((function(e){(0,l.errorHandler)(e,t)})).finally((function(){t.todoListLoading=!1}))},getCreatedList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"-create_at";return this.createdListLoading=!0,this.$store.dispatch("change/getList",{page_size:10,page:1,is_draft:0,view_type:"my_created",ordering:e}).then((function(e){e.result&&(t.createdList=e.data.items,t.$set(t.count,"created",e.data.count),t.__asyncReplaceTicketListAttr(t.createdList))})).catch((function(e){(0,l.errorHandler)(e,t)})).finally((function(){t.createdListLoading=!1}))},getAttentionList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"-create_at";return this.attentionListLoading=!0,this.$store.dispatch("change/getList",{page_size:10,page:1,is_draft:0,view_type:"my_attention",ordering:e}).then((function(e){e.result&&(t.attentionList=e.data.items,t.$set(t.count,"attention",e.data.count),t.__asyncReplaceTicketListAttr(t.attentionList))})).catch((function(e){(0,l.errorHandler)(e,t)})).finally((function(){t.attentionListLoading=!1}))},getApprovalList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"-create_at";return this.approvalListLoading=!0,this.$store.dispatch("change/getList",{page_size:10,page:1,is_draft:0,view_type:"my_approval",ordering:e}).then((function(e){e.result&&(t.approvalList=e.data.items,t.$set(t.count,"approval",e.data.count),t.__asyncReplaceTicketListAttr(t.approvalList))})).catch((function(e){(0,l.errorHandler)(e,t)})).finally((function(){t.approvalListLoading=!1}))},onSortChange:function(t){var e=t.order?"ascending"===t.order?"-"+t.prop:t.prop:void 0;switch(this.activePanel){case"todo":this.getToDoList(e);break;case"created":this.getCreatedList(e);break;case"attention":this.getAttentionList(e);break;case"approval":this.getApprovalList(e)}},onOpenApprovalDialog:function(t,e){this.isApprovalDialogShow=!0,this.approvalInfo.result=e,this.approvalInfo.approvalList=[{ticket_id:t}]},onApprovalDialogHidden:function(t){var e=this;return(0,n.default)(i.default.mark((function a(){return i.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(e.isApprovalDialogShow=!1,e.approvalInfo={result:!0,showAllOption:!1,approvalList:[]},!t){a.next=7;break}return e.loading=!0,a.next=6,e.getApprovalList();case 6:e.loading=!1;case 7:case"end":return a.stop()}}),a,e)})))()}}}},"5clq":function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return n}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:t.loading},expression:"{ isLoading: loading }"}],staticClass:"ticket-table-section"},[t.loading?a("div",{staticStyle:{height:"400px"}}):[a("router-link",{staticClass:"enter-my-tickets",attrs:{to:{name:"myTodoTicket"}}},[t._v(t._s(t.$t("m.common['进入我的单据']"))+" >>")]),t._v(" "),a("bk-tab",{attrs:{active:t.activePanel,type:"unborder-card"},on:{"update:active":function(e){t.activePanel=e}}},t._l(t.panels,(function(e){return a("bk-tab-panel",t._b({key:e.name},"bk-tab-panel",e,!1),[a("template",{slot:"label"},[a("span",{staticClass:"panel-name"},[t._v(t._s(e.label))]),t._v(" "),a("span",{staticClass:"panel-count"},[t._v(t._s(t.count[e.name]))])]),t._v(" "),a("bk-table",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:t.tabLoading},expression:"{ isLoading: tabLoading }"}],attrs:{data:t.ticketList},on:{"sort-change":t.onSortChange}},[a("bk-table-column",{attrs:{label:t.$t("m.manageCommon['单号']")},scopedSlots:t._u([{key:"default",fn:function(e){return[a("router-link",{staticClass:"table-link",attrs:{target:"_blank",to:{name:"TicketDetail",query:{id:e.row.id,project_id:e.row.project_key,from:"Home"}}}},[t._v("\n                                "+t._s(e.row.sn)+"\n                            ")])]}}],null,!0)}),t._v(" "),a("bk-table-column",{attrs:{label:t.$t("m.manageCommon['标题']"),width:200,prop:"title"}}),t._v(" "),a("bk-table-column",{attrs:{label:t.$t("m.manageCommon['服务']"),width:140,sortable:!0,prop:"service_name"}}),t._v(" "),a("bk-table-column",{attrs:{label:t.$t("m.newCommon['当前步骤']"),width:100},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.current_steps.length>0?a("div",{staticClass:"current-steps-wrap"},[a("bk-popover",{attrs:{placement:"top",theme:"light"}},[a("span",{staticClass:"bk-current-step"},[t._v("\n                                        "+t._s(e.row.current_steps[0].name)+"\n                                    ")]),t._v(" "),a("div",{staticStyle:{"max-width":"200px"},attrs:{slot:"content"},slot:"content"},t._l(e.row.current_steps,(function(e,i){return a("span",{key:i,staticClass:"bk-current-step auto-width"},[t._v("\n                                            "+t._s(e.name)+"\n                                        ")])})),0)])],1):a("span",[t._v("--")])]}}],null,!0)}),t._v(" "),a("bk-table-column",{attrs:{label:t.$t("m.manageCommon['当前处理人']"),width:140,prop:"current_processors"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{attrs:{title:e.row.current_processors}},[t._v(t._s(e.row.current_processors||"--"))])]}}],null,!0)}),t._v(" "),a("bk-table-column",{attrs:{label:t.$t("m.manageCommon['提单人']"),width:140,sortable:!0,prop:"creator"}}),t._v(" "),a("bk-table-column",{attrs:{label:t.$t("m.manageCommon['提单时间']"),width:180,sortable:!0,prop:"create_at"}}),t._v(" "),a("bk-table-column",{attrs:{label:t.$t("m.manageCommon['操作']"),width:100},scopedSlots:t._u([{key:"default",fn:function(e){return["approval"===t.activePanel?[a("bk-link",{attrs:{theme:"primary"},on:{click:function(a){return t.onOpenApprovalDialog(e.row.id,!0)}}},[t._v(t._s(t.$t("m.managePage['通过']")))]),t._v(" "),a("bk-link",{attrs:{theme:"primary"},on:{click:function(a){return t.onOpenApprovalDialog(e.row.id,!1)}}},[t._v(t._s(t.$t("m.manageCommon['拒绝']")))])]:a("router-link",{staticClass:"table-link",attrs:{target:"_blank",to:{name:"TicketDetail",query:{id:e.row.id,project_id:e.row.id,from:"Home"}}}},[t._v("\n                                "+t._s(e.row.can_operate?t.$t("m.manageCommon['处理']"):t.$t('m.manageCommon["查看"]'))+"\n                            ")])]}}],null,!0)})],1),t._v(" "),t.count[e.name]>10?a("router-link",{staticClass:"view-all",attrs:{to:{name:e.id}}},[t._v(t._s(t.$t("m.common['查看全部']")))]):t._e()],2)})),1)],t._v(" "),a("approval-dialog",{attrs:{"is-show":t.isApprovalDialogShow,"approval-info":t.approvalInfo},on:{"update:isShow":function(e){t.isApprovalDialogShow=e},"update:is-show":function(e){t.isApprovalDialogShow=e},cancel:t.onApprovalDialogHidden}})],2)},n=[];i._withStripped=!0},"79j4":function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return n}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"service-list-section"},[a("div",{staticClass:"tab-wrapper"},[a("span",{class:["type-item",{active:"latest"===t.type}],on:{click:function(e){return t.onTabChange("latest")}}},[t._v(t._s(t.$t("m.common['常用服务']")))]),t._v(" "),a("span",{staticStyle:{"font-size":"16px","font-weight":"normal",color:"#dcdee5",margin:"0 10px"}},[t._v("|")]),t._v(" "),a("span",{class:["type-item",{active:"all"===t.type}],on:{click:function(e){return t.onTabChange("all")}}},[t._v(t._s(t.$t("m.common['全部服务']")))])]),t._v(" "),a("div",{directives:[{name:"bk-clickoutside",rawName:"v-bk-clickoutside",value:t.handleClickoutside,expression:"handleClickoutside"}],staticClass:"search-input-wrapper"},[a("bk-input",{staticClass:"search-input",attrs:{"right-icon":"bk-icon icon-search",placeholder:t.$t("m.common['请输入服务名称，快速提单']"),clearable:!0},on:{focus:t.searchHandler,change:t.searchHandler}}),t._v(" "),t.isSearchResultShow?a("div",{staticClass:"search-result-content"},[t.searchResultList.length>0?a("ul",{staticClass:"result-list"},t._l(t.searchResultList,(function(e){return a("li",{key:e.id,staticClass:"result-item",on:{click:function(a){return t.onSelectService(e)}}},[a("i",{directives:[{name:"bk-tooltips",rawName:"v-bk-tooltips",value:{content:e.favorite?t.$t("m.common['取消收藏']"):t.$t("m.common['添加收藏']"),placement:"top",delay:[300,0]},expression:"{\n                            content: service.favorite ? $t(`m.common['取消收藏']`) : $t(`m.common['添加收藏']`),\n                            placement: 'top',\n                            delay: [300, 0]\n                        }"}],class:["bk-itsm-icon",e.favorite?"icon-favorite":"icon-rate"],on:{click:function(a){return a.stopPropagation(),t.onCollectClick(e)}}}),t._v(" "),a("div",{staticClass:"name",domProps:{innerHTML:t._s(e.highlightName)}}),t._v(" "),a("div",{staticClass:"category"},[t._v(t._s(e.serviceTypeName))])])})),0):a("div",{staticClass:"no-data"},[t._v(t._s(t.$t("m.common['无匹配服务']")))])]):t._e()],1),t._v(" "),"latest"===t.type?[a("div",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:t.loading},expression:"{ isLoading: loading }"}],staticClass:"recently-content"},[t.serviceList.length>0?a("ul",{staticClass:"list-wrapper"},t._l(t.serviceList,(function(e){return a("li",{key:e.id,staticClass:"service-item",on:{click:function(a){return t.onSelectService(e)}}},[a("div",{directives:[{name:"bk-overflow-tips",rawName:"v-bk-overflow-tips"}],staticClass:"service-name"},[t._v(t._s(e.name))]),t._v(" "),a("i",{directives:[{name:"bk-tooltips",rawName:"v-bk-tooltips",value:{content:e.favorite?t.$t("m.common['取消收藏']"):t.$t("m.common['添加收藏']"),placement:"top",delay:[300,0]},expression:"{\n                            content: service.favorite ? $t(`m.common['取消收藏']`) : $t(`m.common['添加收藏']`),\n                            placement: 'top',\n                            delay: [300, 0]\n                        }"}],class:["bk-itsm-icon","collect-icon",e.favorite?"icon-favorite":"icon-rate"],on:{click:function(a){return a.stopPropagation(),t.onCollectClick(e)}}})])})),0):a("div",{staticClass:"recently-empty"},[a("p",[t._v(t._s(t.$t("m.common['您还没有留下脚印，您可以进行以下操作']")))]),t._v(" "),a("div",{staticClass:"operation-wrapper"},[a("div",{staticClass:"operate"},[a("div",{staticClass:"icon-area",on:{click:function(e){return t.onTabChange("all")}}},[a("i",{staticClass:"bk-itsm-icon icon-arrow-rect"})]),t._v(" "),a("div",{staticClass:"text",on:{click:function(e){return t.onTabChange("all")}}},[t._v(t._s(t.$t("m.common['查看服务']")))])]),t._v(" "),a("div",{staticClass:"operate"},[a("div",{staticClass:"icon-area",on:{click:t.onCreateTicket}},[a("i",{staticClass:"bk-itsm-icon icon-pen-rect"})]),t._v(" "),a("div",{staticClass:"text",on:{click:t.onCreateTicket}},[t._v(t._s(t.$t("m.managePage['提单']")))])])])])])]:[a("div",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:t.loading},expression:"{ isLoading: loading }"}],staticClass:"service-content"},[t.loading?t._e():a("bk-tab",{attrs:{active:t.activeClassify,type:"unborder-card"},on:{"tab-change":function(e){t.activeFold=!0}}},t._l(t.serviceList,(function(e){return a("bk-tab-panel",t._b({key:e.name},"bk-tab-panel",e,!1),[e.data.length>0?[a("ul",{staticClass:"list-wrapper"},t._l("all"===t.type&&t.activeFold?e.data.slice(0,16):e.data,(function(e){return a("li",{key:e.id,staticClass:"service-item",on:{click:function(a){return t.onSelectService(e)}}},[a("div",{directives:[{name:"bk-overflow-tips",rawName:"v-bk-overflow-tips"}],staticClass:"service-name"},[t._v(t._s(e.name))]),t._v(" "),a("i",{directives:[{name:"bk-tooltips",rawName:"v-bk-tooltips",value:{content:e.favorite?t.$t("m.common['取消收藏']"):t.$t("m.common['添加收藏']"),placement:"top",delay:[300,0]},expression:"{\n                                        content: service.favorite ? $t(`m.common['取消收藏']`) : $t(`m.common['添加收藏']`),\n                                        placement: 'top',\n                                        delay: [300, 0]\n                                    }"}],class:["bk-itsm-icon","collect-icon",e.favorite?"icon-favorite":"icon-rate"],on:{click:function(a){return a.stopPropagation(),t.onCollectClick(e)}}})])})),0),t._v(" "),"all"===t.type&&e.data.length>16?a("div",{staticClass:"show-more",on:{click:function(a){return t.toggleFold(e.name)}}},[t.activeFold?[a("span",[t._v("更多")]),t._v(" "),a("i",{staticClass:"bk-icon icon-angle-down"})]:[a("span",[t._v("收起")]),t._v(" "),a("i",{staticClass:"bk-icon icon-angle-up"})]],2):t._e()]:a("div",{staticClass:"service-empty"},[a("i",{staticClass:"bk-icon icon-empty"}),t._v(" "),a("p",{staticClass:"text"},[a("span",[t._v(t._s(t.$t("m.common['暂无服务，']")))]),t._v(" "),a("router-link",{attrs:{to:{name:"projectServiceList",query:{project_id:t.$store.state.project.id}}}},[t._v(t._s(t.$t("m.taskTemplate['立即创建']")))])],1)])],2)})),1)],1)]],2)},n=[];i._withStripped=!0},"7NCX":function(t,e,a){"use strict";a.r(e);var i=a("P3vh"),n=a.n(i);for(var o in i)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(o);e.default=n.a},"8/5/":function(t,e,a){"use strict";a("sP6W")},"8RtZ":function(t,e,a){"use strict";a.r(e);var i=a("ecIo"),n=a("7NCX");for(var o in n)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(o);a("kgAQ");var s=a("KHd+"),r=Object(s.a)(n.default,i.a,i.b,!1,null,null,null);r.options.__file="src/components/common/layout/CopyrightFooter.vue",e.default=r.exports},C4KV:function(t,e,a){"use strict";a("Gst/")},CfGq:function(t,e,a){"use strict";a.r(e);var i=a("5clq"),n=a("OCbS");for(var o in n)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(o);a("C4KV");var s=a("KHd+"),r=Object(s.a)(n.default,i.a,i.b,!1,null,"5a72b60c",null);r.options.__file="src/views/home/ticketTable.vue",e.default=r.exports},"Gst/":function(t,e,a){},OCbS:function(t,e,a){"use strict";a.r(e);var i=a("2we1"),n=a.n(i);for(var o in i)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(o);e.default=n.a},P3vh:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,n=a("QbLZ"),o=(i=n)&&i.__esModule?i:{default:i},s=a("L2JU");e.default={name:"CopyrightFooter",computed:(0,o.default)({},(0,s.mapState)({footer:function(t){return t.common.footer}}))}},Z4s3:function(t,e,a){"use strict";a.r(e);var i=a("zafh"),n=a.n(i);for(var o in i)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(o);e.default=n.a},anCC:function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return n}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"home-page-wrapper"},[a("div",{staticClass:"home-page-view"},[a("div",{staticClass:"home-background"},[a("p",{staticClass:"welcome-tips"},[t._v("Hi，"+t._s(t.userName)+"，"+t._s(t.$t("m.home['欢迎使用流程服务！']")))])]),t._v(" "),a("div",{staticClass:"main-content"},[a("service-list"),t._v(" "),a("ticket-table")],1),t._v(" "),a("copyright-footer")],1)])},n=[];i._withStripped=!0},ecIo:function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return n}));var i=function(){var t=this.$createElement;return(this._self._c||t)("footer",{attrs:{id:"page-footer-wrapper"},domProps:{innerHTML:this._s(this.footer)}})},n=[];i._withStripped=!0},er4n:function(t,e,a){"use strict";a.r(e);var i=a("anCC"),n=a("j/Yo");for(var o in n)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(o);a("k+90");var s=a("KHd+"),r=Object(s.a)(n.default,i.a,i.b,!1,null,"5954443c",null);r.options.__file="src/views/home/index.vue",e.default=r.exports},gDvZ:function(t,e,a){"use strict";a.r(e);var i=a("79j4"),n=a("Z4s3");for(var o in n)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(o);a("8/5/");var s=a("KHd+"),r=Object(s.a)(n.default,i.a,i.b,!1,null,"9774f346",null);r.options.__file="src/views/home/serviceList.vue",e.default=r.exports},"j/Yo":function(t,e,a){"use strict";a.r(e);var i=a("uMpQ"),n=a.n(i);for(var o in i)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(o);e.default=n.a},"k+90":function(t,e,a){"use strict";a("mPdv")},kgAQ:function(t,e,a){"use strict";a("pjUS")},mPdv:function(t,e,a){},pjUS:function(t,e,a){},sP6W:function(t,e,a){},uMpQ:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s(a("gDvZ")),n=s(a("CfGq")),o=s(a("8RtZ"));function s(t){return t&&t.__esModule?t:{default:t}}e.default={name:"Home",components:{ServiceList:i.default,TicketTable:n.default,CopyrightFooter:o.default},data:function(){return{userName:window.username||"--"}}}},zafh:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=c(a("P2sY")),n=c(a("4d7F")),o=c(a("DhVD")),s=c(a("2K1W")),r=a("CeR/");function c(t){return t&&t.__esModule?t:{default:t}}e.default={name:"ServiceList",data:function(){return{type:"latest",latestList:[],allList:[],serviceClassify:[],activeClassify:"",activeFold:!0,isSearchResultShow:!1,searchResultList:[],latestLoading:!1,collectedLoading:!1,allLoading:!1,serviceClassfyLoading:!1}},computed:{loading:function(){return this.latestLoading||this.allLoading||this.serviceClassfyLoading},serviceList:function(){if("latest"===this.type)return this.latestList;var t=this.serviceClassify.map((function(t){return{name:t.key,label:t.name,data:[]}}));return this.allList.forEach((function(e){t.find((function(t){return t.name===e.key})).data.push(e)})),t}},watch:{serviceList:function(t){this.activeClassify=t.length>0?t[0].name:""}},created:function(){var t=this;this.getLatestService(),this.getAllService(),this.getServiceClassify(),this.searchHandler=(0,o.default)(500,(function(e){t.onServiceSearch(e)}))},methods:{getLatestService:function(){var t=this;this.latestLoading=!0,n.default.all([this.$store.dispatch("service/getServiceFavorites"),this.$store.dispatch("service/getRecentlyFavorite")]).then((function(e){var a=e[0].data,i=e[1].data.filter((function(t){return-1===a.findIndex((function(e){return e.id===t.id}))})),n=a.length;t.latestList=n>16?a.slice(0,16):a.concat(i.slice(0,16-n))})).catch((function(e){(0,r.errorHandler)(e,t)})).finally((function(){t.latestLoading=!1}))},getAllService:function(){var t=this;this.allLoading=!0,this.$store.dispatch("service/getServiceList").then((function(e){e.result&&(t.allList=e.data)})).catch((function(e){(0,r.errorHandler)(e,t)})).finally((function(){t.allLoading=!1}))},getServiceClassify:function(){var t=this;return this.serviceClassfyLoading=!0,this.$store.dispatch("getCustom").then((function(e){t.serviceClassify=e.data})).catch((function(e){(0,r.errorHandler)(e,t)})).finally((function(){t.serviceClassfyLoading=!1}))},onTabChange:function(t){this.type=t,"latest"===t?this.getLatestService():this.getAllService()},onCreateTicket:function(){s.default.$emit("openCreateTicketDialog")},handleClickoutside:function(){this.isSearchResultShow=!1},onServiceSearch:function(t){var e=this;if(this.isSearchResultShow=!0,t){var a=[],n=new RegExp(t,"i");this.allList.forEach((function(o){if(n.test(o.name)&&a.length<6){var s=o.name.replace(n,'<span style="color: #3a84ff;">'+t+"</span>"),r=e.serviceClassify.find((function(t){return t.key===o.key})).name;a.push((0,i.default)({},o,{highlightName:s,serviceTypeName:r}))}})),this.searchResultList=a.sort((function(t,e){return t.name.length-e.name.length}))}else this.searchResultList=[],this.isSearchResultShow=!1},onCollectClick:function(t){var e=this,a=t.favorite;this.$store.dispatch("service/toggleServiceFavorite",{id:t.id,favorite:!a}).then((function(i){if(i.result){var n=e.allList.find((function(e){return e.id===t.id}));t.favorite=!a,e.$set(n,"favorite",!a)}})).catch((function(t){(0,r.errorHandler)(t,e)}))},onSelectService:function(t){var e=t.id,a=this.$router.resolve({name:"CreateTicket",query:{service_id:e,from:"Home"}});window.open(a.href,"_blank")},toggleFold:function(){this.activeFold=!this.activeFold}}}}}]);