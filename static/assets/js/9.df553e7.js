(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"0A66":function(t,e,i){"use strict";i.d(e,"a",(function(){return a})),i.d(e,"b",(function(){return n}));var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"bk-api-run-config"},[i("bk-input",{attrs:{disabled:t.trueStatus},model:{value:t.DetailInfo.path,callback:function(e){t.$set(t.DetailInfo,"path",e)},expression:"DetailInfo.path"}},[i("template",{slot:"prepend"},[i("bk-dropdown-menu",{ref:"requestwayDrop",staticClass:"group-text",attrs:{slot:"append","font-size":"normal",disabled:t.trueStatus},slot:"append"},[i("bk-button",{attrs:{slot:"dropdown-trigger",type:"primary"},slot:"dropdown-trigger"},[i("span",[t._v(" "+t._s(t.DetailInfo.method)+" ")]),t._v(" "),i("i",{class:["bk-icon icon-angle-down"]})])],1)],1),t._v(" "),i("template",{slot:"append"},[i("bk-button",{staticStyle:{border:"none",height:"30px","border-radius":"0"},attrs:{"data-test-id":"apiDetail_button_sendRequset",theme:"primary",title:t.$t("m.systemConfig['发送']")},on:{click:t.testUrl}},[t._v("\n                "+t._s(t.$t("m.systemConfig['发送']"))+"\n            ")])],1)],2),t._v(" "),i("div",{staticClass:"mt20 bk-run-configure"},[i("bk-collapse",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[i("bk-collapse-item",{attrs:{name:"1","ext-cls":"bk-border-line"}},[t._v("\n                Query\n                "),t.DetailInfo.req_params&&t.DetailInfo.req_params.length?i("template",{slot:"content"},[i("ul",{staticClass:"mb10"},t._l(t.DetailInfo.req_params,(function(e,a){return i("li",{key:a,staticClass:"bk-run-content"},[i("bk-input",{staticClass:"bk-run-input",staticStyle:{width:"130px","margin-right":"10px"},attrs:{disabled:t.trueStatus},model:{value:e.name,callback:function(i){t.$set(e,"name",i)},expression:"item.name"}}),t._v(" "),i("bk-checkbox",{attrs:{"true-value":t.trueStatus,"false-value":t.falseStatus},model:{value:e.is_necessary,callback:function(i){t.$set(e,"is_necessary",i)},expression:"item.is_necessary"}}),t._v(" "),i("span",[t._v("=")]),t._v(" "),i("bk-input",{staticClass:"bk-run-input",staticStyle:{width:"calc(100% - 185px)",float:"right"},model:{value:e.value,callback:function(i){t.$set(e,"value",i)},expression:"item.value"}})],1)})),0)]):t._e()],2),t._v(" "),i("bk-collapse-item",{attrs:{name:"2"}},[t._v("\n                Body\n                "),i("div",{staticClass:"mb10",attrs:{slot:"content"},slot:"content"},[i("ace",{attrs:{value:t.bodyDetailConfig.value,width:t.bodyDetailConfig.width,height:t.bodyDetailConfig.height,"read-only":t.bodyDetailConfig.readOnly,lang:t.bodyDetailConfig.lang,"full-screen":t.bodyDetailConfig.fullScreen,theme:"textmate"},on:{blur:t.blur}})],1)])],1)],1)],1)},n=[];a._withStripped=!0},"0lB7":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a,n=i("u8Ap"),s=(a=n)&&a.__esModule?a:{default:a};e.default={name:"apiEditorBasic",components:{memberSelect:s.default},props:{detailInfoOri:{type:Object,default:function(){return{}}},treeList:{type:Array,default:function(){return[]}},pathList:{type:Array,default:function(){return[]}},isBuiltinIdList:{type:Array,default:function(){return[]}}},data:function(){return{typeList:[{name:"GET"},{name:"POST"}],stateList:[{id:0,name:this.$t('m.systemConfig["未完成"]')},{id:1,name:this.$t('m.systemConfig["已完成"]')}],isDropdownShow:!1}},computed:{basicInfo:{get:function(){return this.detailInfoOri},set:function(t){this.$parent.DetailInfo=t}}},watch:{},mounted:function(){},methods:{switchChange:function(t){this.basicInfo.is_activated=t},dropdownShow:function(){this.isDropdownShow=!0},dropdownHide:function(){this.isDropdownShow=!1},requestHandler:function(t,e){this.$refs.requestwayDrop.hide(),this.$emit("changeRequest",t.name)},changeMethod:function(t){this.basicInfo.method=t}}}},"2LC8":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=f(i("14Xm")),n=f(i("D3Ub")),s=f(i("zP2a")),o=f(i("VflG")),r=f(i("UKTy")),c=f(i("YbBn")),l=f(i("LVJB")),d=f(i("xkLb")),u=i("CeR/");function f(t){return t&&t.__esModule?t:{default:t}}e.default={components:{apiEditorBasic:r.default,apiEditorRequest:c.default,apiEditorResult:l.default,apiEditorOthers:d.default,ace:s.default},mixins:[o.default],props:{apiDetailInfoCommon:{type:Object,default:function(){return{}}},treeList:{type:Array,default:function(){return[]}},pathList:{type:Array,default:function(){return[]}},isBuiltinIdList:{type:Array,default:function(){return[]}}},data:function(){return{secondClick:!1,dataProcess:{width:"100%",height:300,fullScreen:!0,lang:"python"}}},computed:{DetailInfo:{get:function(){return this.apiDetailInfoCommon},set:function(t){this.$parent.apiDetailInfoCommon=t}}},watch:{},mounted:function(){},methods:{changBlur:function(t){this.DetailInfo.map_code=t},reqChangBlur:function(t){this.DetailInfo.before_req=t},getRemoteApiDetail:function(t){this.$parent.$parent.getRemoteApiDetail(t)},updateApi:function(){var t=this;return(0,n.default)(a.default.mark((function e(){var i,n,s;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.secondClick&&t.DetailInfo.treeDataList&&t.DetailInfo.responseTreeDataList){e.next=2;break}return e.abrupt("return");case 2:return t.DetailInfo.req_headers=t.DetailInfo.req_headers.filter((function(t){return!!t.name})),t.DetailInfo.req_params=t.DetailInfo.req_params.filter((function(t){return!!t.name})),e.next=6,t.listToJsonschema(t.DetailInfo.treeDataList);case 6:return i=e.sent,e.next=9,i.root;case 9:return t.DetailInfo.req_body=e.sent,e.next=12,t.listToJsonschema(t.DetailInfo.responseTreeDataList);case 12:return n=e.sent,e.next=15,n.root;case 15:return t.DetailInfo.rsp_data=e.sent,t.DetailInfo.owners=t.DetailInfo.ownersInputValue.join(","),delete t.DetailInfo.ownersInputValue,e.next=20,delete t.DetailInfo.treeDataList;case 20:return e.next=22,delete t.DetailInfo.responseTreeDataList;case 22:return s=t.DetailInfo,t.secondClick=!0,e.next=26,t.$store.dispatch("apiRemote/put_remote_api",s).then((function(e){t.$bkMessage({message:t.$t('m.systemConfig["更新成功"]'),theme:"success"}),t.getRemoteApiDetail(t.DetailInfo.id)})).catch((function(e){(0,u.errorHandler)(e,t)})).finally((function(){t.secondClick=!1}));case 26:case"end":return e.stop()}}),e,t)})))()},changeRequest:function(t){var e=this;"POST"===t?this.DetailInfo.req_params&&this.DetailInfo.req_params.length&&this.DetailInfo.req_params.some((function(t){return t.name||""!==t.sample}))?this.$bkInfo({type:"warning",title:this.$t("m.systemConfig['此操作将清空请求参数']"),confirmFn:function(){e.DetailInfo.req_params=[{name:"",is_necessary:0,sample:"",desc:"",value:""}],e.$refs.apiEditorBasic.changeMethod(t)}}):this.$refs.apiEditorBasic.changeMethod(t):this.DetailInfo.treeDataList[0].children&&this.DetailInfo.treeDataList[0].children.length?this.$bkInfo({type:"warning",title:this.$t("m.systemConfig['此操作将清空请求参数']"),confirmFn:function(){e.DetailInfo.treeDataList[0].children=[],e.$refs.apiEditorBasic.changeMethod(t)}}):this.$refs.apiEditorBasic.changeMethod(t)}}}},"3VaI":function(t,e,i){},"4ATZ":function(t,e,i){"use strict";i.r(e);var a=i("eWQH"),n=i.n(a);for(var s in a)["default"].indexOf(s)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(s);e.default=n.a},"4NGm":function(t,e,i){"use strict";i.r(e);var a=i("bvPN"),n=i.n(a);for(var s in a)["default"].indexOf(s)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(s);e.default=n.a},"5Y4Sc":function(t,e,i){"use strict";i("qWeF")},"6uDm":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=l(i("14Xm")),n=l(i("D3Ub")),s=l(i("Ax61")),o=l(i("zP2a")),r=l(i("VflG")),c=i("CeR/");function l(t){return t&&t.__esModule?t:{default:t}}e.default={components:{apiRunConfig:s.default,ace:o.default},mixins:[r.default],props:{apiDetailInfoCommon:{type:Object,default:function(){return{}}}},data:function(){return{alarmDetailConfig:{value:"",width:"100%",height:300,readOnly:!0,fullScreen:!0,lang:"json"},reqDataProcess:{value:"",width:"100%",height:300,fullScreen:!0,lang:"python"},dataProcess:{value:"",width:"100%",height:300,fullScreen:!0,lang:"python"},isSuccess:!0}},computed:{},watch:{},mounted:function(){},methods:{getRemoteApiDetail:function(t){this.$parent.$parent.getRemoteApiDetail(t)},changBlur:function(t){this.dataProcess.value=t},reqChangBlur:function(t){this.reqDataProcess.value=t},editorInitAfter:function(t){},updateApi:function(){var t=this;return(0,n.default)(a.default.mark((function e(){var i,n;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.secondClick&&t.apiDetailInfoCommon.treeDataList&&t.apiDetailInfoCommon.responseTreeDataList){e.next=2;break}return e.abrupt("return");case 2:e.prev=2,i=JSON.parse(t.alarmDetailConfig.value),t.apiDetailInfoCommon.bodyJsonschemaData=t.jsonToJsonschema(JSON.parse(t.$refs.apiRunConfig.bodyDetailConfig.value)),t.apiDetailInfoCommon.resJsonschemaData=t.jsonToJsonschema(i||{}),e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(2),t.$bkMessage({message:e.t0.message?e.t0.message:e.t0,theme:"error"}),e.abrupt("return");case 12:return t.apiDetailInfoCommon.req_body=t.apiDetailInfoCommon.bodyJsonschemaData.root,t.apiDetailInfoCommon.rsp_data=t.apiDetailInfoCommon.resJsonschemaData.root,e.next=16,delete t.apiDetailInfoCommon.treeDataList;case 16:return e.next=18,delete t.apiDetailInfoCommon.responseTreeDataList;case 18:return 0===(n=t.apiDetailInfoCommon).req_body.required.length&&delete n.req_body.required,n.map_code=t.dataProcess.value,n.before_req=t.reqDataProcess.value,t.secondClick=!0,e.next=25,t.$store.dispatch("apiRemote/put_remote_api",n).then((function(e){t.$bkMessage({message:t.$t('m.systemConfig["更新成功"]'),theme:"success"}),t.getRemoteApiDetail(t.apiDetailInfoCommon.id)})).catch((function(e){(0,c.errorHandler)(e,t)})).finally((function(){t.secondClick=!1}));case 25:case"end":return e.stop()}}),e,t,[[2,8]])})))()}}}},Aeh4:function(t,e,i){"use strict";i("WNBJ")},Ax61:function(t,e,i){"use strict";i.r(e);var a=i("0A66"),n=i("Du2H");for(var s in n)["default"].indexOf(s)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(s);i("QX6E");var o=i("KHd+"),r=Object(o.a)(n.default,a.a,a.b,!1,null,"a58bd940",null);r.options.__file="src/views/processManagement/apiConfigure/components/apiRunConfig.vue",e.default=r.exports},CgKv:function(t,e,i){"use strict";i("osOl")},ClNz:function(t,e,i){"use strict";i.d(e,"a",(function(){return a})),i.d(e,"b",(function(){return n}));var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"bk-api-tree"},[i("div",{staticClass:"bk-tree-content"},[i("div",{staticClass:"mb20"},[i("bk-input",{attrs:{"right-icon":"bk-icon icon-search",clearable:!0},on:{clear:t.clearInfo},model:{value:t.searchWord,callback:function(e){t.searchWord=e},expression:"searchWord"}},[i("template",{slot:"append"},[i("bk-dropdown-menu",{ref:"dropdown",staticClass:"group-text",staticStyle:{width:"70px","line-height":"30px"},on:{show:t.dropdownShow,hide:t.dropdownHide}},[i("div",{staticClass:"dropdown-trigger-btn",staticStyle:{"padding-left":"19px"},attrs:{slot:"dropdown-trigger"},slot:"dropdown-trigger"},[i("span",[t._v(t._s(t.$t("m.systemConfig['接入']")))]),t._v(" "),i("i",{class:["bk-icon icon-angle-down",{"icon-flip":t.isDropdownShow}]})]),t._v(" "),i("ul",{staticClass:"bk-dropdown-list",attrs:{slot:"dropdown-content"},slot:"dropdown-content"},[i("li",[i("a",{directives:[{name:"cursor",rawName:"v-cursor",value:{active:!t.projectId&&!t.hasPermission(["public_api_create"])},expression:"{ active: !projectId && !hasPermission(['public_api_create']) }"}],class:{"text-permission-disable":!t.projectId&&!t.hasPermission(["public_api_create"])},attrs:{href:"javascript:;","data-test-id":"api_a_accessApi",title:t.$t("m.systemConfig['接入']")},on:{click:function(e){return t.openDictionary("JION")}}},[t._v("\n                                    "+t._s(t.$t("m.systemConfig['接入']"))+"\n                                ")])]),t._v(" "),i("li",[i("a",{directives:[{name:"cursor",rawName:"v-cursor",value:{active:!t.projectId&&!t.hasPermission(["public_api_create"])},expression:"{ active: !projectId && !hasPermission(['public_api_create']) }"}],class:{"text-permission-disable":!t.projectId&&!t.hasPermission(["public_api_create"])},attrs:{href:"javascript:;","data-test-id":"api_a_createApi",title:t.$t("m.systemConfig['新增']")},on:{click:function(e){return t.openDictionary("ADD")}}},[t._v("\n                                    "+t._s(t.$t("m.systemConfig['新增']"))+"\n                                ")])])])])],1)],2)],1),t._v(" "),i("div",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:t.isTreeLoading},expression:"{ isLoading: isTreeLoading }"}],staticClass:"bk-tree-info"},[i("ul",{staticClass:"bk-tree-group",on:{scroll:t.scrollEvent}},t._l(t.treeList,(function(e,a){return i("li",{key:a,attrs:{"data-test-id":"api_li_viewApiTable"},on:{click:function(i){return t.showBackground(e,a,0)}}},[e.id?[i("div",{staticClass:"bk-group-parent bk-p18 bk-handel",class:{"bk-group-li":e.check}},[i("i",{staticClass:"bk-icon icon-folder-open bk-ml5"}),t._v(" "),i("span",{staticClass:"bk-group-name"},[t._v(t._s(e.name))]),t._v(" "),e.can_edit?i("span",{staticClass:"bk-edit",staticStyle:{display:"inline-block"}},[i("i",{staticClass:"bk-icon icon-more bk-tree-point bk-point-selected"}),t._v(" "),i("ul",{staticClass:"bk-more",style:t.styletranslateY},[e.is_builtin?t._e():i("li",{directives:[{name:"cursor",rawName:"v-cursor",value:{active:!t.projectId&&t.hasPermission(["public_api_manage"])},expression:"{ active: !projectId && hasPermission(['public_api_manage']) }"}],class:{"text-permission-disable":!t.projectId&&t.hasPermission(["public_api_manage"])},attrs:{"data-test-id":"api_li_deleteApiDirectory"},on:{click:function(i){return i.stopPropagation(),t.openDelete(e)}}},[i("span",[t._v(t._s(t.$t('m.systemConfig["删除"]')))])]),t._v(" "),i("li",{directives:[{name:"cursor",rawName:"v-cursor",value:{active:!t.projectId&&t.hasPermission(["public_api_manage"])},expression:"{ active: !projectId && hasPermission(['public_api_manage']) }"}],class:{"text-permission-disable":!t.projectId&&t.hasPermission(["public_api_manage"])},attrs:{"data-test-id":"api_li_editApiDirectory"},on:{click:function(i){return i.stopPropagation(),t.openDictionary("CHANGE",e)}}},[i("span",[t._v(t._s(t.$t('m.systemConfig["编辑"]')))])])])]):t._e()]),t._v(" "),i("collapse-transition",[(e.showMore,t._e())],2)]:[i("div",{staticClass:"bk-group-parent bk-p18",class:{"bk-group-li":e.check}},[i("i",{staticClass:"bk-icon icon-folder bk-ml5"}),t._v(" "),i("span",[t._v(t._s(t.$t('m.systemConfig["全部系统"]')))])])]],2)})),0)])]),t._v(" "),i("bk-dialog",{attrs:{"data-test-id":"api_dialog_accessApi","render-directive":"if",width:t.dictDataTable.width,"header-position":t.dictDataTable.headerPosition,loading:t.secondClick,"auto-close":t.dictDataTable.autoClose,"mask-close":t.dictDataTable.autoClose,title:t.dictDataTable.title},on:{confirm:t.submitDictionary},model:{value:t.dictDataTable.showDialog,callback:function(e){t.$set(t.dictDataTable,"showDialog",e)},expression:"dictDataTable.showDialog"}},[i("div",{staticClass:"bk-add-module"},[i("bk-form",{ref:"dictDataForm",attrs:{"label-width":200,"form-type":"vertical",model:t.dictDataTable.formInfo,rules:t.rules}},["ADD"===t.dictDataTable.type?[i("bk-form-item",{attrs:{"data-test-id":"api-input-systemName",label:t.$t("m.systemConfig['系统名称：']"),required:!0,property:"addName"}},[i("bk-input",{attrs:{clearable:!0},model:{value:t.dictDataTable.formInfo.addName,callback:function(e){t.$set(t.dictDataTable.formInfo,"addName",e)},expression:"dictDataTable.formInfo.addName"}})],1),t._v(" "),i("bk-form-item",{attrs:{"data-test-id":"api-input-systemCode",label:t.$t("m.systemConfig['系统编码：']"),required:!0,property:"addCode"}},[i("bk-input",{attrs:{clearable:!0},model:{value:t.dictDataTable.formInfo.addCode,callback:function(e){t.$set(t.dictDataTable.formInfo,"addCode",e)},expression:"dictDataTable.formInfo.addCode"}})],1)]:[i("bk-form-item",{attrs:{label:t.$t("m.systemConfig['系统名称：']"),required:!0,property:"code"}},["CHANGE"===t.dictDataTable.type?[i("bk-select",{attrs:{disabled:"",clearable:!1,searchable:""},on:{selected:t.changeCode},model:{value:t.dictDataTable.formInfo.code,callback:function(e){t.$set(t.dictDataTable.formInfo,"code",e)},expression:"dictDataTable.formInfo.code"}},t._l(t.allCodeList,(function(t){return i("bk-option",{key:t.code,attrs:{id:t.code,name:t.name}})})),1)]:[i("bk-select",{attrs:{clearable:!1,searchable:""},on:{selected:t.changeCode},model:{value:t.dictDataTable.formInfo.code,callback:function(e){t.$set(t.dictDataTable.formInfo,"code",e)},expression:"dictDataTable.formInfo.code"}},t._l(t.codeList,(function(t){return i("bk-option",{key:t.code,attrs:{id:t.code,name:t.name}})})),1)]],2)],t._v(" "),i("bk-form-item",{attrs:{label:t.$t("m.systemConfig['系统域名：']"),property:"domain"}},[i("bk-input",{attrs:{clearable:!0},model:{value:t.dictDataTable.formInfo.domain,callback:function(e){t.$set(t.dictDataTable.formInfo,"domain",e)},expression:"dictDataTable.formInfo.domain"}})],1),t._v(" "),i("bk-form-item",{attrs:{label:t.$t("m.systemConfig['负责人：']")}},[i("member-select",{model:{value:t.dictDataTable.formInfo.personInCharge,callback:function(e){t.$set(t.dictDataTable.formInfo,"personInCharge",e)},expression:"dictDataTable.formInfo.personInCharge"}})],1),t._v(" "),i("bk-form-item",{attrs:{label:t.$t("m.systemConfig['备注：']")}},[i("bk-input",{attrs:{placeholder:t.$t("m.systemConfig['请输入备注']"),type:"textarea",rows:3},model:{value:t.dictDataTable.formInfo.desc,callback:function(e){t.$set(t.dictDataTable.formInfo,"desc",e)},expression:"dictDataTable.formInfo.desc"}})],1),t._v(" "),i("bk-form-item",{attrs:{label:t.$t("m.systemConfig['启用：']")}},[i("bk-switcher",{attrs:{size:"small"},model:{value:t.dictDataTable.formInfo.is_activated,callback:function(e){t.$set(t.dictDataTable.formInfo,"is_activated",e)},expression:"dictDataTable.formInfo.is_activated"}})],1)],2)],1)])],1)},n=[];a._withStripped=!0},DSeF:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=u(i("P2sY")),n=u(i("14Xm")),s=u(i("gDS+")),o=u(i("D3Ub")),r=u(i("m1cH")),c=u(i("ipzc")),l=u(i("zP2a")),d=u(i("VflG"));function u(t){return t&&t.__esModule?t:{default:t}}e.default={components:{apiRequestBody:c.default,ace:l.default},mixins:[d.default],props:{detailInfoOri:{type:Object,default:function(){return{}}}},data:function(){return{secondClick:!1,dictDataTable:{showDialog:!1,width:700,headerPosition:"left",autoClose:!1,precision:0,formInfo:{name:"",desc:"",id:"",code:""},checkout:{name:""}},bodyDetailConfig:{value:"",width:"100%",height:300,readOnly:!0,fullScreen:!0,lang:"json"},responseDetailConfig:{value:"",width:"100%",height:200,readOnly:!1,fullScreen:!0,lang:"json"},titleList:[{name:"JSON"},{name:"RAW"}],jsonTitleList:[{name:this.$t('m.systemConfig["模板"]')},{name:this.$t('m.systemConfig["预览"]')}],checkIndex:0,jsonCheckIndex:0,rawInfo:{value:""},bodyInfo:{checkInfo:{}}}},computed:{basicInfo:{get:function(){return this.detailInfoOri},set:function(t){this.$parent.DetailInfo=t}},responseTreeDataList:{get:function(){var t=this,e=this.basicInfo.responseTreeDataList?[].concat((0,r.default)(this.basicInfo.responseTreeDataList)):[];return e.forEach((function(e){t.recordParent(e,"")})),e},set:function(t){this.$set(this.$parent.DetailInfo,"responseTreeDataList",t)}}},watch:{},mounted:function(){},methods:{changTitle:function(t,e){var i=this;return(0,o.default)(n.default.mark((function a(){var o;return n.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(-1===i.titleList.indexOf(t)){a.next=3;break}return i.checkIndex=e,a.abrupt("return");case 3:if(t.name!==i.$t('m.systemConfig["预览"]')||i.jsonCheckIndex===e){a.next=8;break}return a.next=6,i.listToJsonschema(i.basicInfo.responseTreeDataList);case 6:o=a.sent,i.bodyDetailConfig.value=(0,s.default)(i.jsonschemaToJson(o).root,null,4);case 8:i.jsonCheckIndex=e;case 9:case"end":return a.stop()}}),a,i)})))()},editorInitAfter:function(t){},importEditorInitAfter:function(t){},importChange:function(t){},blur:function(t,e,i){this.responseDetailConfig.value=t},addBodyLine:function(t){if(this.bodyInfo.checkInfo=t,t.parentInfo){var e={has_children:!1,showChildren:!1,checkInfo:!1,key:"",is_necessary:!1,default:"",type:"string",desc:"",parentInfo:t.parentInfo};t.parentInfo.children.splice(t.parentInfo.children.indexOf(t),0,e)}},addBodyChild:function(t){this.bodyInfo.checkInfo=t;var e={has_children:!1,showChildren:!1,checkInfo:!1,key:"array"===t.type?"items":"",is_necessary:!1,default:"",type:"string",desc:"",parentInfo:this.bodyInfo.checkInfo};t.children&&t.children.length||(this.$set(t,"children",[]),t.has_children=!0,t.showChildren=!0),t.children.push(e)},deleteBodyLine:function(t){this.bodyInfo.checkInfo=t,t.parentInfo&&t.parentInfo.children.splice(t.parentInfo.children.indexOf(t),1)},recordParent:function(t,e){var i=this;t.parentInfo=e,null==t.children||t.children&&!t.children.length||t.children.forEach((function(e){i.recordParent(e,t)}))},closeDictionary:function(t,e){this.dictDataTable=(0,a.default)({},{showDialog:!this.dictDataTable.showDialog,title:this.$t('m.systemConfig["导入JSON"]'),formInfo:{name:"",desc:"",id:e||"",code:""},checkout:{name:""},width:700,headerPosition:"left",autoClose:!1,precision:0})},submitDictionary:function(){var t=this;return(0,o.default)(n.default.mark((function e(){var i;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i={};try{i=t.jsonToJsonschema(JSON.parse(t.responseDetailConfig.value)),t.basicInfo.responseTreeDataList=t.jsonschemaToList(i),t.closeDictionary()}catch(e){t.$bkMessage({message:e.message?e.message:e,theme:"error"})}case 2:case"end":return e.stop()}}),e,t)})))()}}}},Dhx6:function(t,e,i){"use strict";i.r(e);var a=i("Snxx"),n=i.n(a);for(var s in a)["default"].indexOf(s)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(s);e.default=n.a},Du2H:function(t,e,i){"use strict";i.r(e);var a=i("ogKq"),n=i.n(a);for(var s in a)["default"].indexOf(s)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(s);e.default=n.a},DxGc:function(t,e,i){"use strict";i("o6S2")},EOYy:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=r(i("gDS+")),n=r(i("Qbtg")),s=r(i("UV3c")),o=r(i("S0zK"));function r(t){return t&&t.__esModule?t:{default:t}}e.default={name:"apiContent",components:{apiBasic:n.default,apiEditor:s.default,apiRun:o.default},props:{apiDetailInfo:{type:Object,default:function(){return{}}},treeList:{type:Array,default:function(){return[]}},pathList:{type:Array,default:function(){return[]}},isBuiltinIdList:{type:Array,default:function(){return[]}},secondLevelInfo:{type:Object,default:function(){return{}}}},data:function(){return{apiDetailInfoCommon:this.apiDetailInfo,titleList:[{name:this.$t('m.systemConfig["预览"]')},{name:this.$t('m.systemConfig["编辑"]')},{name:this.$t('m.systemConfig["运行"]')}],checkIndex:1}},computed:{backName:function(){return this.secondLevelInfo.name}},watch:{apiDetailInfo:function(t,e){this.apiDetailInfoCommon=JSON.parse((0,a.default)(t)),this.initData()}},mounted:function(){this.initData()},methods:{backTab:function(){this.$parent.displayInfo.level_1={}},changTitle:function(t,e){this.checkIndex=e},initData:function(){this.apiDetailInfoCommon.req_headers&&(this.apiDetailInfoCommon.req_headers.length||(this.apiDetailInfoCommon.req_headers=[{name:"",value:"",sample:"",desc:""}]),this.apiDetailInfoCommon.req_params.length||(this.apiDetailInfoCommon.req_params=[{name:"",is_necessary:0,sample:"",desc:"",value:""}]))}}}},Efyx:function(t,e,i){"use strict";i.r(e);var a=i("ufwX"),n=i("4NGm");for(var s in n)["default"].indexOf(s)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(s);i("Z3xY");var o=i("KHd+"),r=Object(o.a)(n.default,a.a,a.b,!1,null,"d940e3a0",null);r.options.__file="src/views/processManagement/apiConfigure/apiTable.vue",e.default=r.exports},Fgut:function(t,e,i){"use strict";i("xlNs")},I5xc:function(t,e,i){"use strict";i.r(e);var a=i("yC50"),n=i.n(a);for(var s in a)["default"].indexOf(s)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(s);e.default=n.a},"KF+D":function(t,e,i){"use strict";i.r(e);var a=i("xGyw"),n=i.n(a);for(var s in a)["default"].indexOf(s)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(s);e.default=n.a},KPLh:function(t,e,i){"use strict";i.d(e,"a",(function(){return a})),i.d(e,"b",(function(){return n}));var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"bk-api-editor"},[i("div",{staticClass:"bk-basic-item mt20"},[i("div",{staticClass:"bk-service-name"},[i("h1",[i("span",{staticClass:"is-outline"}),t._v(t._s(t.$t('m.systemConfig["基本设置"]')))])]),t._v(" "),i("div",{staticClass:"bk-basic-content"},[i("api-editor-basic",{ref:"apiEditorBasic",attrs:{"detail-info-ori":t.DetailInfo,"tree-list":t.treeList,"path-list":t.pathList,"is-builtin-id-list":t.isBuiltinIdList},on:{changeRequest:t.changeRequest}})],1)]),t._v(" "),i("div",{staticClass:"bk-basic-item mt20"},[i("div",{staticClass:"bk-service-name"},[i("h1",[i("span",{staticClass:"is-outline"}),t._v(t._s(t.$t('m.systemConfig["请求参数"]')))])]),t._v(" "),i("div",{staticClass:"bk-basic-content"},[i("api-editor-request",{attrs:{"detail-info-ori":t.DetailInfo}})],1)]),t._v(" "),i("div",{staticClass:"bk-basic-item mt20"},[i("div",{staticClass:"bk-service-name"},[i("h1",[i("span",{staticClass:"is-outline"}),t._v(t._s(t.$t('m.systemConfig["请求数据加工"]')))])]),t._v(" "),i("div",{staticClass:"bk-basic-content"},[i("ace",{attrs:{value:t.DetailInfo.before_req,width:t.dataProcess.width,height:t.dataProcess.height,lang:t.dataProcess.lang,"full-screen":t.dataProcess.fullScreen,theme:"monokai"},on:{blur:t.reqChangBlur}})],1)]),t._v(" "),i("div",{staticClass:"bk-basic-item mt20"},[i("div",{staticClass:"bk-service-name"},[i("h1",[i("span",{staticClass:"is-outline"}),t._v(t._s(t.$t('m.systemConfig["返回数据加工"]')))])]),t._v(" "),i("div",{staticClass:"bk-basic-content"},[i("ace",{attrs:{value:t.DetailInfo.map_code,width:t.dataProcess.width,height:t.dataProcess.height,lang:t.dataProcess.lang,"full-screen":t.dataProcess.fullScreen,theme:"monokai"},on:{blur:t.changBlur}})],1)]),t._v(" "),i("div",{staticClass:"bk-basic-item mt20"},[i("div",{staticClass:"bk-service-name"},[i("h1",[i("span",{staticClass:"is-outline"}),t._v(t._s(t.$t('m.systemConfig["返回结果"]')))])]),t._v(" "),i("div",{staticClass:"bk-basic-content"},[i("api-editor-result",{attrs:{"detail-info-ori":t.DetailInfo}})],1)]),t._v(" "),i("div",{staticClass:"bk-basic-item mt20"},[i("div",{staticClass:"bk-service-name"},[i("h1",[i("span",{staticClass:"is-outline"}),t._v(t._s(t.$t('m.systemConfig["其他"]')))])]),t._v(" "),i("div",{staticClass:"bk-basic-content"},[i("api-editor-others",{attrs:{"detail-info-ori":t.DetailInfo}})],1)]),t._v(" "),t.DetailInfo.is_builtin?t._e():i("div",{staticClass:"bk-basic-btn"},[i("bk-button",{attrs:{theme:"primary","data-test-id":"apiDetail_button_editUpdateApi",title:t.$t("m.systemConfig['保存']")},on:{click:t.updateApi}},[t._v("\n            "+t._s(t.$t("m.systemConfig['保存']"))+"\n        ")])],1)])},n=[];a._withStripped=!0},KoG3:function(t,e,i){},LVJB:function(t,e,i){"use strict";i.r(e);var a=i("atRL"),n=i("U+hS");for(var s in n)["default"].indexOf(s)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(s);i("CgKv");var o=i("KHd+"),r=Object(o.a)(n.default,a.a,a.b,!1,null,"5ddeabf2",null);r.options.__file="src/views/processManagement/apiConfigure/components/apiEditorResult.vue",e.default=r.exports},Lazy:function(t,e,i){"use strict";i.d(e,"a",(function(){return a})),i.d(e,"b",(function(){return n}));var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"bk-itsm-service"},[i("div",{staticClass:"is-title",class:{"bk-title-left":!t.sliderStatus}},[i("p",{staticClass:"bk-come-back"},[t._v("\n            "+t._s(t.title)+"\n        ")])]),t._v(" "),i("div",{staticClass:"itsm-page-content"},[i("div",{staticClass:"bk-api-configure"},[i("div",{staticClass:"bk-directory-tree"},[i("api-tree",{ref:"apiTree",attrs:{"project-id":t.projectId,"code-list":t.codeList,"all-code-list":t.allCodeList,"tree-list-ori":t.treeList}})],1),t._v(" "),i("div",{staticClass:"bk-directory-table"},[Object.keys(t.displayInfo.level_1).length?i("api-content",{attrs:{"second-level-info":t.secondLevelInfo,"api-detail-info":t.apiDetailInfo,"tree-list":t.treeList,"path-list":t.pathList,"is-builtin-id-list":t.isBuiltinIdList}}):i("api-table",{ref:"apiTable",attrs:{"project-id":t.projectId,"first-level-info":t.firstLevelInfo,"custom-paging":t.customPaging,"tree-list":t.treeList,"path-list":t.pathList,"list-info-ori":t.listInfo}})],1)])])])},n=[];a._withStripped=!0},NBy2:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=c(i("m1cH")),n=c(i("14Xm")),s=c(i("gDS+")),o=c(i("D3Ub")),r=c(i("VflG"));function c(t){return t&&t.__esModule?t:{default:t}}e.default={mixins:[r.default],props:{apiDetailInfo:{type:Object,default:function(){return{}}}},data:function(){return{bodyTableData:[],responseTableData:[],bodyDetailConfig:{value:"",width:"100%",height:200,readOnly:!0,fullScreen:!0,lang:"json"},responseDetailConfig:{value:"",width:"100%",height:200,readOnly:!0,fullScreen:!0,lang:"json"},basicList:[{id:"name",name:this.$t('m.systemConfig["接口名称："]'),value:"get_user_info"},{id:"creator",name:this.$t('m.systemConfig["创建人："]'),value:"pitou"},{id:"state",name:this.$t('m.systemConfig["状态："]'),value:"草稿"},{id:"update_time",name:this.$t('m.systemConfig["更新时间："]'),value:"2019-05-07 10:42:42"},{id:"path",name:this.$t('m.systemConfig["接口路径："]'),code:"GET",value:"/api/user/"},{id:"desc",name:this.$t('m.systemConfig["备注：："]'),value:"test api"},{id:"mock",name:this.$t('m.systemConfig["Mock地址："]'),value:"http://yapi.demo.qunar.com/mock/65300/api/user/"}],headersList:[{name:"Content-Type",value:"application/json",is_necessary:!0,sample:"",desc:""}],queryList:[{name:"aaa",is_necessary:!0,sample:"1123",desc:""}],bodyList:[{name:"result",type:"object",is_necessary:!1,default:"",desc:"",otherInfo:this.$t('m.systemConfig["备注："]')+"test"}],resultList:[{name:"result",type:" boolean",is_necessary:!1,default:"",desc:"",otherInfo:"input: 123"}]}},computed:{},watch:{apiDetailInfo:function(t,e){this.initDate()}},mounted:function(){this.initDate()},methods:{bodyTableDataChange:function(){var t=this;return(0,o.default)(n.default.mark((function e(){var i;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=JSON.parse((0,s.default)(t.apiDetailInfo.bodyTableData)),e.next=3,i.forEach((function(t){t.children=[]}));case 3:return e.next=5,t.recordChildren(i);case 5:return e.next=7,i;case 7:t.bodyTableData=e.sent;case 8:case"end":return e.stop()}}),e,t)})))()},responseTableDataChange:function(){this.responseTableData=JSON.parse((0,s.default)(this.apiDetailInfo.responseTableData)),this.responseTableData.forEach((function(t){t.children=[]})),this.recordChildren(this.responseTableData)},initDate:function(){this.apiDetailInfo.bodyJsonData&&(this.bodyDetailConfig.value=(0,s.default)(this.apiDetailInfo.bodyJsonData.root,null,4)),this.bodyTableDataChange(),this.responseTableDataChange()},editorInitAfter:function(t){},changeState:function(t){t.showChildren=!t.showChildren,t.children.forEach((function(e){e.isShow=t.showChildren})),t.showChildren||this.closeChildren(t)},closeChildren:function(t){var e=this;t.children.forEach((function(t){t.isShow=!1,t.has_children&&(t.showChildren=!1,e.closeChildren(t))}))},recordChildren:function(t){for(var e=t.map((function(t){return t.level})),i=Math.max.apply(Math,(0,a.default)(e)),n=function(e){t.filter((function(t){return t.level===e})).forEach((function(e){!function(t,e){t.filter((function(t){return t.level===e.level-1&&t.primaryKey===e.parentPrimaryKey&&t.ancestorsList.toString()===e.ancestorsList.slice(0,-1).toString()}))[0].children.push(e)}(t,e)}))},s=i;s>0;s--)n(s)}}}},OJvI:function(t,e,i){},OXLn:function(t,e,i){"use strict";i("3VaI")},OhUg:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=d(i("14Xm")),n=d(i("D3Ub")),s=d(i("P2sY")),o=d(i("m1cH")),r=d(i("ipzc")),c=d(i("zP2a")),l=d(i("VflG"));function d(t){return t&&t.__esModule?t:{default:t}}e.default={components:{apiRequestBody:r.default,ace:c.default},mixins:[l.default],props:{detailInfoOri:{type:Object,default:function(){return{}}}},data:function(){return{secondClick:!1,responseDetailConfig:{value:"",width:"100%",height:200,readOnly:!1,fullScreen:!0,lang:"json"},dictDataTable:{showDialog:!1,width:700,headerPosition:"left",autoClose:!1,precision:0,formInfo:{name:"",desc:"",id:"",code:""},checkout:{name:""}},titleList:[{name:"Query"},{name:"Body"}],checkIndex:1,necessaryList:[{id:1,name:this.$t('m.systemConfig["必选"]')},{id:0,name:this.$t('m.systemConfig["可选"]')}],bodyInfo:{checkInfo:{}}}},computed:{basicInfo:{get:function(){return this.detailInfoOri},set:function(t){this.$parent.DetailInfo=t}},treeDataList:{get:function(){var t=this,e=this.basicInfo.treeDataList?[].concat((0,o.default)(this.basicInfo.treeDataList)):[];return e.forEach((function(e){t.recordParent(e,"")})),e},set:function(t){this.$set(this.$parent.DetailInfo,"treeDataList",t)}}},created:function(){this.basicInfo.req_params&&this.basicInfo.req_params.length&&this.basicInfo.req_params.forEach((function(t){t.is_necessary=t.is_necessary?1:0}))},methods:{initDate:function(){var t=this;this.treeDataList.forEach((function(e){t.recordParent(e,"")}))},recordParent:function(t,e){var i=this;t.parentInfo=e,null==t.children||t.children&&!t.children.length||t.children.forEach((function(e){i.recordParent(e,t)}))},changTitle:function(t,e){this.checkIndex=e},addLine:function(t,e){t.splice(e+1,0,{name:"",value:"",sample:"",desc:""})},deleteLine:function(t,e){1!==t.length&&t.splice(e,1)},addQuery:function(t,e){t.splice(e+1,0,{name:"",is_necessary:0,sample:"",desc:"",value:""})},deleteQuery:function(t,e){1!==t.length&&t.splice(e,1)},addBodyLine:function(t){if(this.bodyInfo.checkInfo=t,t.parentInfo){var e={has_children:!1,showChildren:!1,checkInfo:!1,key:"",is_necessary:!1,default:"",type:"string",desc:"",parentInfo:t.parentInfo};t.parentInfo.children.splice(t.parentInfo.children.indexOf(t)+1,0,e)}},addBodyChild:function(t){this.bodyInfo.checkInfo=t;var e={has_children:!1,showChildren:!1,checkInfo:!1,key:"array"===t.type?"items":"",is_necessary:!1,default:"",type:"string",desc:"",parentInfo:this.bodyInfo.checkInfo};t.children&&t.children.length||(this.$set(t,"children",[]),t.children=t.children.splice(0,t.children.length),t.has_children=!0,t.showChildren=!0),t.children.push(e)},deleteBodyLine:function(t){this.bodyInfo.checkInfo=t,t.parentInfo&&t.parentInfo.children.splice(t.parentInfo.children.indexOf(t),1)},closeDictionary:function(t,e){this.dictDataTable=(0,s.default)({},{showDialog:!this.dictDataTable.showDialog,formInfo:{name:"",desc:"",id:e||"",code:""},checkout:{name:""},width:700,headerPosition:"left",autoClose:!1,precision:0})},submitDictionary:function(){var t=this;return(0,n.default)(a.default.mark((function e(){var i;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i={};try{i=t.jsonToJsonschema(JSON.parse(t.responseDetailConfig.value)),t.basicInfo.treeDataList=t.jsonschemaToList(i),t.closeDictionary()}catch(e){t.$bkMessage({message:e.message?e.message:e,theme:"error"})}case 2:case"end":return e.stop()}}),e,t)})))()},importEditorInitAfter:function(t){},blur:function(t,e,i){this.responseDetailConfig.value=t}}}},QX6E:function(t,e,i){"use strict";i("eQ8a")},Qbtg:function(t,e,i){"use strict";i.r(e);var a=i("i/3U"),n=i("Yuub");for(var s in n)["default"].indexOf(s)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(s);i("OXLn");var o=i("KHd+"),r=Object(o.a)(n.default,a.a,a.b,!1,null,"ac14223e",null);r.options.__file="src/views/processManagement/apiConfigure/components/apiBasic.vue",e.default=r.exports},RHq2:function(t,e,i){"use strict";i("OJvI")},S0zK:function(t,e,i){"use strict";i.r(e);var a=i("eqnP"),n=i("ok0E");for(var s in n)["default"].indexOf(s)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(s);i("Z492");var o=i("KHd+"),r=Object(o.a)(n.default,a.a,a.b,!1,null,"f7f12d04",null);r.options.__file="src/views/processManagement/apiConfigure/components/apiRun.vue",e.default=r.exports},Snxx:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"apiEditorOthers",props:{detailInfoOri:{type:Object,default:function(){return{}}}},data:function(){return{}},computed:{basicInfo:{get:function(){return this.detailInfoOri},set:function(t){this.$parent.DetailInfo=t}}},methods:{}}},TUXp:function(t,e,i){"use strict";i.r(e);var a=i("nqJ4"),n=i("nAuZ");for(var s in n)["default"].indexOf(s)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(s);i("kQRz");var o=i("KHd+"),r=Object(o.a)(n.default,a.a,a.b,!1,null,"3da757e3",null);r.options.__file="src/views/processManagement/apiConfigure/addApiInfo.vue",e.default=r.exports},"U+hS":function(t,e,i){"use strict";i.r(e);var a=i("DSeF"),n=i.n(a);for(var s in a)["default"].indexOf(s)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(s);e.default=n.a},UKTy:function(t,e,i){"use strict";i.r(e);var a=i("sREQ"),n=i("c8Ht");for(var s in n)["default"].indexOf(s)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(s);i("RHq2");var o=i("KHd+"),r=Object(o.a)(n.default,a.a,a.b,!1,null,"1e5f37b4",null);r.options.__file="src/views/processManagement/apiConfigure/components/apiEditorBasic.vue",e.default=r.exports},UV3c:function(t,e,i){"use strict";i.r(e);var a=i("KPLh"),n=i("cBfV");for(var s in n)["default"].indexOf(s)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(s);i("YInI");var o=i("KHd+"),r=Object(o.a)(n.default,a.a,a.b,!1,null,"7da209ca",null);r.options.__file="src/views/processManagement/apiConfigure/components/apiEditor.vue",e.default=r.exports},WNBJ:function(t,e,i){},YInI:function(t,e,i){"use strict";i("Ysgg")},YbBn:function(t,e,i){"use strict";i.r(e);var a=i("v8ba"),n=i("cqkT");for(var s in n)["default"].indexOf(s)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(s);i("5Y4Sc");var o=i("KHd+"),r=Object(o.a)(n.default,a.a,a.b,!1,null,"8f960bd6",null);r.options.__file="src/views/processManagement/apiConfigure/components/apiEditorRequest.vue",e.default=r.exports},Ysgg:function(t,e,i){},Yuub:function(t,e,i){"use strict";i.r(e);var a=i("NBy2"),n=i.n(a);for(var s in a)["default"].indexOf(s)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(s);e.default=n.a},Z3xY:function(t,e,i){"use strict";i("tMUw")},Z492:function(t,e,i){"use strict";i("KoG3")},atRL:function(t,e,i){"use strict";i.d(e,"a",(function(){return a})),i.d(e,"b",(function(){return n}));var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"bk-api-editor-result"},[i("ul",{staticClass:"bk-request-ul"},t._l(t.jsonTitleList,(function(e,a){return i("li",{key:a,class:{"bk-api-check":t.jsonCheckIndex===a},on:{click:function(i){return t.changTitle(e,a)}}},[i("span",[t._v(t._s(e.name))])])})),0),t._v(" "),t.jsonCheckIndex?[i("ace",{attrs:{value:t.bodyDetailConfig.value,width:t.bodyDetailConfig.width,height:t.bodyDetailConfig.height,"read-only":t.bodyDetailConfig.readOnly,lang:t.bodyDetailConfig.lang,"full-screen":t.bodyDetailConfig.fullScreen,theme:"textmate"},on:{init:t.editorInitAfter}})]:[i("div",{staticClass:"mb10"},[i("bk-button",{attrs:{theme:"primary","data-test-id":"apiDetail_button_importResultJSON",title:t.$t("m.systemConfig['导入JSON']"),disabled:t.basicInfo.is_builtin},on:{click:t.closeDictionary}},[t._v("\n                "+t._s(t.$t("m.systemConfig['导入JSON']"))+"\n            ")])],1),t._v(" "),i("api-request-body",{attrs:{"is-builtin":t.basicInfo.is_builtin,"tree-data-list":t.responseTreeDataList},on:{addBrotherLine:t.addBodyLine,addChildLine:t.addBodyChild,deleteLine:t.deleteBodyLine}})],t._v(" "),i("bk-dialog",{attrs:{"render-directive":"if",width:t.dictDataTable.width,"header-position":t.dictDataTable.headerPosition,loading:t.secondClick,"auto-close":t.dictDataTable.autoClose,"mask-close":t.dictDataTable.autoClose,title:t.$t("m.systemConfig['导入JSON']")},on:{confirm:t.submitDictionary},model:{value:t.dictDataTable.showDialog,callback:function(e){t.$set(t.dictDataTable,"showDialog",e)},expression:"dictDataTable.showDialog"}},[i("div",{staticClass:"bk-add-module"},[i("ace",{attrs:{value:t.responseDetailConfig.value,width:t.responseDetailConfig.width,height:t.responseDetailConfig.height,"read-only":t.responseDetailConfig.readOnly,lang:t.responseDetailConfig.lang,"full-screen":t.responseDetailConfig.fullScreen,theme:"textmate"},on:{blur:t.blur,init:t.importEditorInitAfter}})],1)])],2)},n=[];a._withStripped=!0},bvPN:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=c(i("14Xm")),n=c(i("D3Ub")),s=i("CeR/"),o=c(i("TUXp")),r=c(i("0hVY"));function c(t){return t&&t.__esModule?t:{default:t}}e.default={components:{addApiInfo:o.default},mixins:[r.default],props:{treeList:{type:Array,default:function(){return[]}},listInfoOri:{type:Array,default:function(){return[]}},pathList:{type:Array,default:function(){return[]}},projectId:String,firstLevelInfo:{type:Object,default:function(){return{}}},customPaging:{type:Object,default:function(){return{}}}},data:function(){return{secondClick:!1,isDropdownShow:!1,titleList:[{name:this.$t('m.systemConfig["API列表"]')}],checkIndex:0,isTableLoading:!1,nameInfo:"",checkList:[],allCheck:!1,searchInfo:{key:""},pagination:{current:1,count:10,limit:10},entryInfo:{show:!1,title:"",width:700},fileVal:"",typeInfo:""}},computed:{listInfo:{get:function(){return this.listInfoOri},set:function(t){this.$parent.listInfo=t}}},watch:{},mounted:function(){},methods:{entryOne:function(t){var e=this;return(0,n.default)(a.default.mark((function i(){var n;return a.default.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(e.projectId||e.hasPermission(["public_api_manage"],t.auth_actions)){i.next=4;break}return n={public_api:[{id:t.id,name:t.name}]},e.applyForPermission(["public_api_manage"],t.auth_actions,n),i.abrupt("return");case 4:return e.$parent.displayInfo.level_1=t,i.next=7,e.$parent.getRemoteApiDetail(t.id);case 7:case"end":return i.stop()}}),i,e)})))()},getRemoteSystemData:function(){this.$parent.getRemoteSystemData();var t={page:this.pagination.current,page_size:this.pagination.limit};this.$parent.getTableList(this.$parent.displayInfo.level_0.id||"",t,this.searchInfo)},systemName:function(t){var e=this.treeList.filter((function(e){return e.id===t}));return e.length?e[0].name:"--"},changTitle:function(t,e){this.checkIndex=e},openShade:function(t){this.projectId||this.hasPermission(["public_api_create"])?(this.typeInfo=t,this.entryInfo.title="ADD"===t?this.$t('m.systemConfig["新增接口"]'):this.$t('m.systemConfig["接入接口"]'),this.$refs.apiDropdown.hide(),this.entryInfo.show=!this.entryInfo.show):this.applyForPermission(["public_api_create"],[],{})},dropdownShow:function(){this.isDropdownShow=!0},dropdownHide:function(){this.isDropdownShow=!1},serchEntry:function(){var t={page:this.pagination.current,page_size:this.pagination.limit};this.$parent.getTableList(this.$parent.displayInfo.level_0.id||"",t,this.searchInfo)},clearInfo:function(){this.searchInfo.key="",this.serchEntry()},handlePageLimitChange:function(){this.pagination.limit=arguments[0];var t={page:this.pagination.current,page_size:this.pagination.limit};this.$parent.getTableList(this.$parent.displayInfo.level_0.id||"",t,this.searchInfo)},handlePageChange:function(t){this.pagination.current=t;var e={page:this.pagination.current,page_size:this.pagination.limit};this.$parent.getTableList(this.$parent.displayInfo.level_0.id||"",e,this.searchInfo)},handleSelectAll:function(t){this.checkList=t},handleSelect:function(t,e){this.checkList=t},disabledFn:function(t,e){return(this.projectId||this.hasPermission(["public_api_manage"],t.auth_actions))&&!t.is_builtin},openDelete:function(t){var e=this;if(this.projectId||this.hasPermission(["public_api_manage"],t.auth_actions))this.$bkInfo({type:"warning",title:this.$t('m.systemConfig["确认移除服务？"]'),subTitle:this.$t('m.systemConfig["移除后，将无法使用该接口，请谨慎操作"]'),confirmFn:function(){var i=t.id;e.secondClick||(e.secondClick=!0,e.$store.dispatch("apiRemote/delete_api",i).then((function(t){e.$bkMessage({message:e.$t('m.systemConfig["删除成功"]'),theme:"success"}),e.getRemoteSystemData()})).catch((function(t){(0,s.errorHandler)(t,e)})).finally((function(){e.secondClick=!1})))}});else{var i={public_api:[{id:t.id,name:t.name}]};this.applyForPermission(["public_api_manage"],t.auth_actions,i)}},deleteCheck:function(){var t=this;this.$bkInfo({type:"warning",title:this.$t('m.systemConfig["确认移除服务？"]'),subTitle:this.$t('m.systemConfig["移除后，将无法使用该接口，请谨慎操作"]'),confirmFn:function(){var e=t.checkList.map((function(t){return t.id})).join(",");t.secondClick||(t.secondClick=!0,t.$store.dispatch("apiRemote/batch_delete_apis",{id:e}).then((function(e){t.$bkMessage({message:t.$t('m.systemConfig["批量删除成功"]'),theme:"success"}),t.getRemoteSystemData()})).catch((function(e){(0,s.errorHandler)(e,t)})).finally((function(){t.secondClick=!1})))}})},hasImportPermission:function(){this.projectId||this.hasPermission(["public_api_create"])||this.applyForPermission(["public_api_create"],[],{})},handleFile:function(t){var e=this,i=t.target.files[0];if(i.size<=10485760){var a=new FormData;a.append("file",i);this.$store.dispatch("apiRemote/get_api_import",{fileType:"json",data:a}).then((function(t){e.$bkMessage({message:e.$t('m.systemConfig["成功导入"]')+""+t.data.success+e.$t('m.systemConfig["个API接口，"]')+e.$t('m.systemConfig["失败"]')+t.data.failed+e.$t('m.systemConfig["个"]'),theme:"success"}),e.getRemoteSystemData()}),(function(t){(0,s.errorHandler)(t,e)})).finally((function(){e.fileVal=""}))}else this.fileVal="",this.$bkMessage({message:this.$t('m.systemConfig["文件大小不能超过10MB！"]'),theme:"error"})},exportFlow:function(t,e){window.open(window.SITE_URL+"api/postman/remote_api/"+t.id+"/exports/")}}}},c8Ht:function(t,e,i){"use strict";i.r(e);var a=i("0lB7"),n=i.n(a);for(var s in a)["default"].indexOf(s)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(s);e.default=n.a},cBfV:function(t,e,i){"use strict";i.r(e);var a=i("2LC8"),n=i.n(a);for(var s in a)["default"].indexOf(s)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(s);e.default=n.a},cHKx:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=o(i("PaSM")),n=o(i("u8Ap")),s=i("CeR/");function o(t){return t&&t.__esModule?t:{default:t}}e.default={name:"addApiInfo",components:{memberSelect:n.default},mixins:[a.default],props:{treeList:{type:Array,default:function(){return[]}},pathList:{type:Array,default:function(){return[]}},firstLevelInfo:{type:Object,default:function(){return{}}},typeInfo:{type:String,default:function(){return""}}},data:function(){return{secondClick:!1,is_builtin:!0,directory:{formInfo:{name:"",key:"",type:"GET",road:"",is_activated:!0,func_name:"",version:"v1",category:"",ownersInputValue:[],desc:""}},checkInfo:{name:"",road:""},typeList:[{name:"GET"},{name:"POST"}],isDropdownShow:!1,rules:{}}},computed:{isAll:function(){return!this.firstLevelInfo.code||(this.directory.formInfo.key=this.firstLevelInfo.id,this.$parent.$parent.$parent.getChannelPathList(this.firstLevelInfo.code),!1)}},mounted:function(){this.rules.key=this.checkCommonRules("select").select,this.rules.road=this.checkCommonRules("select").select,this.rules.name=this.checkCommonRules("name").name},methods:{closeAdd:function(){this.$parent.$parent.openShade()},submitAdd:function(){var t=this;this.$refs.addApiForm.validate().then((function(e){t.addHandel()}),(function(t){console.warn(t)}))},getRemoteSystemData:function(){this.$parent.$parent.getRemoteSystemData()},addHandel:function(){var t=this;if(!this.secondClick){var e={remote_system:this.directory.formInfo.key,name:this.directory.formInfo.name,method:this.directory.formInfo.type,owners:this.directory.formInfo.ownersInputValue.join(","),path:this.directory.formInfo.road,is_activated:this.directory.formInfo.is_activated,desc:this.directory.formInfo.desc,func_name:this.directory.formInfo.func_name||"func_name",version:this.directory.formInfo.version,category:this.directory.formInfo.category,req_params:[],req_headers:[],rsp_data:{},req_body:{}};this.secondClick=!0,this.$store.dispatch("apiRemote/post_remote_api",e).then((function(e){t.$bkMessage({message:t.$t('m.systemConfig["添加成功"]'),theme:"success"}),t.getRemoteSystemData(),t.closeAdd()})).catch((function(e){(0,s.errorHandler)(e,t)})).finally((function(){t.secondClick=!1}))}},switchChange:function(t){this.directory.formInfo.is_activated=t},changeMethod:function(t,e){var i=this.pathList.filter((function(e){return e.path===t}))[0];this.directory.formInfo.type=i.method,this.directory.formInfo.func_name=i.func_name,this.directory.formInfo.name=i.label,this.directory.formInfo.version=i.version||"v1",this.directory.formInfo.category=i.category},changeCode:function(t,e){this.directory.formInfo={name:"",key:t,type:"GET",road:"",is_activated:!0,func_name:"",version:"v1",category:"component",ownersInputValue:[],desc:""};var i=this.treeList.slice(1).filter((function(e){return e.id===t}))[0];this.$parent.$parent.$parent.getChannelPathList(i.code)},dropdownShow:function(){this.isDropdownShow=!0},dropdownHide:function(){this.isDropdownShow=!1},requestHandler:function(t,e){this.directory.formInfo.type=t.name,this.$refs.requestwayDrop.hide()}}}},cqkT:function(t,e,i){"use strict";i.r(e);var a=i("OhUg"),n=i.n(a);for(var s in a)["default"].indexOf(s)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(s);e.default=n.a},eQ8a:function(t,e,i){},eWQH:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=p(i("gDS+")),n=p(i("GQeE")),s=p(i("14Xm")),o=p(i("D3Ub")),r=p(i("m1cH")),c=p(i("VflG")),l=p(i("k0J1")),d=p(i("Efyx")),u=p(i("nAxG")),f=i("CeR/");function p(t){return t&&t.__esModule?t:{default:t}}e.default={components:{apiTree:l.default,apiTable:d.default,apiContent:u.default},mixins:[c.default],props:{projectId:String,title:{type:String,default:"API"}},data:function(){return{displayInfo:{level_0:{},level_1:{}},apiDetailInfo:{},listInfo:[],treeList:[{id:0,name:this.$t('m.systemConfig["全部系统"]'),code:"",check:!1}],codeList:[],allCodeList:[],pathList:[],isBuiltinIdList:[],isSelectedApiList:[],showContent:!1,customPaging:{total_page:1,page:1,count:0,page_size:10,list:[{num:5},{num:10},{num:15},{num:20}]}}},computed:{sliderStatus:function(){return this.$store.state.common.slideStatus},firstLevelInfo:function(){return this.displayInfo.level_0},secondLevelInfo:function(){return this.displayInfo.level_1}},mounted:function(){this.getRemoteSystemData()},methods:{getRemoteSystemData:function(){var t=this,e={project_key:this.projectId||"public"};this.$refs.apiTree.isTreeLoading=!0,this.$store.dispatch("apiRemote/get_remote_system",e).then((function(e){t.isBuiltinIdList=e.data.map((function(t){return t.system_id})),e.data.forEach((function(e){e.moreShow=!1,e.check=e.id===t.displayInfo.level_0.id})),t.treeList=[t.treeList[0]].concat((0,r.default)(e.data)),t.getSystems()})).catch((function(e){(0,f.errorHandler)(e,t)})).finally((function(){t.$refs.apiTree.isTreeLoading=!1}))},getSystems:function(){var t=this;return(0,o.default)(s.default.mark((function e(){var i;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={},e.next=3,t.$store.dispatch("apiRemote/get_systems",i).then((function(e){t.allCodeList=e.data,t.codeList=e.data.filter((function(e){return-1===t.isBuiltinIdList.indexOf(e.system_id)}))})).catch((function(e){(0,f.errorHandler)(e,t)})).finally((function(){}));case 3:case"end":return e.stop()}}),e,t)})))()},getRemoteApiDetail:function(t){var e=this;return(0,o.default)(s.default.mark((function i(){var o;return s.default.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return o={id:t},i.next=3,e.$store.dispatch("apiRemote/get_remote_api_detail",o).then((function(t){e.apiDetailInfo=t.data,e.apiDetailInfo.ownersInputValue=e.apiDetailInfo.owners?e.apiDetailInfo.owners.split(","):[],e.apiDetailInfo.req_headers.length||(e.apiDetailInfo.req_headers=[]),e.apiDetailInfo.req_params.length?e.apiDetailInfo.req_params=[].concat((0,r.default)(e.apiDetailInfo.req_params.map((function(t){return t.value="",t})))):e.apiDetailInfo.req_params=[],(0,n.default)(e.apiDetailInfo.req_body).length&&(0,n.default)(e.apiDetailInfo.req_body.properties).length?(e.apiDetailInfo.treeDataList=e.jsonschemaToList({root:JSON.parse((0,a.default)(e.apiDetailInfo.req_body))}),e.apiDetailInfo.bodyJsonData=e.jsonschemaToJson({root:JSON.parse((0,a.default)(e.apiDetailInfo.req_body))}),e.apiDetailInfo.bodyTableData=e.treeToTableList(JSON.parse((0,a.default)(e.apiDetailInfo.treeDataList[0].children)))):(e.apiDetailInfo.treeDataList=[{has_children:!1,showChildren:!0,checkInfo:!1,key:"root",is_necessary:!0,type:"object",desc:e.$t('m.systemConfig["初始化数据"]'),parentInfo:"",children:[]}],e.apiDetailInfo.bodyJsonData={root:{}},e.apiDetailInfo.bodyTableData=[]),(0,n.default)(e.apiDetailInfo.rsp_data).length&&(0,n.default)(e.apiDetailInfo.rsp_data.properties).length?(e.apiDetailInfo.responseTreeDataList=e.jsonschemaToList({root:e.apiDetailInfo.rsp_data}),e.apiDetailInfo.responseJsonData=e.jsonschemaToJson({root:e.apiDetailInfo.rsp_data}),e.apiDetailInfo.responseTableData=e.treeToTableList(JSON.parse((0,a.default)(e.apiDetailInfo.responseTreeDataList[0].children)))):(e.apiDetailInfo.responseTreeDataList=[{has_children:!1,showChildren:!0,checkInfo:!1,key:"root",is_necessary:!0,type:"object",desc:e.$t('m.systemConfig["初始化数据"]'),parentInfo:"",children:[]}],e.apiDetailInfo.responseJsonData={root:{}},e.apiDetailInfo.responseTableData=[])})).catch((function(t){(0,f.errorHandler)(t,e)}));case 3:case"end":return i.stop()}}),i,e)})))()},getTableList:function(t,e,i){var a=this;return(0,o.default)(s.default.mark((function n(){var o;return s.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a.displayInfo.level_1;case 2:return n.next=4,a.$refs.apiTable;case 4:return o={remote_system:t||"",page_size:e?e.page_size:10,is_draft:0,page:e?e.page:1,key:i?i.key:"",project_key:a.projectId||"public"},a.$refs.apiTable.isTableLoading=!0,n.next=8,a.$store.dispatch("apiRemote/get_remote_api",o).then((function(t){a.isSelectedApiList=t.data.items.filter((function(t){return!t.is_builtin})).map((function(t){return t.path})),a.listInfo=t.data.items.map((function(t){return t.check=!1,t})),a.$refs.apiTable.pagination.current=t.data.page,a.$refs.apiTable.pagination.count=t.data.count})).catch((function(t){(0,f.errorHandler)(t,a)})).finally((function(){a.$refs.apiTable.isTableLoading=!1}));case 8:case"end":return n.stop()}}),n,a)})))()},getChannelPathList:function(t){var e=this;return(0,o.default)(s.default.mark((function i(){var a;return s.default.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a={system_code:t},i.next=3,e.$store.dispatch("apiRemote/get_components",a).then((function(t){e.pathList=t.data.map((function(t){return t.func_name=t.name,t.name=t.label,t}))})).catch((function(t){(0,f.errorHandler)(t,e)})).finally((function(){}));case 3:case"end":return i.stop()}}),i,e)})))()}}}},eqnP:function(t,e,i){"use strict";i.d(e,"a",(function(){return a})),i.d(e,"b",(function(){return n}));var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"bk-api-run"},[i("div",{staticClass:"bk-basic-item mt20"},[i("div",{staticClass:"bk-service-name"},[i("h1",[i("span",{staticClass:"is-outline"}),t._v(t._s(t.$t('m.systemConfig["配置"]')))])]),t._v(" "),i("div",{staticClass:"bk-basic-content"},[i("api-run-config",{ref:"apiRunConfig",attrs:{"api-detail-info-common":t.apiDetailInfoCommon}})],1)]),t._v(" "),i("div",{staticClass:"bk-basic-item mt20"},[i("div",{staticClass:"bk-service-name"},[i("h1",[i("span",{staticClass:"is-outline"}),t._v(t._s(t.$t('m.systemConfig["请求数据加工"]')))])]),t._v(" "),i("div",{staticClass:"bk-basic-content",staticStyle:{position:"relative"}},[i("ace",{attrs:{value:t.reqDataProcess.value,width:t.dataProcess.width,height:t.dataProcess.height,lang:t.dataProcess.lang,"full-screen":t.dataProcess.fullScreen,theme:"monokai"},on:{blur:t.reqChangBlur}})],1)]),t._v(" "),i("div",{staticClass:"bk-basic-item mt20"},[i("div",{staticClass:"bk-service-name"},[i("h1",[i("span",{staticClass:"is-outline"}),t._v(t._s(t.$t('m.systemConfig["返回数据加工"]')))])]),t._v(" "),i("div",{staticClass:"bk-basic-content",staticStyle:{position:"relative"}},[i("ace",{attrs:{value:t.dataProcess.value,width:t.dataProcess.width,height:t.dataProcess.height,lang:t.dataProcess.lang,"full-screen":t.dataProcess.fullScreen,theme:"monokai"},on:{blur:t.changBlur}})],1)]),t._v(" "),i("div",{staticClass:"bk-basic-item mt20"},[t._m(0),t._v(" "),i("div",{staticClass:"bk-basic-content",staticStyle:{position:"relative"}},[i("div",{attrs:{id:"#editor"}},[i("ace",{attrs:{value:t.alarmDetailConfig.value,width:t.alarmDetailConfig.width,height:t.alarmDetailConfig.height,"read-only":t.alarmDetailConfig.readOnly,lang:t.alarmDetailConfig.lang,"full-screen":t.alarmDetailConfig.fullScreen,theme:"monokai"},on:{init:t.editorInitAfter}})],1)])]),t._v(" "),t.apiDetailInfoCommon.is_builtin?t._e():i("div",{staticClass:"bk-basic-btn"},[i("bk-button",{attrs:{disabled:t.isSuccess,"data-test-id":"apiDetail_button_runUpdateApi",theme:"primary",title:t.$t("m.systemConfig['保存参数']")},on:{click:t.updateApi}},[t._v("\n            "+t._s(t.$t("m.systemConfig['保存参数']"))+"\n        ")])],1)])},n=[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"bk-service-name"},[e("h1",[e("span",{staticClass:"is-outline"}),this._v("Response")])])}];a._withStripped=!0},fCBC:function(t,e,i){"use strict";i("lgQc")},gc60:function(t,e,i){"use strict";i.d(e,"a",(function(){return a})),i.d(e,"b",(function(){return n}));var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"bk-request-body"},[t.treeIndex?t._e():i("ul",{staticClass:"child-node"},[i("li",{staticClass:"vue-tree-item"},[i("div",{class:["tree-node",{down:!0,"set-frist-pLeft":!0,active:!0}]},[i("div",{staticClass:"bk-tree-body-form"},[i("div",{staticClass:"bk-body-content"},[i("div",{staticClass:"bk-content-left-body",staticStyle:{"padding-right":"5px"}},[i("i",{staticClass:"bk-icon",staticStyle:{float:"left",width:"24px",height:"32px","line-height":"32px"}}),t._v(" "),i("div",{staticStyle:{float:"left",width:"calc(100% - 100px)","margin-right":"3px"}},[t._v("\n                                "+t._s(t.$t("m.systemConfig['属性']"))+"\n                            ")]),t._v(" "),i("div",{staticStyle:{float:"left","margin-left":"5px",width:"65px"}},[t._v("\n                                "+t._s(t.$t("m.systemConfig['是否必须']"))+"\n                            ")])]),t._v(" "),i("div",{staticClass:"bk-content-right-body"},[i("div",{staticClass:"bk-value-type"},[t._v("\n                                "+t._s(t.$t("m.systemConfig['类型']"))+"\n                            ")]),t._v(" "),i("div",{staticClass:"bk-desc",class:{"bk-big-desc":!t.isBody}},[t._v("\n                                "+t._s(t.$t("m.systemConfig['备注']"))+"\n                            ")]),t._v(" "),t.isBody?i("div",{staticClass:"bk-value-default"},[t._v("\n                                "+t._s(t.$t("m.systemConfig['默认值']"))+"\n                            ")]):t._e()])])])])])]),t._v(" "),i("ul",{staticClass:"child-node"},t._l(t.treeDataList,(function(e,a){return i("li",{key:a,staticClass:"vue-tree-item"},[i("div",{class:["tree-node",{down:e.showChildren,"set-frist-pLeft":t.treeIndex+1===1,active:e.checkInfo}],on:{click:function(i){return t.toggle(e)}}},[i("div",{staticClass:"bk-tree-body-form"},[i("div",{staticClass:"bk-body-content"},[i("div",{staticClass:"bk-content-left-body",style:t.pLeft},[e.showChildren||"object"!==e.type?"object"===e.type?i("i",{staticClass:"bk-icon icon-down-shape",class:{"bk-padding":!e.has_children},on:{click:function(t){t.stopPropagation(),e.showChildren=!1}}}):i("i",{staticClass:"bk-icon",staticStyle:{float:"left",width:"24px",height:"36px","line-height":"36px"}}):i("i",{staticClass:"bk-icon icon-right-shape",class:{"bk-padding":!e.has_children},on:{click:function(t){t.stopPropagation(),e.showChildren=!0}}}),t._v(" "),i("div",{staticClass:"bk-body-input"},[i("bk-input",{attrs:{clearable:!1,disabled:!e.parentInfo&&"root"===e.key||"array"===e.parentInfo.type||t.isBuiltin,placeholder:t.$t("m.systemConfig['请输入']")},model:{value:e.key,callback:function(i){t.$set(e,"key",i)},expression:"item.key"}})],1),t._v(" "),i("div",{staticClass:"bk-body-check"},[i("bk-checkbox",{attrs:{disabled:!e.parentInfo&&"root"===e.key||"array"===e.parentInfo.type||t.isBuiltin,"true-value":t.trueStatus,"false-value":t.falseStatus},model:{value:e.is_necessary,callback:function(i){t.$set(e,"is_necessary",i)},expression:"item.is_necessary"}})],1)]),t._v(" "),i("div",{staticClass:"bk-content-right-body"},[i("div",{staticClass:"bk-value-type"},[i("bk-select",{attrs:{clearable:!1,"font-size":"medium",disabled:!e.parentInfo&&"root"===e.key||t.isBuiltin},on:{selected:function(i){return t.changeType(e)}},model:{value:e.type,callback:function(i){t.$set(e,"type",i)},expression:"item.type"}},t._l(t.treeTypeList,(function(t){return i("bk-option",{key:t.id,attrs:{id:t.id,name:t.name}})})),1)],1),t._v(" "),i("div",{staticClass:"bk-desc",class:{"bk-big-desc":!t.isBody}},[i("bk-input",{attrs:{clearable:!1,disabled:!e.parentInfo&&"root"===e.key||t.isBuiltin,placeholder:t.$t("m.systemConfig['备注']")},model:{value:e.desc,callback:function(i){t.$set(e,"desc",i)},expression:"item.desc"}})],1),t._v(" "),t.isBody?i("div",{staticClass:"bk-value-default"},["boolean"===e.type?[i("bk-radio-group",{model:{value:e.default,callback:function(i){t.$set(e,"default",i)},expression:"item.default"}},[i("bk-radio",{staticClass:"mr10",attrs:{value:t.trueStatus}},[t._v("true")]),t._v(" "),i("bk-radio",{attrs:{value:t.falseStatus}},[t._v("false")])],1)]:[i("bk-input",{attrs:{type:"INT"===e.type?"number":"text",placeholder:t.$t("m.systemConfig['请输入默认值']"),disabled:"string"!==e.type&&"number"!==e.type&&"boolean"!==e.type},model:{value:e.default,callback:function(i){t.$set(e,"default",i)},expression:"item.default"}})]],2):t._e()])]),t._v(" "),t.isBuiltin?t._e():i("div",{staticClass:"bk-design-add"},[i("span",{staticClass:"bk-add-node"},[i("i",{staticClass:"bk-itsm-icon icon-flow-add"}),t._v(" "),"object"===e.parentInfo.type||"object"===e.type?i("div",{staticClass:"bk-add-other"},[i("ul",[e.parentInfo&&"object"===e.parentInfo.type?i("li",{attrs:{"data-test-id":"apiDetail_li_addBortherNode",title:t.$t("m.systemConfig['兄弟节点']")},on:{click:function(i){return i.stopPropagation(),t.addBrotherLine(e)}}},[i("span",[t._v(t._s(t.$t('m.systemConfig["兄弟节点"]')))])]):t._e(),t._v(" "),"object"!==e.type&&("array"!==e.type||e.children&&e.children.length)?t._e():i("li",{attrs:{"data-test-id":"apiDetail_li_deleteBortherNode",title:t.$t("m.systemConfig['子节点']")},on:{click:function(i){return i.stopPropagation(),t.addChildLine(e)}}},[i("span",[t._v(t._s(t.$t('m.systemConfig["子节点"]')))])])])]):t._e()]),t._v(" "),"object"===e.parentInfo.type?i("span",{staticClass:"bk-reduce-node",on:{click:function(i){return i.stopPropagation(),t.deleteLine(e)}}},[i("i",{staticClass:"bk-itsm-icon icon-flow-reduce"})]):t._e()])])]),t._v(" "),i("collapse-transition",[e.children&&e.showChildren?[i("exportTree",{attrs:{"is-body":t.isBody,"is-builtin":t.isBuiltin,"tree-data-list":e.children,"tree-index":t.treeIndex+1},on:{selectItem:t.selectItem,toggle:t.toggle,toggleChildren:t.toggleChildren,addBrotherLine:t.addBrotherLine,addChildLine:t.addChildLine,deleteLine:t.deleteLine}})]:t._e()],2)],1)})),0)])},n=[];a._withStripped=!0},"i/3U":function(t,e,i){"use strict";i.d(e,"a",(function(){return a})),i.d(e,"b",(function(){return n}));var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"bk-api-basic"},[i("div",{staticClass:"bk-basic-item mt20"},[i("div",{staticClass:"bk-service-name"},[i("h1",[i("span",{staticClass:"is-outline"}),t._v(t._s(t.$t('m.systemConfig["基本信息"]')))])]),t._v(" "),i("ul",{staticClass:"bk-basic-form"},[i("li",[i("span",{staticClass:"bk-info-title"},[t._v(t._s(t.$t('m.systemConfig["接口名称："]')))]),t._v(" "),i("span",{staticClass:"bk-info-content"},[t._v(t._s(t.apiDetailInfo.name||"--"))])]),t._v(" "),i("li",[i("span",{staticClass:"bk-info-title"},[t._v(t._s(t.$t('m.systemConfig["创 建 人："]')))]),t._v(" "),i("span",{staticClass:"bk-info-content"},[t._v(t._s(t.apiDetailInfo.creator||"--"))])]),t._v(" "),i("li",[i("span",{staticClass:"bk-info-title"},[t._v(t._s(t.$t('m.user["负 责 人："]')))]),t._v(" "),i("span",{staticClass:"bk-info-content"},[t._v(t._s(t.apiDetailInfo.owners||"--"))])]),t._v(" "),i("li",[i("span",{staticClass:"bk-info-title"},[t._v(t._s(t.$t('m.systemConfig["状  态："]')))]),t._v(" "),i("span",{staticClass:"bk-info-content"},[t._v(t._s(t.apiDetailInfo.is_activated?t.$t('m.systemConfig["启用"]'):t.$t('m.systemConfig["关闭"]')))])]),t._v(" "),i("li",[i("span",{staticClass:"bk-info-title"},[t._v(t._s(t.$t('m.systemConfig["更新时间："]')))]),t._v(" "),i("span",{staticClass:"bk-info-content"},[t._v(t._s(t.apiDetailInfo.create_at))])]),t._v(" "),i("li",[i("span",{staticClass:"bk-info-title"},[t._v(t._s(t.$t('m.systemConfig["接口路径："]')))]),t._v(" "),i("span",{staticClass:"bk-info-content"},[t._v(t._s(t.apiDetailInfo.path))])]),t._v(" "),i("li",[i("span",{staticClass:"bk-info-title"},[t._v(t._s(t.$t('m.systemConfig["备  注："]')))]),t._v(" "),i("span",{staticClass:"bk-info-content"},[t._v(t._s(t.apiDetailInfo.desc))])])])]),t._v(" "),i("div",{staticClass:"bk-basic-item",staticStyle:{padding:"0"}},[i("div",{staticClass:"bk-service-name"},[i("h1",[i("span",{staticClass:"is-outline"}),t._v(t._s(t.$t('m.systemConfig["请求参数"]')))])]),t._v(" "),i("div",{staticClass:"bk-basic-content"},[i("p",{staticClass:"bk-basic-p"},[t._v("Query：")]),t._v(" "),i("bk-table",{attrs:{data:t.apiDetailInfo.req_params,size:"small"}},[i("bk-table-column",{attrs:{label:t.$t("m.systemConfig['参数名称']"),prop:"name"}}),t._v(" "),i("bk-table-column",{attrs:{label:t.$t("m.systemConfig['必选']")},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.is_necessary?t.$t('m.systemConfig["是"]'):t.$t('m.systemConfig["否"]')))])]}}])}),t._v(" "),i("bk-table-column",{attrs:{label:t.$t("m.systemConfig['示例']")},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",{attrs:{title:e.row.sample}},[t._v(t._s(e.row.sample||"--"))])]}}])}),t._v(" "),i("bk-table-column",{attrs:{label:t.$t("m.systemConfig['备注']")},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",{attrs:{title:e.row.desc}},[t._v(t._s(e.row.desc||"--"))])]}}])})],1)],1),t._v(" "),i("div",{staticClass:"bk-basic-content"},[i("p",{staticClass:"bk-basic-p"},[t._v("Body：")]),t._v(" "),i("bk-table",{attrs:{data:t.bodyTableData,size:"small"}},[i("bk-table-column",{attrs:{label:t.$t("m.systemConfig['名称']")},scopedSlots:t._u([{key:"default",fn:function(e){return[i("div",{staticClass:"bk-more"},[i("span",{style:{paddingLeft:20*e.row.level+"px"}}),t._v(" "),e.row.has_children&&!e.row.showChildren?i("span",{staticClass:"bk-icon tree-expanded-icon icon-right-shape"}):e.row.has_children&&e.row.showChildren?i("span",{staticClass:"bk-icon tree-expanded-icon icon-down-shape"}):i("span",{staticClass:"bk-icon bk-more-icon"}),t._v(" "),i("span",[t._v(t._s(e.row.key||"--"))])])]}}])}),t._v(" "),i("bk-table-column",{attrs:{label:t.$t("m.systemConfig['类型']"),prop:"type"}}),t._v(" "),i("bk-table-column",{attrs:{label:t.$t("m.systemConfig['必选']")},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.is_necessary?t.$t('m.systemConfig["是"]'):t.$t('m.systemConfig["否"]')))])]}}])}),t._v(" "),i("bk-table-column",{attrs:{label:t.$t("m.systemConfig['备注']")},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",{attrs:{title:e.row.desc}},[t._v(t._s(e.row.desc||"--"))])]}}])})],1)],1)]),t._v(" "),i("div",{staticClass:"bk-basic-item",staticStyle:{padding:"0"}},[i("div",{staticClass:"bk-service-name"},[i("h1",[i("span",{staticClass:"is-outline"}),t._v(t._s(t.$t('m.systemConfig["返回数据"]')))])]),t._v(" "),i("div",{staticClass:"bk-basic-content"},[i("bk-table",{attrs:{data:t.responseTableData,size:"small"}},[i("bk-table-column",{attrs:{label:t.$t("m.systemConfig['名称']")},scopedSlots:t._u([{key:"default",fn:function(e){return[i("div",{staticClass:"bk-more"},[i("span",{style:{paddingLeft:20*e.row.level+"px"}}),t._v(" "),e.row.has_children&&!e.row.showChildren?i("span",{staticClass:"bk-icon tree-expanded-icon icon-right-shape"}):e.row.has_children&&e.row.showChildren?i("span",{staticClass:"bk-icon tree-expanded-icon icon-down-shape"}):i("span",{staticClass:"bk-icon bk-more-icon"}),t._v(" "),i("span",[t._v(t._s(e.row.key||"--"))])])]}}])}),t._v(" "),i("bk-table-column",{attrs:{label:t.$t("m.systemConfig['类型']"),prop:"type"}}),t._v(" "),i("bk-table-column",{attrs:{label:t.$t("m.systemConfig['必选']")},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.is_necessary?t.$t('m.systemConfig["是"]'):t.$t('m.systemConfig["否"]')))])]}}])}),t._v(" "),i("bk-table-column",{attrs:{label:t.$t("m.systemConfig['备注']")},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",{attrs:{title:e.row.desc}},[t._v(t._s(e.row.desc||"--"))])]}}])})],1)],1)])])},n=[];a._withStripped=!0},iUxc:function(t,e,i){"use strict";i.d(e,"a",(function(){return a})),i.d(e,"b",(function(){return n}));var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"bk-api-content"},[i("div",{staticClass:"is-title-back"},[i("p",{staticClass:"bk-come-back",on:{click:t.backTab}},[i("arrows-left-icon"),t._v(" "),[t._v(t._s(t.backName))]],2)]),t._v(" "),i("div",{staticClass:"itsm-page-content"},[i("div",{staticClass:"bk-api-ul"},[i("ul",t._l(t.titleList,(function(e,a){return i("li",{key:a,class:{"bk-api-check":t.checkIndex===a},on:{click:function(i){return t.changTitle(e,a)}}},[i("span",[t._v(t._s(e.name))])])})),0)]),t._v(" "),i("div",{staticClass:"bk-api-info"},[0===t.checkIndex?i("api-basic",{attrs:{"api-detail-info":t.apiDetailInfo}}):t._e(),t._v(" "),1===t.checkIndex?i("api-editor",{attrs:{"api-detail-info-common":t.apiDetailInfoCommon,"tree-list":t.treeList,"path-list":t.pathList,"is-builtin-id-list":t.isBuiltinIdList}}):t._e(),t._v(" "),2===t.checkIndex?i("api-run",{attrs:{"api-detail-info-common":t.apiDetailInfoCommon}}):t._e()],1)])])},n=[];a._withStripped=!0},ipzc:function(t,e,i){"use strict";i.r(e);var a=i("gc60"),n=i("I5xc");for(var s in n)["default"].indexOf(s)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(s);i("u1YY");var o=i("KHd+"),r=Object(o.a)(n.default,a.a,a.b,!1,null,"94985c78",null);r.options.__file="src/views/processManagement/apiConfigure/components/apiRequestBody.vue",e.default=r.exports},k0J1:function(t,e,i){"use strict";i.r(e);var a=i("ClNz"),n=i("KF+D");for(var s in n)["default"].indexOf(s)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(s);i("Fgut");var o=i("KHd+"),r=Object(o.a)(n.default,a.a,a.b,!1,null,"10cfef2c",null);r.options.__file="src/views/processManagement/apiConfigure/apiTree.vue",e.default=r.exports},kQRz:function(t,e,i){"use strict";i("vw8V")},lgQc:function(t,e,i){},nAuZ:function(t,e,i){"use strict";i.r(e);var a=i("cHKx"),n=i.n(a);for(var s in a)["default"].indexOf(s)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(s);e.default=n.a},nAxG:function(t,e,i){"use strict";i.r(e);var a=i("iUxc"),n=i("uGUc");for(var s in n)["default"].indexOf(s)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(s);i("fCBC");var o=i("KHd+"),r=Object(o.a)(n.default,a.a,a.b,!1,null,"51c1aedb",null);r.options.__file="src/views/processManagement/apiConfigure/apiContent.vue",e.default=r.exports},nqJ4:function(t,e,i){"use strict";i.d(e,"a",(function(){return a})),i.d(e,"b",(function(){return n}));var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"bk-add-api"},[i("bk-form",{ref:"addApiForm",attrs:{"data-test-id":"api_form_ApiInfo","label-width":200,"form-type":"vertical",model:t.directory.formInfo,rules:t.rules}},[i("bk-form-item",{attrs:{label:t.$t("m.systemConfig['接口分类']"),required:!0,property:"key"}},[i("bk-select",{attrs:{disabled:!t.isAll&&!!t.directory.formInfo.key,clearable:!1,searchable:""},on:{selected:t.changeCode},model:{value:t.directory.formInfo.key,callback:function(e){t.$set(t.directory.formInfo,"key",e)},expression:"directory.formInfo.key"}},t._l(t.treeList.slice(1),(function(t){return i("bk-option",{key:t.id,attrs:{id:t.id,name:t.name}})})),1)],1),t._v(" "),"JOIN"===t.typeInfo?[i("bk-form-item",{attrs:{label:t.$t("m.systemConfig['选择接口']"),required:!0,property:"road"}},[i("bk-select",{attrs:{disabled:!t.directory.formInfo.key,clearable:!1,searchable:""},on:{selected:t.changeMethod},model:{value:t.directory.formInfo.road,callback:function(e){t.$set(t.directory.formInfo,"road",e)},expression:"directory.formInfo.road"}},t._l(t.pathList,(function(t){return i("bk-option",{key:t.path,attrs:{id:t.path,name:t.name}})})),1)],1)]:t._e(),t._v(" "),i("bk-form-item",{attrs:{label:t.$t("m.systemConfig['接口名称']"),required:!0,property:"name"}},[i("bk-input",{attrs:{maxlength:"120",placeholder:t.$t("m.systemConfig['请输入接口名称']")},model:{value:t.directory.formInfo.name,callback:function(e){t.$set(t.directory.formInfo,"name",e)},expression:"directory.formInfo.name"}})],1),t._v(" "),i("bk-form-item",{attrs:{label:t.$t("m.systemConfig['负责人：']")}},[i("member-select",{model:{value:t.directory.formInfo.ownersInputValue,callback:function(e){t.$set(t.directory.formInfo,"ownersInputValue",e)},expression:"directory.formInfo.ownersInputValue"}})],1),t._v(" "),i("bk-form-item",{attrs:{label:t.$t("m.systemConfig['函数名称']")}},[i("bk-input",{attrs:{placeholder:t.$t("m.systemConfig['请输入函数名称']")},model:{value:t.directory.formInfo.func_name,callback:function(e){t.$set(t.directory.formInfo,"func_name",e)},expression:"directory.formInfo.func_name"}})],1),t._v(" "),i("bk-form-item",{attrs:{label:t.$t("m.systemConfig['接口路径']")}},[i("bk-input",{attrs:{placeholder:"please input path",disabled:("component"===t.directory.formInfo.category||"buffet_component"===t.directory.formInfo.category)&&"ADD"!==t.typeInfo},model:{value:t.directory.formInfo.road,callback:function(e){t.$set(t.directory.formInfo,"road",e)},expression:"directory.formInfo.road"}},[i("template",{slot:"prepend"},[i("bk-dropdown-menu",{ref:"requestwayDrop",staticClass:"group-text",attrs:{slot:"append","font-size":"normal"},on:{show:t.dropdownShow,hide:t.dropdownHide},slot:"append"},[i("bk-button",{attrs:{slot:"dropdown-trigger",type:"primary"},slot:"dropdown-trigger"},[i("span",[t._v(" "+t._s(t.directory.formInfo.type)+" ")]),t._v(" "),i("i",{class:["bk-icon icon-angle-down",{"icon-flip":t.isDropdownShow}]})]),t._v(" "),i("ul",{staticClass:"bk-dropdown-list",attrs:{slot:"dropdown-content"},slot:"dropdown-content"},t._l(t.typeList,(function(e,a){return i("li",{key:a},[i("a",{attrs:{href:"javascript:;"},on:{click:function(i){return t.requestHandler(e,a)}}},[t._v("\n                                    "+t._s(e.name)+"\n                                ")])])})),0)],1)],1)],2)],1),t._v(" "),i("bk-form-item",{attrs:{label:t.$t("m.systemConfig['版本号']")}},[i("bk-input",{attrs:{placeholder:t.$t("m.systemConfig['请输入版本号']")},model:{value:t.directory.formInfo.version,callback:function(e){t.$set(t.directory.formInfo,"version",e)},expression:"directory.formInfo.version"}})],1),t._v(" "),i("bk-form-item",{attrs:{label:t.$t("m.systemConfig['API描述']")}},[i("bk-input",{attrs:{placeholder:t.$t("m.systemConfig['请输入API描述']"),type:"textarea",rows:3},model:{value:t.directory.formInfo.desc,callback:function(e){t.$set(t.directory.formInfo,"desc",e)},expression:"directory.formInfo.desc"}})],1)],2),t._v(" "),i("p",{staticClass:"bk-form-message"},[t._v("\n        "+t._s(t.$t('m.systemConfig["注：详细的接口数据可以在编辑页面中添加"]'))+"\n    ")]),t._v(" "),i("div",{staticClass:"mb20"},[i("bk-button",{staticClass:"mr10",attrs:{theme:"primary","data-test-id":"api_button_AccessApi_createApi",title:t.$t("m.systemConfig['确认']"),loading:t.secondClick},on:{click:t.submitAdd}},[t._v("\n            "+t._s(t.$t('m.systemConfig["确认"]'))+"\n        ")]),t._v(" "),i("bk-button",{attrs:{theme:"default","data-test-id":"api_button_closeSideslider",title:t.$t("m.systemConfig['取消']"),disabled:t.secondClick},on:{click:t.closeAdd}},[t._v("\n            "+t._s(t.$t('m.systemConfig["取消"]'))+"\n        ")])],1)],1)},n=[];a._withStripped=!0},ntV2:function(t,e,i){"use strict";i.r(e);var a=i("Lazy"),n=i("4ATZ");for(var s in n)["default"].indexOf(s)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(s);i("Aeh4"),i("DxGc");var o=i("KHd+"),r=Object(o.a)(n.default,a.a,a.b,!1,null,"2c678526",null);r.options.__file="src/views/processManagement/apiConfigure/index.vue",e.default=r.exports},o6S2:function(t,e,i){},ogKq:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=l(i("gDS+")),n=l(i("14Xm")),s=l(i("D3Ub")),o=i("CeR/"),r=l(i("zP2a")),c=l(i("VflG"));function l(t){return t&&t.__esModule?t:{default:t}}e.default={components:{ace:r.default},mixins:[c.default],props:{apiDetailInfoCommon:{type:Object,default:function(){return{}}}},data:function(){return{trueStatus:!0,falseStatus:!1,bodyDetailConfig:{value:"",width:"100%",height:300,readOnly:!1,fullScreen:!0,lang:"json"},DetailInfo:this.apiDetailInfoCommon,formInfo:{code:"POST",poc:"poc：https://paas-poc.o.qcloud.com",url:"/api/user/create"},showInfo:{headers:!1,query:!1,body:!1},headersList:[{key:"id",value:""}],queryList:[{key:"",is_necessary:!1,value:""}],bodyValue:"1415",secondClick:!1,activeName:[]}},mounted:function(){var t=this;return(0,s.default)(n.default.mark((function e(){return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.apiDetailInfoCommon;case 2:return e.next=4,t.DetailInfo;case 4:t.initDate();case 5:case"end":return e.stop()}}),e,t)})))()},methods:{initDate:function(){this.DetailInfo.bodyJsonData&&(this.bodyDetailConfig.value=(0,a.default)(this.DetailInfo.bodyJsonData.root,null,4)),this.DetailInfo.req_params&&this.DetailInfo.req_params.length&&this.DetailInfo.req_params.forEach((function(t){t.is_necessary=!!t.is_necessary}))},showConten:function(t){this.showInfo[t]=!this.showInfo[t]},testUrl:function(){var t=this;return(0,s.default)(n.default.mark((function e(){var i;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.showInfo={headers:!1,query:!1,body:!1},!t.secondClick){e.next=3;break}return e.abrupt("return");case 3:return i={id:t.DetailInfo.id,req_headers:t.listTojson(t.DetailInfo.req_headers.filter((function(t){return!!t.name}))),req_params:t.listTojson(t.DetailInfo.req_params.filter((function(t){return!!t.name}))),req_body:JSON.parse(t.bodyDetailConfig.value),sys_headers:{},cookies:{},variables:{},map_code:t.$parent.dataProcess.value,before_req:t.$parent.reqDataProcess.value},t.secondClick=!0,e.next=7,t.$store.dispatch("apiRemote/run_remote_api",i).then((function(e){t.$parent.alarmDetailConfig.value=(0,a.default)(e.data,null,4),e.data.result&&(t.$parent.isSuccess=!1)})).catch((function(e){(0,o.errorHandler)(e,t)})).finally((function(){t.secondClick=!1}));case 7:case"end":return e.stop()}}),e,t)})))()},blur:function(t,e,i){try{this.bodyDetailConfig.value=(0,a.default)(JSON.parse(t),null,4)}catch(t){return}try{JSON.parse(this.bodyDetailConfig.value)}catch(t){return}this.apiDetailInfoCommon.bodyJsonschemaData=this.jsonToJsonschema(JSON.parse(this.bodyDetailConfig.value))},listTojson:function(t){var e={};return t.length&&t.forEach((function(t){e[t.name]=t.value})),e}}}},ok0E:function(t,e,i){"use strict";i.r(e);var a=i("6uDm"),n=i.n(a);for(var s in a)["default"].indexOf(s)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(s);e.default=n.a},osOl:function(t,e,i){},qWeF:function(t,e,i){},s9LS:function(t,e,i){},sREQ:function(t,e,i){"use strict";i.d(e,"a",(function(){return a})),i.d(e,"b",(function(){return n}));var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"bk-api-editor-basic"},[i("bk-form",{attrs:{"label-width":120,model:t.basicInfo}},[i("bk-form-item",{staticClass:"bk-editor-form",attrs:{required:!0,label:t.$t("m.systemConfig['接口名称：']")}},[i("bk-input",{attrs:{disabled:t.basicInfo.is_builtin,placeholder:t.$t("m.systemConfig['请输入接口名称']")},model:{value:t.basicInfo.name,callback:function(e){t.$set(t.basicInfo,"name",e)},expression:"basicInfo.name"}})],1),t._v(" "),t.basicInfo.hasOwnProperty("method")?[i("bk-form-item",{staticClass:"bk-editor-form",attrs:{required:!0,label:t.$t("m.systemConfig['接口路径：']")}},[i("bk-input",{attrs:{placeholder:"/path",disabled:t.basicInfo.is_builtin},model:{value:t.basicInfo.path,callback:function(e){t.$set(t.basicInfo,"path",e)},expression:"basicInfo.path"}},[i("template",{slot:"prepend"},[i("bk-dropdown-menu",{ref:"requestwayDrop",staticClass:"group-text",attrs:{slot:"append","font-size":"normal",disabled:t.basicInfo.is_builtin},on:{show:t.dropdownShow,hide:t.dropdownHide},slot:"append"},[i("bk-button",{attrs:{slot:"dropdown-trigger",type:"primary"},slot:"dropdown-trigger"},[i("span",[t._v(" "+t._s(t.basicInfo.method)+" ")]),t._v(" "),i("i",{class:["bk-icon icon-angle-down",{"icon-flip":t.isDropdownShow}]})]),t._v(" "),i("ul",{staticClass:"bk-dropdown-list",attrs:{slot:"dropdown-content"},slot:"dropdown-content"},t._l(t.typeList,(function(e,a){return i("li",{key:a},[i("a",{attrs:{href:"javascript:;"},on:{click:function(i){return t.requestHandler(e,a)}}},[t._v("\n                                        "+t._s(e.name)+"\n                                    ")])])})),0)],1)],1)],2)],1)]:t._e(),t._v(" "),i("bk-form-item",{staticClass:"bk-editor-form",attrs:{label:t.$t("m.user['负责人：']")}},[i("member-select",{model:{value:t.basicInfo.ownersInputValue,callback:function(e){t.$set(t.basicInfo,"ownersInputValue",e)},expression:"basicInfo.ownersInputValue"}})],1),t._v(" "),i("bk-form-item",{staticClass:"bk-editor-form",attrs:{label:t.$t("m.systemConfig['备注：']")}},[i("bk-input",{attrs:{disabled:t.basicInfo.is_builtin,placeholder:t.$t("m.systemConfig['请输入描述']"),type:"textarea",rows:3},model:{value:t.basicInfo.desc,callback:function(e){t.$set(t.basicInfo,"desc",e)},expression:"basicInfo.desc"}})],1)],2)],1)},n=[];a._withStripped=!0},tMUw:function(t,e,i){},u1YY:function(t,e,i){"use strict";i("s9LS")},uGUc:function(t,e,i){"use strict";i.r(e);var a=i("EOYy"),n=i.n(a);for(var s in a)["default"].indexOf(s)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(s);e.default=n.a},ufwX:function(t,e,i){"use strict";i.d(e,"a",(function(){return a})),i.d(e,"b",(function(){return n}));var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"bk-api-table"},[i("div",{staticClass:"bk-api-button mb20"},[i("p",{staticClass:"bk-api-title"},[t._v(t._s(t.$t('m.systemConfig["API列表"]')))]),t._v(" "),i("div",{staticClass:"bk-api-button"},[i("bk-dropdown-menu",{ref:"apiDropdown",staticClass:"mr10 access-btn",on:{show:t.dropdownShow,hide:t.dropdownHide}},[i("div",{staticClass:"dropdown-trigger-btn",staticStyle:{"padding-left":"19px"},attrs:{slot:"dropdown-trigger"},slot:"dropdown-trigger"},[i("span",{staticStyle:{"font-size":"14px"}},[t._v(t._s(t.$t("m.systemConfig['接入']")))]),t._v(" "),i("i",{class:["bk-icon icon-angle-down",{"icon-flip":t.isDropdownShow}]})]),t._v(" "),i("ul",{staticClass:"bk-dropdown-list",attrs:{slot:"dropdown-content"},slot:"dropdown-content"},[i("li",[i("a",{directives:[{name:"cursor",rawName:"v-cursor",value:{active:!t.projectId&&!t.hasPermission(["public_api_create"])},expression:"{ active: !projectId && !hasPermission(['public_api_create']) }"}],class:{"text-permission-disable":!t.projectId&&!t.hasPermission(["public_api_create"])},attrs:{href:"javascript:;",title:t.$t("m.systemConfig['接入']"),"data-test-id":"api_a_apiTableAccessApi"},on:{click:function(e){return t.openShade("JOIN")}}},[t._v("\n                            "+t._s(t.$t("m.systemConfig['接入']"))+"\n                        ")])]),t._v(" "),i("li",[i("a",{directives:[{name:"cursor",rawName:"v-cursor",value:{active:!t.projectId&&!t.hasPermission(["public_api_create"])},expression:"{ active: !projectId && !hasPermission(['public_api_create']) }"}],class:{"text-permission-disable":!t.projectId&&!t.hasPermission(["public_api_create"])},attrs:{href:"javascript:;","data-test-id":"api_a_apiTableCreateApi",title:t.$t("m.systemConfig['新增']")},on:{click:function(e){return t.openShade("ADD")}}},[t._v("\n                            "+t._s(t.$t("m.systemConfig['新增']"))+"\n                        ")])])])]),t._v(" "),i("bk-button",{directives:[{name:"cursor",rawName:"v-cursor",value:{active:!t.projectId&&!t.hasPermission(["public_api_create"])},expression:"{ active: !projectId && !hasPermission(['public_api_create']) }"}],staticClass:"mr10 bk-btn-file",class:{"btn-permission-disable":!t.projectId&&!t.hasPermission(["public_api_create"])},attrs:{theme:"default","data-test-id":"api_button_apiTableuploadApi",title:t.$t("m.systemConfig['点击上传']")}},[i("input",{staticClass:"bk-input-file",attrs:{type:t.projectId||t.hasPermission(["public_api_create"])?"file":"button"},domProps:{value:t.fileVal},on:{change:t.handleFile,click:t.hasImportPermission}}),t._v("\n                "+t._s(t.$t("m.systemConfig['导入']"))+"\n            ")]),t._v(" "),i("bk-button",{staticClass:"mr10 batch-remove-btn",attrs:{theme:"default","data-test-id":"api_button_apiTableBatchDeleteApi",title:t.$t("m.systemConfig['批量移除']"),disabled:!t.checkList.length},on:{click:t.deleteCheck}},[t._v("\n                "+t._s(t.$t("m.systemConfig['批量移除']"))+"\n            ")]),t._v(" "),i("bk-input",{staticClass:"bk-api-input",attrs:{"data-test-id":"api_input_apiTableKeyword",placeholder:t.$t("m.systemConfig['请输入关键字']"),"right-icon":"bk-icon icon-search",clearable:!0},on:{clear:t.clearInfo,enter:t.serchEntry},model:{value:t.searchInfo.key,callback:function(e){t.$set(t.searchInfo,"key",e)},expression:"searchInfo.key"}})],1)]),t._v(" "),i("bk-table",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:t.isTableLoading},expression:"{ isLoading: isTableLoading }"}],attrs:{data:t.listInfo,size:"small",pagination:t.pagination},on:{"page-change":t.handlePageChange,"page-limit-change":t.handlePageLimitChange,"select-all":t.handleSelectAll,select:t.handleSelect}},[i("bk-table-column",{attrs:{type:"selection",width:"60",align:"center",selectable:t.disabledFn}}),t._v(" "),i("bk-table-column",{attrs:{label:t.$t("m.common['ID']"),"min-width":"60"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",{attrs:{title:e.row.id}},[t._v(t._s(e.row.id||"--"))])]}}])}),t._v(" "),i("bk-table-column",{attrs:{label:t.$t("m.systemConfig['接口名称']"),"min-width":"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",{directives:[{name:"cursor",rawName:"v-cursor",value:{active:!t.projectId&&!t.hasPermission(["public_api_manage"],e.row.auth_actions)},expression:"{ active: !projectId && !hasPermission(['public_api_manage'], props.row.auth_actions) }"}],staticClass:"bk-lable-primary",class:{"text-permission-disable":!t.projectId&&!t.hasPermission(["public_api_manage"],e.row.auth_actions)},attrs:{"data-test-id":"api_span_apiTableViewDetail",title:e.row.name},on:{click:function(i){return t.entryOne(e.row)}}},[t._v("\n                    "+t._s(e.row.name||"--")+"\n                ")])]}}])}),t._v(" "),i("bk-table-column",{attrs:{label:t.$t("m.systemConfig['接口路径']"),"min-width":"250"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",{staticClass:"bk-table-type"},[t._v(t._s(e.row.method))]),t._v(" "),i("span",{attrs:{title:e.row.path}},[t._v(t._s(e.row.path||"--"))])]}}])}),t._v(" "),i("bk-table-column",{attrs:{label:t.$t("m.systemConfig['接口分类']"),"min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",{attrs:{title:t.systemName(e.row.remote_system)}},[t._v("\n                    "+t._s(t.systemName(e.row.remote_system)||"--")+"\n                ")])]}}])}),t._v(" "),i("bk-table-column",{attrs:{label:t.$t("m.systemConfig['状态']"),"min-width":"60"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",{attrs:{title:e.row.is_activated?t.$t("m.systemConfig['启用']"):t.$t("m.systemConfig['关闭']")}},[t._v("\n                    "+t._s(e.row.is_activated?t.$t("m.systemConfig['启用']"):t.$t("m.systemConfig['关闭']"))+"\n                ")])]}}])}),t._v(" "),i("bk-table-column",{attrs:{label:t.$t("m.common['负责人']")},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",{attrs:{title:e.row.owners}},[t._v(t._s(e.row.owners||"--"))])]}}])}),t._v(" "),i("bk-table-column",{attrs:{label:t.$t("m.common['创建人']")},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",{attrs:{title:e.row.creator}},[t._v(t._s(e.row.creator||"--"))])]}}])}),t._v(" "),i("bk-table-column",{attrs:{label:t.$t("m.systemConfig['接入数']"),prop:"count",width:"80"}}),t._v(" "),i("bk-table-column",{attrs:{label:t.$t("m.systemConfig['操作']"),width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("bk-button",{attrs:{theme:"primary",text:"","data-test-id":"api_button_apiTableExportApi",title:t.$t("m.systemConfig['导出']"),disabled:e.row.is_builtin},on:{click:function(i){return t.exportFlow(e.row)}}},[t._v("\n                    "+t._s(t.$t('m.systemConfig["导出"]'))+"\n                ")]),t._v(" "),i("bk-button",{directives:[{name:"cursor",rawName:"v-cursor",value:{active:!t.projectId&&!t.hasPermission(["public_api_manage"],e.row.auth_actions)},expression:"{ active: !projectId && !hasPermission(['public_api_manage'], props.row.auth_actions) }"}],class:{"text-permission-disable":!t.projectId&&!t.hasPermission(["public_api_manage"],e.row.auth_actions)},attrs:{theme:"primary",text:"","data-test-id":"api_button_apiTableEditApi",title:t.$t("m.systemConfig['编辑']"),disabled:(t.projectId||t.hasPermission(["public_api_manage"],e.row.auth_actions))&&(e.row.is_builtin||!!e.row.count)},on:{click:function(i){return t.entryOne(e.row)}}},[t._v("\n                    "+t._s(t.$t('m.systemConfig["编辑"]'))+"\n                ")]),t._v(" "),i("bk-button",{directives:[{name:"cursor",rawName:"v-cursor",value:{active:!t.projectId&&!t.hasPermission(["public_api_manage"],e.row.auth_actions)},expression:"{ active: !projectId && !hasPermission(['public_api_manage'], props.row.auth_actions) }"}],class:{"text-permission-disable":!t.projectId&&!t.hasPermission(["public_api_manage"],e.row.auth_actions)},attrs:{theme:"primary",text:"","data-test-id":"api_button_apiTableDeleteApi",title:t.$t("m.systemConfig['移除']"),disabled:e.row.is_builtin},on:{click:function(i){return t.openDelete(e.row)}}},[t._v("\n                    "+t._s(t.$t('m.systemConfig["移除"]'))+"\n                ")])]}}])})],1),t._v(" "),i("bk-sideslider",{attrs:{"is-show":t.entryInfo.show,title:t.entryInfo.title,width:t.entryInfo.width},on:{"update:isShow":function(e){return t.$set(t.entryInfo,"show",e)},"update:is-show":function(e){return t.$set(t.entryInfo,"show",e)}}},[t.entryInfo.show?i("div",{staticStyle:{padding:"20px"},attrs:{slot:"content"},slot:"content"},[i("add-api-info",{attrs:{"first-level-info":t.firstLevelInfo,"path-list":t.pathList,"tree-list":t.treeList,"type-info":t.typeInfo}})],1):t._e()])],1)},n=[];a._withStripped=!0},v8ba:function(t,e,i){"use strict";i.d(e,"a",(function(){return a})),i.d(e,"b",(function(){return n}));var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"bk-api-editor-request"},["GET"===t.basicInfo.method?i("p",{staticClass:"bk-basic-p"},[t._v("Query：")]):t._e(),t._v(" "),"POST"===t.basicInfo.method?i("p",{staticClass:"bk-basic-p"},[t._v("Body：")]):t._e(),t._v(" "),"GET"===t.basicInfo.method?i("ul",{staticClass:"bk-request-ul"},[t.basicInfo.req_params&&t.basicInfo.req_params.length?t._l(t.basicInfo.req_params,(function(e,a){return i("li",{key:a},[i("div",{staticClass:"bk-request-form"},[i("div",{staticClass:"bk-ul-form"},[i("bk-input",{attrs:{clearable:!0,disabled:t.basicInfo.is_builtin,placeholder:t.$t("m.systemConfig['参数名称']")},model:{value:e.name,callback:function(i){t.$set(e,"name",i)},expression:"item.name"}})],1),t._v(" "),i("div",{staticClass:"bk-ul-form"},[i("bk-select",{attrs:{clearable:!1,"font-size":"medium",disabled:t.basicInfo.is_builtin},model:{value:e.is_necessary,callback:function(i){t.$set(e,"is_necessary",i)},expression:"item.is_necessary"}},t._l(t.necessaryList,(function(t){return i("bk-option",{key:t.id,attrs:{id:t.id,name:t.name}})})),1)],1),t._v(" "),i("div",{staticClass:"bk-ul-form"},[i("bk-input",{attrs:{clearable:!0,disabled:t.basicInfo.is_builtin,placeholder:t.$t("m.systemConfig['参数示例']")},model:{value:e.sample,callback:function(i){t.$set(e,"sample",i)},expression:"item.sample"}})],1),t._v(" "),i("div",{staticClass:"bk-ul-form"},[i("bk-input",{attrs:{clearable:!0,disabled:t.basicInfo.is_builtin,placeholder:t.$t("m.systemConfig['备注']")},model:{value:e.desc,callback:function(i){t.$set(e,"desc",i)},expression:"item.desc"}})],1)]),t._v(" "),t.basicInfo.is_builtin?t._e():i("div",{staticClass:"bk-request-operat"},[i("span",{staticClass:"bk-add-node",on:{click:function(e){return t.addQuery(t.basicInfo.req_params,a)}}},[i("i",{staticClass:"bk-icon icon-plus",staticStyle:{"font-size":"24px"}})]),t._v(" "),i("span",{staticClass:"bk-reduce-node",class:{"bk-reduce-disable":1===t.basicInfo.req_params.length},on:{click:function(e){return t.deleteQuery(t.basicInfo.req_params,a)}}},[i("i",{staticClass:"bk-icon icon-close",staticStyle:{"font-size":"24px"}})])])])})):t._e()],2):t._e(),t._v(" "),"POST"===t.basicInfo.method?[i("div",{staticClass:"mb10"},[i("bk-button",{attrs:{theme:"primary","data-test-id":"apiDetail_button_importRequsetJSON",title:t.$t("m.systemConfig['导入JSON']"),disabled:t.basicInfo.is_builtin},on:{click:t.closeDictionary}},[t._v("\n                "+t._s(t.$t("m.systemConfig['导入JSON']"))+"\n            ")])],1),t._v(" "),i("api-request-body",{attrs:{"is-body":!0,"is-builtin":t.basicInfo.is_builtin,"tree-data-list":t.treeDataList},on:{addBrotherLine:t.addBodyLine,addChildLine:t.addBodyChild,deleteLine:t.deleteBodyLine}})]:t._e(),t._v(" "),i("bk-dialog",{attrs:{"render-directive":"if",width:t.dictDataTable.width,"header-position":t.dictDataTable.headerPosition,loading:t.secondClick,"auto-close":t.dictDataTable.autoClose,"mask-close":t.dictDataTable.autoClose,title:t.$t("m.systemConfig['导入JSON']")},on:{confirm:t.submitDictionary},model:{value:t.dictDataTable.showDialog,callback:function(e){t.$set(t.dictDataTable,"showDialog",e)},expression:"dictDataTable.showDialog"}},[i("div",{staticClass:"bk-add-module"},[i("ace",{attrs:{value:t.responseDetailConfig.value,width:t.responseDetailConfig.width,height:t.responseDetailConfig.height,"read-only":t.responseDetailConfig.readOnly,lang:t.responseDetailConfig.lang,"full-screen":t.responseDetailConfig.fullScreen,theme:"textmate"},on:{blur:t.blur,init:t.importEditorInitAfter}})],1)])],2)},n=[];a._withStripped=!0},vw8V:function(t,e,i){},xGyw:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=f(i("m1cH")),n=f(i("14Xm")),s=f(i("D3Ub")),o=f(i("gDS+")),r=f(i("2eEL")),c=f(i("u8Ap")),l=f(i("PaSM")),d=i("CeR/"),u=f(i("0hVY"));function f(t){return t&&t.__esModule?t:{default:t}}e.default={name:"apiTree",components:{collapseTransition:r.default,memberSelect:c.default},mixins:[l.default,u.default],props:{projectId:String,treeListOri:{type:Array,default:function(){return[]}},codeList:{type:Array,default:function(){return[]}},allCodeList:{type:Array,default:function(){return[]}}},data:function(){return{secondClick:!1,basicPerson:{disabledList:[]},styletranslateY:{transform:"translate(40px,-20px)"},isTreeLoading:!1,searchWord:"",dictDataTable:{showDialog:!1,width:700,headerPosition:"left",autoClose:!1,precision:0,formInfo:{addName:"",addCode:"",name:"",desc:"",code:"",domain:"",owners:"",personInCharge:[],contact_information:"",id:"",system_id:"",is_activated:!0}},isDropdownShow:!1,rules:{}}},computed:{treeList:{get:function(){var t=this;return this.treeListOri.filter((function(e){return-1!==e.name.indexOf(t.searchWord)}))},set:function(t){var e=this;t.forEach((function(t){var i=e.$parent.treeList.filter((function(e){return e.system_id===t.system_id&&e.id===t.id}));i.length&&(i[0]=JSON.parse((0,o.default)(t)))}))}}},mounted:function(){var t=this;return(0,s.default)(n.default.mark((function e(){return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.treeListOri;case 2:return e.next=4,t.showBackground(t.treeList[0],0,0);case 4:t.rules.code=t.checkCommonRules("select").select,t.rules.addName=t.checkCommonRules("name").name,t.rules.addCode=t.checkCommonRules("key").key;case 7:case"end":return e.stop()}}),e,t)})))()},methods:{scrollEvent:function(t){this.styletranslateY.transform="translate(40px,"+(-t.target.scrollTop-20)+"px)"},changeCode:function(t,e){var i=this.codeList.filter((function(e){return e.code===t}))[0];this.dictDataTable.formInfo.name=i.name,this.dictDataTable.formInfo.system_id=i.system_id},clearInfo:function(){this.searchWord=""},showGroupChild:function(t,e){t.showMore=!t.showMore,this.treeList=[].concat((0,a.default)(JSON.parse((0,o.default)(this.treeList))))},showBackground:function(t,e,i){var n=this;i?(this.$parent.displayInfo.level_1=t,this.$parent.getRemoteApiDetail(t.id)):(this.$parent.displayInfo.level_1={},this.$parent.displayInfo.level_0=t,this.$parent.getTableList(t.id)),this.treeList.forEach((function(t){n.recordCheckFn(t)})),t.check=!0,this.treeList=[].concat((0,a.default)(JSON.parse((0,o.default)(this.treeList))))},recordCheckFn:function(t){t.check=!1,t.apis&&t.apis.length&&t.apis.forEach((function(t){t.check=!1}))},getRemoteSystemData:function(){this.$parent.getRemoteSystemData()},submitDictionary:function(){var t=this;this.$refs.dictDataForm.validate().then((function(e){if(!t.secondClick){t.dictDataTable.formInfo.owners=t.dictDataTable.formInfo.personInCharge.join(",");var i={name:t.dictDataTable.formInfo.name,desc:t.dictDataTable.formInfo.desc,code:t.dictDataTable.formInfo.code,domain:t.dictDataTable.formInfo.domain,system_id:t.dictDataTable.formInfo.system_id,owners:t.dictDataTable.formInfo.owners,contact_information:t.dictDataTable.formInfo.contact_information,is_activated:t.dictDataTable.formInfo.is_activated,headers:[],cookies:[],variables:[]};if("ADD"===t.dictDataTable.type&&(i.name=t.dictDataTable.formInfo.addName,i.code=t.dictDataTable.formInfo.addCode),i.project_key=t.projectId?t.projectId:"public",t.dictDataTable.title===t.$t('m.systemConfig["修改系统"]'))return i.id=t.dictDataTable.formInfo.id,t.secondClick=!0,void t.$store.dispatch("apiRemote/put_remote_system",i).then((function(e){t.$bkMessage({message:t.$t('m.systemConfig["修改成功"]'),theme:"success"}),t.getRemoteSystemData(),t.closeDictionary()})).catch((function(e){(0,d.errorHandler)(e,t)})).finally((function(){t.secondClick=!1}));t.secondClick=!0,t.$store.dispatch("apiRemote/post_remote_system",i).then((function(e){t.$bkMessage({message:t.$t('m.systemConfig["添加成功"]'),theme:"success"}),t.getRemoteSystemData(),t.closeDictionary()})).catch((function(e){(0,d.errorHandler)(e,t)})).finally((function(){t.secondClick=!1}))}}),(function(t){console.warn(t)}))},openDictionary:function(t,e){if(!this.projectId){var i=["public_api_create"],a=[],n={};if(["JION","ADD"].includes(t)||(i=["public_api_manage"],a=e.auth_actions,n={public_api:[{id:e.id,name:e.name}]}),a&&!this.hasPermission(i,a))return void this.applyForPermission(i,a,n)}this.dictDataTable.showDialog=!0,this.dictDataTable.type=t,this.dictDataTable.title="ADD"===t?this.$t('m.systemConfig["新增系统"]'):e?this.$t('m.systemConfig["修改系统"]'):this.$t('m.systemConfig["接入系统"]'),this.dictDataTable.formInfo={addName:"",addCode:"",name:e?e.name:"",desc:e?e.desc:"",domain:e?e.domain:"",code:e?e.code:"",owners:e?e.owners:"",personInCharge:e?e.owners.split(","):[],contact_information:e?e.contact_information:"",id:e?e.id:"",system_id:e?e.system_id:"",is_activated:!e||e.is_activated},this.$refs.dropdown.hide()},closeDictionary:function(){this.dictDataTable.showDialog=!1},dropdownShow:function(){this.isDropdownShow=!0},dropdownHide:function(){this.isDropdownShow=!1},openDelete:function(t){var e=this;this.$bkInfo({type:"warning",title:this.$t('m.systemConfig["确认移除系统？"]'),subTitle:this.$t('m.systemConfig["移除后，将无法使用该系统，请谨慎操作"]'),confirmFn:function(){var i=t.id;e.secondClick||(e.secondClick=!0,e.$store.dispatch("apiRemote/delete_remote_system",i).then((function(t){e.$bkMessage({message:e.$t('m.systemConfig["删除成功"]'),theme:"success"}),e.getRemoteSystemData()})).catch((function(t){(0,d.errorHandler)(t,e)})).finally((function(){e.secondClick=!1})))}})}}}},xkLb:function(t,e,i){"use strict";i.r(e);var a=i("zDP8"),n=i("Dhx6");for(var s in n)["default"].indexOf(s)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(s);var o=i("KHd+"),r=Object(o.a)(n.default,a.a,a.b,!1,null,"2d559b66",null);r.options.__file="src/views/processManagement/apiConfigure/components/apiEditorOthers.vue",e.default=r.exports},xlNs:function(t,e,i){},yC50:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a,n=i("2eEL"),s=(a=n)&&a.__esModule?a:{default:a};e.default={name:"exportTree",components:{collapseTransition:s.default},props:{isBuiltin:{type:Boolean,default:function(){return!1}},isBody:{type:Boolean,default:function(){return!1}},treeDataList:{type:Array,default:function(){return[]}},treeIndex:{type:Number,default:function(){return 0}}},data:function(){return{pLeft:"padding-left:"+15*this.treeIndex+"px; padding-right: 5px;",treeTypeList:[{id:"string",name:"string"},{id:"object",name:"object"},{id:"number",name:"number"},{id:"boolean",name:"boolean"},{id:"array",name:"array"}],trueStatus:!0,falseStatus:!1}},watch:{},mounted:function(){},methods:{toggleChildren:function(t){this.$emit("toggleChildren",t)},toggle:function(t){this.$emit("toggle",t)},selectItem:function(t){this.$emit("selectItem",t)},addBrotherLine:function(t){this.$emit("addBrotherLine",t)},addChildLine:function(t){this.$emit("addChildLine",t)},deleteLine:function(t){this.$emit("deleteLine",t)},changeType:function(t){this.$set(t,"children",[]),"array"===t.type&&this.addChildLine(t)}}}},zDP8:function(t,e,i){"use strict";i.d(e,"a",(function(){return a})),i.d(e,"b",(function(){return n}));var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"bk-api-editor-others"},[i("bk-form",{attrs:{"label-width":120,model:t.basicInfo}},[i("bk-form-item",{attrs:{label:t.$t("m.systemConfig['开放接口：']")}},[i("bk-switcher",{attrs:{size:"small",disabled:t.basicInfo.is_builtin},model:{value:t.basicInfo.is_activated,callback:function(e){t.$set(t.basicInfo,"is_activated",e)},expression:"basicInfo.is_activated"}})],1)],1)],1)},n=[];a._withStripped=!0},zP2a:function(t,e,i){"use strict";t.exports={template:'<div :style="{height: calcSize(height), width: calcSize(width)}"></div>',props:{value:{type:String,default:""},width:{type:[Number,String],default:500},height:{type:[Number,String],default:300},lang:{type:String,default:"text"},theme:{type:String,default:"monokai"},readOnly:{type:Boolean,default:!1},fullScreen:{type:Boolean,default:!1},hasError:{type:Boolean,default:!1},fontSize:{type:Number,default:14}},data:function(){return{$editor:null}},watch:{value:function(t){this.$editor&&this.$editor.setValue&&this.$editor.setValue(t,1)},fullScreen:function(){this.$el.classList.toggle("ace-full-screen"),this.$editor.resize()}},methods:{calcSize:function(t){var e=t.toString();return e.match(/^\d*$/)?t+"px":e.match(/^[0-9]?%$/)?e:"100%"}},mounted:function(){var t=this;this.$editor=this.$ace.edit(this.$el);var e=this.$editor,i=this.lang,a=void 0===i?"javascript":i,n=this.theme,s=void 0===n?"monokai":n,o=this.readOnly,r=this.fontSize,c=e.getSession();this.$editor.setFontSize(r),this.$emit("init",e),c.setMode("ace/mode/"+a),e.setTheme("ace/theme/"+s),e.setTheme("ace/theme/textmate"),c.setUseWrapMode(!0),e.setValue(this.value,1),e.setReadOnly(o),e.setShowPrintMargin(!1),e.on("change",(function(i,a){var n=e.getValue();t.$emit("update:hasError",!n),t.$emit("input",n,i,a)})),e.on("blur",(function(i,a){var n=e.getValue();t.$emit("update:hasError",!n),t.$emit("blur",n,i,a)})),c.on("changeAnnotation",(function(e,i){var a=i.$annotations;a&&a.length&&t.$emit("change-annotation",a)}))}}}}]);