(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{"4KzC":function(t,e,i){"use strict";i("SQj2")},BkRN:function(t,e,i){},CTpD:function(t,e,i){"use strict";i.r(e);var n=i("SXAm"),s=i("sXI1");for(var a in s)["default"].indexOf(a)<0&&function(t){i.d(e,t,(function(){return s[t]}))}(a);i("MpVe");var r=i("KHd+"),o=Object(r.a)(s.default,n.a,n.b,!1,null,"2c8bc4fa",null);o.options.__file="src/views/slaManager/agreement.vue",e.default=o.exports},FmHc:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=c(i("m1cH")),s=i("CeR/"),a=c(i("Ah+g")),r=c(i("yJMH")),o=c(i("gzP0")),l=c(i("0hVY"));function c(t){return t&&t.__esModule?t:{default:t}}e.default={name:"agreement",components:{searchInfo:a.default,addAgreement:r.default,EmptyTip:o.default},mixins:[l.default],data:function(){return{isDataLoading:!0,versionStatus:!0,secondClick:!1,dataList:[],pagination:{current:1,count:10,limit:10},moreSearch:[{name:this.$t('m.slaContent["协议名称"]'),key:"name",placeholder:this.$t('m.slaContent["请输入协议名称"]'),type:"input",typeKey:"name",value:"",list:[]},{name:this.$t('m.deployPage["更新人"]'),type:"member",typeKey:"updated_by",multiSelect:!0,value:[],list:[]},{name:this.$t('m.deployPage["启用状态"]'),type:"select",typeKey:"is_enabled",value:"",list:[{key:0,name:this.$t('m.deployPage["关闭"]')},{key:1,name:this.$t('m.deployPage["启用"]')}]}],searchToggle:!1,emailNotifyEventList:[],weixinNotifyEventList:[],modelList:[],modelPriority:[],changeInfo:{isShow:!1,is_reply_need:!0,info:{}},emptyTip:{title:this.$t("m['当前项目下还没有 <SLA协议>']"),subTitle:this.$t("m['SLA（即服务级别协议）是服务支撑团队与组织机构内最终用户之间的“服务合同”。通常，SLA 是通过定义所提供的服务必须遵守的质量标准以及交付服务的时间表来建立对服务和服务质量的清晰理解；加快服务响应时间、减少等待时长、降低运营成本，一套合理且适用的 SLA 将是您实现这些目标的最佳选择。']"),desc:[{src:i("+Xwt"),title:this.$t("m['设计服务模式并制定协议']"),content:this.$t("m['通常我们会先设定团队的服务时间段，然后进一步配置在规定的服务时间段内，针对不同的服务工单紧急程度约定响应和处理时长，为的是保障用户的服务体验、提升用户满意度。']")},{src:i("6zN/"),title:this.$t("m['为服务配置合适的 SLA']"),content:this.$t("m['接下来就是为不同的服务配置合适的 SLA 了，因为很多服务的处理流程中可能会需要多个不同职能团队来处理，所以我们支持在一个服务内针对不同的流程区间设置差异化的服务协议，满足对不同服务团队的SLA要求。']")}],links:[{text:this.$t("m['如何设计一套合理有效的 SLA ？']"),btn:this.$t("m['产品白皮书']"),href:"https://bk.tencent.com/docs/document/6.0/145/6594"}]}}},computed:{sliderStatus:function(){return this.$store.state.common.slideStatus}},mounted:function(){if(this.getList(1),this.getModelList(),this.getTicketHighlight(),this.getModelPriority(),this.getNoticeList("EMAIL"),this.getNoticeList("WEIXIN"),"create"===this.$route.query.key){var t={};"item"in this.$route.query&&(t=JSON.parse(this.$route.query.item)),this.addAgreement(t)}},methods:{getList:function(t){var e=this;void 0!==t&&(this.pagination.current=t);var i={page:this.pagination.current,page_size:this.pagination.limit,project_key:this.$store.state.project.id};this.moreSearch.forEach((function(t){(Array.isArray(t.value)?t.value.length:""!==t.value)&&(i[t.typeKey]=Array.isArray(t.value)?t.value.join(","):t.value)})),this.isDataLoading=!0,this.$store.dispatch("slaManagement/getProtocolsList",{params:i}).then((function(t){e.dataList=t.data.items,e.searchToggle=0!==t.data.items.length,e.pagination.current=t.data.page,e.pagination.count=t.data.count})).catch((function(t){(0,s.errorHandler)(t,e)})).finally((function(){e.isDataLoading=!1}))},getNoticeList:function(t){var e=this;this.isDataLoading=!0;var i=t.toLowerCase(),n={notify_type:t,used_by:"SLA"};this.$store.dispatch("noticeConfigure/getNoticeList",{params:n}).then((function(t){e[i+"NotifyEventList"]=t.data.map((function(t){return{id:t.id,name:t.action_name}}))})).catch((function(t){(0,s.errorHandler)(t,e)})).finally((function(){e.isDataLoading=!1}))},handlePageLimitChange:function(){this.pagination.limit=arguments[0],this.getList()},handlePageChange:function(t){this.pagination.current=t,this.getList()},getModelList:function(){var t=this,e={project_key:this.$store.state.project.id};this.$store.dispatch("sla/getScheduleList",e).then((function(e){t.modelList=e.data})).catch((function(e){(0,s.errorHandler)(e,t)}))},getTicketHighlight:function(){var t=this;this.$store.dispatch("sla/getTicketHighlight").then((function(e){var i=e.data;t.highlightObj=i.items[0]})).catch((function(e){t.$bkMessage({message:e.data.msg,theme:"error"})}))},HighlightSettingComfirm:function(){var t=this;this.isHighlightSetting=!1,this.$store.dispatch("sla/updateTicketHighlight",this.highlightObj).then((function(e){var i=e.result,n=e.data;i?t.$bkMessage({message:n.msg||t.$t("m.slaContent['成功更新单据高亮颜色']"),theme:"success"}):t.getTicketHighlight()})).catch((function(e){t.$bkMessage({message:e.data.msg,theme:"error"})}))},getModelPriority:function(){var t=this;this.$store.dispatch("slaManagement/getPriority",{params:{dict_table__key:"PRIORITY"}}).then((function(e){t.modelPriority=e.data})).catch((function(e){(0,s.errorHandler)(e,t)}))},closeVersion:function(){this.versionStatus=!1},addAgreement:function(t,e){var i="sla_agreement_create"===e?this.$store.state.project.projectAuthActions:[].concat((0,n.default)(this.$store.state.project.projectAuthActions),(0,n.default)(t.auth_actions));if(this.hasPermission([e],i))this.changeInfo.is_reply_need=t.is_reply_need,this.changeInfo.info=t,t.id||(this.changeInfo.is_reply_need=!0,this.changeInfo.info={action_policies:[],policies:[]}),this.changeInfo.isShow=!0;else{var s=this.$store.state.project.projectInfo,a={project:[{id:s.key,name:s.name}]};t.id&&(a.sla_agreement=[{id:t.id,name:t.name}]),this.applyForPermission([e],"sla_agreement_create"===e?[]:[].concat((0,n.default)(this.$store.state.project.projectAuthActions),(0,n.default)(t.auth_actions)),a)}},closeAgreement:function(){this.changeInfo.isShow=!1},deleteAgreement:function(t){var e=this;if(this.hasPermission(["sla_agreement_delete"],[].concat((0,n.default)(this.$store.state.project.projectAuthActions),(0,n.default)(t.auth_actions))))this.$bkInfo({type:"warning",title:this.$t('m.slaContent["确定删除该服务协议？"]'),confirmFn:function(){var i=t.id;e.secondClick||(e.secondClick=!0,e.$store.dispatch("slaManagement/deleteProtocol",i).then((function(t){e.$bkMessage({message:e.$t('m.systemConfig["删除成功"]'),theme:"success"}),e.getList(1)})).catch((function(t){(0,s.errorHandler)(t,e)})).finally((function(){e.secondClick=!1})))}});else{var i=this.$store.state.project.projectInfo,a={project:[{id:i.key,name:i.name}],sla_agreement:[{id:t.id,name:t.name}]};this.applyForPermission(["sla_agreement_delete"],[].concat((0,n.default)(this.$store.state.project.projectAuthActions),(0,n.default)(t.auth_actions)),a)}},searchContent:function(){this.getList(1)},searchMore:function(){this.$refs.searchInfo.searchMore()},clearSearch:function(){this.moreSearch.forEach((function(t){t.value=t.multiSelect?[]:""})),this.getList(1)}}}},GwKx:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=l(i("14Xm")),s=l(i("4d7F")),a=l(i("D3Ub")),r=l(i("gDS+")),o=l(i("PaSM"));function l(t){return t&&t.__esModule?t:{default:t}}e.default={name:"priorityConfigur",mixins:[o.default],props:{modelList:{type:Array,default:function(){return[]}},modelPriority:{type:Array,default:function(){return[]}},changeInfo:{type:Object,default:function(){return{}}}},data:function(){return{typeColorList:["","#99C5FF","#FE9C00","#EA3536"],timeList:[{id:"m",name:this.$t('m.slaContent["分钟"]')},{id:"h",name:this.$t('m.slaContent["小时"]')},{id:"d",name:this.$t('m.slaContent["天"]')}],priorityList:[],historyPriority:[],scheduleRules:{},handleTimeRules:{},replyTimeRules:{reply_time:[{message:"字段必填",required:!0,trigger:"blur",type:"string",validator:function(t){return!!t}}]},iconOffset:75}},watch:{modelPriority:function(){this.initData()}},mounted:function(){this.initData(),this.scheduleRules=this.checkCommonRules("schedule"),this.handleTimeRules=this.checkCommonRules("handle_time")},methods:{initData:function(){var t=this,e=this.changeInfo.info;e.policies.length?(this.priorityList=[],e.policies.forEach((function(e){t.priorityList.push({priority:e.priority,schedule:e.schedule,handle_time:e.handle_time,handle_unit:e.handle_unit,reply_time:e.reply_time,reply_unit:e.reply_unit,id:e.id,scheduleCheck:!1,timeCheck:!1,isRespDropdownShow:!1,isDealDropdownShow:!1})}))):this.modelPriority.forEach((function(e){t.priorityList.push({priority:e.key,schedule:"",handle_time:"",handle_unit:"h",reply_time:"",reply_unit:"h",scheduleCheck:!1,timeCheck:!1,isRespDropdownShow:!1,isDealDropdownShow:!1})})),this.historyPriority=JSON.parse((0,r.default)(this.priorityList))},dropdownShow:function(t,e){"resp"===e?t.isRespDropdownShow=!0:"deal"===e&&(t.isDealDropdownShow=!0)},dropdownHide:function(t,e){"resp"===e?t.isRespDropdownShow=!1:"deal"===e&&(t.isDealDropdownShow=!1)},timeHandler:function(t,e,i,n,s){this.$refs["dropdown"+n][s].hide(),i[t]=e.id},handleCreate:function(){var t=this.$router.resolve({path:"/project/sla_manage",query:{project_id:this.$store.state.project.id,key:"create"}});window.open(t.href,"_blank")},checkData:function(){var t=this;return(0,a.default)(n.default.mark((function e(){var i,a;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=[],a=!0,t.$refs.schedule.forEach((function(t){i.push(t.validate())})),t.changeInfo.is_reply_need&&t.$refs.replyTime.forEach((function(t){i.push(t.validate())})),t.$refs.handleTime.forEach((function(t){i.push(t.validate())})),e.next=7,s.default.all(i).then((function(){a=!1})).catch((function(){a=!0}));case 7:return e.abrupt("return",a);case 8:case"end":return e.stop()}}),e,t)})))()},clearFromError:function(){var t=this;["schedule","replyTime","handleTime"].forEach((function(e){t.$refs[e].forEach((function(t){t.clearError()}))}))}}}},HnXz:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=c(i("14Xm")),s=c(i("D3Ub")),a=c(i("m1cH")),r=c(i("PaSM")),o=c(i("qGMc")),l=c(i("KoED"));function c(t){return t&&t.__esModule?t:{default:t}}e.default={name:"addAgreement",components:{priorityConfigur:o.default,eventRemind:l.default},mixins:[r.default],props:{modelList:{type:Array,default:function(){return[]}},emailNotifyEventList:{type:Array,default:function(){return[]}},weixinNotifyEventList:{type:Array,default:function(){return[]}},modelPriority:{type:Array,default:function(){return[]}},changeInfo:{type:Object,default:function(){return{}}}},data:function(){return{testPriority1:[{type:1,eventName:this.$t("m.slaContent['响应提醒']"),hasCheckBox:!0,isCheck:!1,remindRuleText:"响应时长达到协议标准的",remindRuleValue:20,remindRuleUnit:"%",receivers:"",notify_type_list:["email","weixin"],email_notify:"",weixin_notify:"",notify_rule:"once",notify_freq:10,freq_unit:"%"},{type:3,eventName:"处理提醒",hasCheckBox:!1,isCheck:!1,remindRuleText:"处理时长达到协议标准的",remindRuleValue:20,remindRuleUnit:"%",receivers:"",notify_type_list:["email","weixin"],email_notify:"",weixin_notify:"",notify_rule:"once",notify_freq:10,freq_unit:"%"}],testPriority3:[{type:2,eventName:"超时响应提醒",hasCheckBox:!0,isCheck:!1,remindRuleText:"响应时长超出协议标准还未响应时",receivers:"",notify_type_list:["email","weixin"],email_notify:"",weixin_notify:"",notify_rule:"once",notify_freq:10,freq_unit:"%"},{type:4,eventName:"超时处理提醒",hasCheckBox:!1,isCheck:!1,remindRuleText:"处理时长超出协议标准还未解决时",receivers:"",notify_type_list:["email","weixin"],email_notify:"",weixin_notify:"",notify_rule:"once",notify_freq:10,freq_unit:"%"}],secondClick:!1,formInfo:{name:"",agreementStatus:!0,id:""},nameRules:{}}},computed:{sliderStatus:function(){return this.$store.state.common.slideStatus}},watch:{"changeInfo.is_reply_need":function(t){t||this.$refs.priorityConfigur.clearFromError()}},mounted:function(){this.initData(),this.nameRules=this.checkCommonRules("name")},methods:{initData:function(){var t=this.changeInfo.info;this.formInfo={name:t.name||"",agreementStatus:t.is_enabled||!0,id:t.id}},wacthEventList:function(t,e,i){var n=this;this[t]=this[t].map((function(t){return n.changeInfo.info.id&&t[e+"_notify"]||(t[e+"_notify"]=i[0].id),t}))},getReminderInfo:function(t){var e=this,i=[],n={};return this.$refs["eventRemind"+t].priorityList.map((function(t,s){n={type:t.type,condition:{type:"all",expressions:[{name:"handle_time_percent",value:t.remindRuleValue||100,type:"INT",operator:"greater_than"}]},actions:[{action_type:"alert",config:{receivers:t.receivers||"",notify_rule:t.notify_rule||"",notify_freq:t.notify_freq||0,freq_unit:t.freq_unit||"",notify:t.notify_type_list.map((function(e){return{notify_type:e,notify_template:t[e+"_notify"]}}))}}]},(!t.hasCheckBox||e.changeInfo.is_reply_need&&t.isCheck)&&i.push(n)})),i},submitFn:function(){var t=this,e=this.$refs.priorityConfigur.priorityList,i={name:this.formInfo.name,is_enabled:this.formInfo.agreementStatus,is_reply_need:this.changeInfo.is_reply_need||!1,action_policies:[].concat((0,a.default)(this.getReminderInfo(1)),(0,a.default)(this.getReminderInfo(3))),project_key:this.$store.state.project.id,policies:e},n=this.changeInfo.info.id?"putProtocol":"addProtocol",s={params:i};this.changeInfo.info.id&&(s.id=this.changeInfo.info.id),this.secondClick||(this.secondClick=!0,this.$store.dispatch("slaManagement/"+n,s).then((function(e){t.$bkMessage({message:t.$t('m.deployPage["保存成功"]'),theme:"success"}),t.closeAgreement(!0)})).catch((function(e){t.$bkMessage({message:e.data.msg,theme:"error"})})).finally((function(){t.secondClick=!1})))},closeAgreement:function(t){var e=this;!t&&this.checkDataChange()?this.$bkInfo({type:"warning",title:this.$t('m.slaContent["确认返回？"]'),confirmFn:function(){e.$parent.getList(1),e.$parent.closeAgreement()}}):(this.$parent.getList(1),this.$parent.closeAgreement())},checkDataChange:function(){return!0},submitInfo:function(){var t=this;return(0,s.default)(n.default.mark((function e(){var i,s,a;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$refs.priorityConfigur.checkData();case 2:return i=e.sent,e.next=5,t.$refs.eventRemind1.checkData();case 5:return s=e.sent,e.next=8,t.$refs.eventRemind3.checkData();case 8:a=e.sent,t.$refs.dynamicForm.validate().then((function(e){i||s||a||(t.changeInfo.info.id?t.$bkInfo({type:"warning",title:t.$t('m.slaContent["确认更新服务协议？"]'),confirmFn:function(){t.submitFn()}}):t.submitFn())}));case 10:case"end":return e.stop()}}),e,t)})))()}}}},IwqA:function(t,e,i){"use strict";i("aaRe")},KoED:function(t,e,i){"use strict";i.r(e);var n=i("nJLV"),s=i("xaSK");for(var a in s)["default"].indexOf(a)<0&&function(t){i.d(e,t,(function(){return s[t]}))}(a);i("tnY7"),i("4KzC");var r=i("KHd+"),o=Object(r.a)(s.default,n.a,n.b,!1,null,"4f0404c9",null);o.options.__file="src/views/slaManager/newAddAgreement/eventRemind.vue",e.default=o.exports},MpVe:function(t,e,i){"use strict";i("YROA")},SQj2:function(t,e,i){},SXAm:function(t,e,i){"use strict";i.d(e,"a",(function(){return n})),i.d(e,"b",(function(){return s}));var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"agreement",staticClass:"bk-itsm-service"},[t.changeInfo.isShow?i("add-agreement",{attrs:{"model-list":t.modelList,"model-priority":t.modelPriority,"email-notify-event-list":t.emailNotifyEventList,"weixin-notify-event-list":t.weixinNotifyEventList,"change-info":t.changeInfo}}):[i("div",{staticClass:"is-title",class:{"bk-title-left":!t.sliderStatus}},[i("p",{staticClass:"bk-come-back"},[t._v("\n                "+t._s(t.$t('m.slaContent["服务协议"]'))+"\n            ")])]),t._v(" "),i("div",{staticClass:"itsm-page-content"},[!t.isDataLoading&&0===t.pagination.count&&t.searchToggle?i("empty-tip",{attrs:{title:t.emptyTip.title,"sub-title":t.emptyTip.subTitle,desc:t.emptyTip.desc,links:t.emptyTip.links}},[i("template",{slot:"btns"},[i("bk-button",{directives:[{name:"cursor",rawName:"v-cursor",value:{active:!t.hasPermission(["sla_agreement_create"],t.$store.state.project.projectAuthActions)},expression:"{ active: !hasPermission(['sla_agreement_create'], $store.state.project.projectAuthActions) }"}],class:{"btn-permission-disable":!t.hasPermission(["sla_agreement_create"],t.$store.state.project.projectAuthActions)},attrs:{"data-test-id":"sla_button_createAgreement_permission",theme:"primary"},on:{click:function(e){return t.addAgreement({},"sla_agreement_create")}}},[t._v("\n                        "+t._s(t.$t('m["立即创建"]'))+"\n                    ")])],1)],2):[t.versionStatus?i("div",{staticClass:"bk-itsm-version"},[i("i",{staticClass:"bk-icon icon-info-circle"}),t._v(" "),i("span",[t._v(t._s(t.$t('m.slaContent["服务协议：制定不同的服务协议内容。包括不同优先级下的服务模式，服务解决时长。可以制定多个不同的服务协议策略，它将会应用到具体的每个服务中。"]')))]),t._v(" "),i("i",{staticClass:"bk-icon icon-close",on:{click:t.closeVersion}})]):t._e(),t._v(" "),i("div",{staticClass:"bk-only-btn"},[i("div",{staticClass:"bk-more-search"},[i("bk-button",{directives:[{name:"cursor",rawName:"v-cursor",value:{active:!t.hasPermission(["sla_agreement_create"],t.$store.state.project.projectAuthActions)},expression:"{ active: !hasPermission(['sla_agreement_create'], $store.state.project.projectAuthActions) }"}],class:["mr10","plus-cus",{"btn-permission-disable":!t.hasPermission(["sla_agreement_create"],t.$store.state.project.projectAuthActions)}],attrs:{"data-test-id":"sla_button_createAgreement",theme:"primary",title:t.$t("m.managePage['新增']"),icon:"plus"},on:{click:function(e){return t.addAgreement({},"sla_agreement_create")}}},[t._v("\n                            "+t._s(t.$t('m.managePage["新增"]'))+"\n                        ")]),t._v(" "),i("div",{staticClass:"bk-search-name"},[i("div",{staticClass:"bk-search-content"},[i("bk-input",{attrs:{"data-test-id":"sla_button_searchAgreement",placeholder:t.moreSearch[0].placeholder||t.$t("m.deployPage['请输入流程名']"),clearable:!0,"right-icon":"bk-icon icon-search"},on:{enter:t.searchContent,clear:t.clearSearch},model:{value:t.moreSearch[0].value,callback:function(e){t.$set(t.moreSearch[0],"value",e)},expression:"moreSearch[0].value"}})],1),t._v(" "),i("bk-button",{staticClass:"ml10 filter-btn",attrs:{title:t.$t("m.deployPage['更多筛选条件']"),icon:" bk-itsm-icon icon-search-more"},on:{click:t.searchMore}})],1)],1),t._v(" "),i("search-info",{ref:"searchInfo",attrs:{"more-search":t.moreSearch}})],1),t._v(" "),i("bk-table",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:t.isDataLoading},expression:"{ isLoading: isDataLoading }"}],attrs:{data:t.dataList,size:"small",pagination:t.pagination},on:{"page-change":t.handlePageChange,"page-limit-change":t.handlePageLimitChange}},[i("bk-table-column",{attrs:{label:t.$t("m.slaContent['协议名称']")},scopedSlots:t._u([{key:"default",fn:function(e){return[t.hasPermission(["sla_agreement_edit"],e.row.auth_actions.concat(t.$store.state.project.projectAuthActions))?i("span",{staticClass:"bk-lable-primary",attrs:{"data-test-id":"sla_span_agreementEditFromName",title:e.row.name},on:{click:function(i){return t.addAgreement(e.row,"sla_agreement_edit")}}},[t._v("\n                                "+t._s(e.row.name||"--")+"\n                            ")]):i("bk-button",{directives:[{name:"cursor",rawName:"v-cursor"}],staticClass:"btn-permission-disable",attrs:{"data-test-id":"sla_button_agreementEditFromName",text:"",theme:"primary"},on:{click:function(i){return t.addAgreement(e.row,"sla_agreement_edit")}}},[t._v("\n                                "+t._s(e.row.name||"--")+"\n                            ")])]}}],null,!1,3952458304)}),t._v(" "),i("bk-table-column",{attrs:{label:t.$t("m.slaContent['应用服务数']")},scopedSlots:t._u([{key:"default",fn:function(e){return[i("bk-popover",{attrs:{placement:"top",trigger:"click",theme:"light","max-width":"500px"}},[i("span",{staticStyle:{cursor:"pointer"},attrs:{title:e.row.service_count||"0"}},[t._v(t._s(e.row.service_count||"0"))]),t._v(" "),i("div",{staticStyle:{"white-space":"normal"},attrs:{slot:"content"},slot:"content"},[i("p",[t._v(t._s(e.row.service_names.toString()))])])])]}}],null,!1,2777884572)}),t._v(" "),i("bk-table-column",{attrs:{label:t.$t("m.slaContent['更新时间']"),prop:"update_at"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",{attrs:{title:e.row.update_at}},[t._v(t._s(e.row.update_at||"--"))])]}}],null,!1,401090478)}),t._v(" "),i("bk-table-column",{attrs:{label:t.$t("m.slaContent['更新人']")},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",{attrs:{title:e.row.updated_by}},[t._v(t._s(e.row.updated_by||"--"))])]}}],null,!1,881672334)}),t._v(" "),i("bk-table-column",{attrs:{label:t.$t("m.slaContent['是否启用']")},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",{staticClass:"bk-status-color",class:{"bk-status-gray":!e.row.is_enabled}}),t._v(" "),i("span",{staticStyle:{"margin-left":"5px"},attrs:{title:e.row.is_enabled?t.$t("m.deployPage['启用']"):t.$t("m.deployPage['关闭']")}},[t._v("\n                                "+t._s(e.row.is_enabled?t.$t('m.deployPage["启用"]'):t.$t('m.deployPage["关闭"]'))+"\n                            ")])]}}],null,!1,1588195504)}),t._v(" "),i("bk-table-column",{attrs:{label:t.$t("m.slaContent['操作']"),width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.hasPermission(["sla_agreement_edit"],t.$store.state.project.projectAuthActions.concat(e.row.auth_actions))?i("bk-button",{attrs:{"data-test-id":"sla_button_agreementEditFromOperate2",theme:"primary",text:""},on:{click:function(i){return t.addAgreement(e.row,"sla_agreement_edit")}}},[t._v("\n                                "+t._s(t.$t('m.deployPage["编辑"]'))+"\n                            ")]):i("bk-button",{directives:[{name:"cursor",rawName:"v-cursor"}],staticClass:"btn-permission-disable",attrs:{"data-test-id":"sla_button_agreementEditFromOperate1",text:"",theme:"primary"},on:{click:function(i){return t.addAgreement(e.row,"sla_agreement_edit")}}},[t._v("\n                                "+t._s(t.$t('m.deployPage["编辑"]'))+"\n                            ")]),t._v(" "),t.hasPermission(["sla_agreement_delete"],t.$store.state.project.projectAuthActions.concat(e.row.auth_actions))?e.row.service_count>0||e.row.is_builtin?i("bk-button",{attrs:{theme:"primary","data-test-id":"sla_button_agreementDeleteFromOperate2",text:"",disabled:e.row.service_count>0||e.row.is_builtin,title:t.$t("m.slaContent['应用服务数大于0或者服务协议属于系统内置的不可删除']")}},[t._v("\n                                "+t._s(t.$t('m.deployPage["删除"]'))+"\n                            ")]):i("bk-button",{attrs:{theme:"primary",text:"","data-test-id":"sla_button_agreementDeleteFromOperate3"},on:{click:function(i){return t.deleteAgreement(e.row)}}},[t._v("\n                                "+t._s(t.$t('m.deployPage["删除"]'))+"\n                            ")]):i("bk-button",{directives:[{name:"cursor",rawName:"v-cursor"}],staticClass:"btn-permission-disable",attrs:{"data-test-id":"sla_button_agreementDeleteFromOperate1",text:"",theme:"primary"},on:{click:function(i){return t.deleteAgreement(e.row,["sla_agreement_delete"])}}},[t._v("\n                                "+t._s(t.$t('m.deployPage["删除"]'))+"\n                            ")])]}}],null,!1,3375918578)})],1)]],2)]],2)},s=[];n._withStripped=!0},Uikl:function(t,e,i){},YROA:function(t,e,i){},ZdQW:function(t,e,i){"use strict";i.d(e,"a",(function(){return n})),i.d(e,"b",(function(){return s}));var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"bk-add-agreement"},[i("div",{staticClass:"is-title",class:{"bk-title-left":!t.sliderStatus}},[i("p",{staticClass:"bk-come-back",on:{click:function(e){return t.closeAgreement(!1)}}},[i("i",{staticClass:"bk-icon icon-arrows-left"}),t._v("\n            "+t._s(t.changeInfo.info.id?t.changeInfo.info.name:t.$t('m.slaContent["新建服务协议"]'))+"\n        ")])]),t._v(" "),i("div",{staticClass:"bk-add-content"},[i("div",{staticClass:"bk-content-group",staticStyle:{width:"400px"}},[i("p",{staticClass:"bk-group-title"},[t._v(t._s(t.$t('m.slaContent["基本信息"]')))]),t._v(" "),i("bk-form",{ref:"dynamicForm",attrs:{"label-width":250,"form-type":"vertical",model:t.formInfo,rules:t.nameRules}},[i("bk-form-item",{staticStyle:{width:"540px"},attrs:{label:t.$t("m.slaContent['服务协议名称']"),required:!0,"error-display-type":"normal",property:"name"}},[i("bk-input",{attrs:{maxlength:120,"show-word-limit":!0,placeholder:t.$t("m.slaContent['请输入服务协议名称']"),disabled:t.changeInfo.info.is_builtin},model:{value:t.formInfo.name,callback:function(e){t.$set(t.formInfo,"name","string"==typeof e?e.trim():e)},expression:"formInfo.name"}})],1)],1)],1),t._v(" "),i("div",{staticClass:"bk-content-group"},[i("p",{staticClass:"bk-group-title"},[t._v(t._s(t.$t('m.slaContent["服务承诺设定"]')))]),t._v(" "),i("priority-configur",{ref:"priorityConfigur",attrs:{"model-list":t.modelList,"model-priority":t.modelPriority,"change-info":t.changeInfo}})],1),t._v(" "),i("div",{staticClass:"bk-content-group"},[i("p",{staticClass:"bk-group-title"},[t._v(t._s(t.$t('m.slaContent["预警提醒"]')))]),t._v(" "),i("event-remind",{ref:"eventRemind1",attrs:{"model-list":t.modelList,"model-priority":t.testPriority1,"has-check-box":t.changeInfo.is_reply_need,"email-notify-event-list":t.emailNotifyEventList,"weixin-notify-event-list":t.weixinNotifyEventList,"change-info":t.changeInfo}})],1),t._v(" "),i("div",{staticClass:"bk-content-group"},[i("p",{staticClass:"bk-group-title"},[t._v(t._s(t.$t('m.slaContent["超时提醒"]')))]),t._v(" "),i("event-remind",{ref:"eventRemind3",attrs:{"model-list":t.modelList,"has-check-box":t.changeInfo.is_reply_need,"email-notify-event-list":t.emailNotifyEventList,"weixin-notify-event-list":t.weixinNotifyEventList,"model-priority":t.testPriority3,"change-info":t.changeInfo}})],1),t._v(" "),i("div",[i("p",{staticClass:"bk-group-title"},[i("span",{staticStyle:{"margin-right":"15px"},attrs:{"data-test-id":"sla_span_isUseAgreement"}},[t._v(t._s(t.$t('m.slaContent["是否启用该协议"]')))]),t._v(" "),i("bk-switcher",{attrs:{size:"small",theme:"primary"},model:{value:t.formInfo.agreementStatus,callback:function(e){t.$set(t.formInfo,"agreementStatus",e)},expression:"formInfo.agreementStatus"}})],1)])]),t._v(" "),i("div",{staticClass:"bk-priority-btn"},[i("bk-button",{staticClass:"mr10",attrs:{"data-test-id":"sla_button_submitAgreement",theme:"primary",title:t.$t("m.slaContent['提交']"),loading:t.secondClick},on:{click:t.submitInfo}},[t._v(t._s(t.$t("m.slaContent['提交']"))+"\n        ")]),t._v(" "),i("bk-button",{staticClass:"mr10",attrs:{"data-test-id":"sla_button_closeAgreement",theme:"default",title:t.$t("m.eventdeploy['取消']"),loading:t.secondClick},on:{click:function(e){return t.closeAgreement(!1)}}},[t._v(t._s(t.$t('m.eventdeploy["取消"]'))+"\n        ")])],1)])},s=[];n._withStripped=!0},ZzVk:function(t,e,i){"use strict";i("Uikl")},aaRe:function(t,e,i){},gHgP:function(t,e,i){},jK6i:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=u(i("14Xm")),s=u(i("4d7F")),a=u(i("D3Ub")),r=u(i("m1cH")),o=u(i("QbLZ")),l=u(i("gDS+")),c=u(i("PaSM"));function u(t){return t&&t.__esModule?t:{default:t}}e.default={name:"priorityConfigur",mixins:[c.default],props:{modelList:{type:Array,default:function(){return[]}},emailNotifyEventList:{type:Array,default:function(){return[]}},weixinNotifyEventList:{type:Array,default:function(){return[]}},modelPriority:{type:Array,default:function(){return[]}},changeInfo:{type:Object,default:function(){return{}}},hasCheckBox:{type:Boolean,default:function(){return!1}}},data:function(){return{priorityList:[],isDropdownShow:!1,typeColorList:["","#99C5FF","#FE9C00","#EA3536"],timeList:[{id:"%",name:"%"},{id:"m",name:this.$t('m.slaContent["分钟"]')},{id:"h",name:this.$t('m.slaContent["小时"]')},{id:"d",name:this.$t('m.slaContent["天"]')}],receiversOptionList:[{id:"PROCESSORS",name:this.$t('m.slaContent["处理人"]')},{id:"HISTORY_HANDLER",name:this.$t('m.slaContent["历史处理人"]')},{id:"ADMIN",name:this.$t('m.slaContent["服务管理员"]')}],historyPriority:[],oldNotifyTypeList:[],scheduleRules:{},selectRules:{},receiversRules:{receivers:[{message:"字段必填",required:!0,type:"string",trigger:"blur",validator:function(t){return!!t}}]},notifyTypeRules:{email_notify:[{message:"字段必填",required:!0,type:"string",trigger:"blur",validator:function(t){return!!t}}],weixin_notify:[{message:"字段必填",required:!0,type:"string",trigger:"blur",validator:function(t){return!!t}}]},iconOffset:75}},watch:{modelPriority:function(){this.changeInfo.info.id||(this.priorityList=JSON.parse((0,l.default)(this.modelPriority)))}},mounted:function(){this.initData(),this.scheduleRules=this.checkCommonRules("schedule"),this.selectRules=this.checkCommonRules("select")},methods:{initData:function(){var t=this,e=this.changeInfo.info;if(e.policies.length){this.priorityList=[];var i={},n="",s="";this.modelPriority.forEach((function(a){i=a,e.action_policies.forEach((function(t){t.type===a.type&&(n=t.actions[0].config.notify.find((function(t){return"email"===t.notify_type})),s=t.actions[0].config.notify.find((function(t){return"weixin"===t.notify_type})),i=(0,o.default)({},a,{isCheck:!0,remindRuleValue:t.condition.expressions[0].value,receivers:t.actions[0].config.receivers,notify_type_list:t.actions[0].config.notify.map((function(t){return t.notify_type})),email_notify:n&&n.notify_template,weixin_notify:s&&s.notify_template,notify_rule:t.actions[0].config.notify_rule,notify_freq:t.actions[0].config.notify_freq,freq_unit:t.actions[0].config.freq_unit}))})),t.priorityList.push(i)}))}else this.priorityList=JSON.parse((0,l.default)(this.modelPriority))},dropdownShow:function(){this.isDropdownShow=!0},dropdownHide:function(){this.isDropdownShow=!1},timeHandler:function(t,e,i){this.$refs["dropdown"+i][0].hide(),e.freq_unit=t.id},handleCreate:function(){this.$router.push({name:"slaManager",params:{key:"create"}})},notifyFreqChange:function(t,e){t<=0&&(this.priorityList[e].notify_freq=10,this.$bkMessage({message:this.$t('m.slaContent["不可设置小于等于0的数字"]'),theme:"warning"}))},notifyTypeChange:function(t,e){1===t.length&&(this.oldNotifyTypeList[e]=t),0===t.length&&(this.priorityList[e].notify_type_list=[].concat((0,r.default)(this.oldNotifyTypeList[e])),this.$bkMessage({message:this.$t('m.slaContent["至少选择一项提醒方式"]'),theme:"warning"}))},checkData:function(){var t=this;return(0,a.default)(n.default.mark((function e(){var i,a,r;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=[],a=!0,r=[],t.priorityList.forEach((function(t){t.hasCheckBox&&!t.isCheck||r.push(t.type)})),t.$refs.receivers.forEach((function(t){-1!==r.indexOf(t.model.type)&&i.push(t.validate())})),t.$refs.notifyType.forEach((function(t){t.model.hasCheckBox&&!t.model.isCheck||i.push(t.validate())})),e.next=8,s.default.all(i).then((function(){a=!1})).catch((function(){a=!0}));case 8:return e.abrupt("return",a);case 9:case"end":return e.stop()}}),e,t)})))()}}}},lUma:function(t,e,i){"use strict";i.d(e,"a",(function(){return n})),i.d(e,"b",(function(){return s}));var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"bk-priority-configur"},[i("ul",{staticClass:"bk-priority-head"},[i("li",{staticStyle:{width:"25%"}},[i("span",[t._v(t._s(t.$t('m.slaContent["优先级"]')))])]),t._v(" "),i("li",{staticStyle:{width:"25%"}},[i("span",[t._v(t._s(t.$t('m.slaContent["服务模式"]')))])]),t._v(" "),i("li",{staticClass:"tooltipsChackbox",staticStyle:{width:"25%"}},[i("bk-checkbox",{attrs:{"data-test-id":"slaManager-checkbox-appointedTime"},model:{value:t.changeInfo.is_reply_need,callback:function(e){t.$set(t.changeInfo,"is_reply_need",e)},expression:"changeInfo.is_reply_need"}},[i("span",{directives:[{name:"bk-tooltips",rawName:"v-bk-tooltips.top",value:t.$t("m.slaContent['从进入开始节点，到完成响应操作的时间。']"),expression:"$t(`m.slaContent['从进入开始节点，到完成响应操作的时间。']`)",modifiers:{top:!0}}],staticClass:"textDashed"},[t._v("\n                    "+t._s(t.$t('m.slaContent["约定响应时长"]'))+"\n                ")])])],1),t._v(" "),i("li",{staticStyle:{width:"25%"}},[i("span",{directives:[{name:"bk-tooltips",rawName:"v-bk-tooltips.top",value:t.$t("m.slaContent['从进入开始节点，到离开结束节点的时间。']"),expression:"$t(`m.slaContent['从进入开始节点，到离开结束节点的时间。']`)",modifiers:{top:!0}}],staticClass:"textDashed"},[t._v(t._s(t.$t('m.slaContent["约定处理时长"]')))])])]),t._v(" "),t._l(t.priorityList,(function(e,n){return i("ul",{key:n,staticClass:"bk-priority-head bk-priority-body"},[i("li",{staticStyle:{width:"25%"}},t._l(t.modelPriority,(function(n,s){return i("span",{key:s,staticStyle:{position:"relative"},attrs:{"data-test-id":"slaAgreement-span-modelPriority-"+s}},[n.key===e.priority?[i("span",{staticClass:"in-select-icon",style:"background-color: "+t.typeColorList[e.priority]}),t._v(t._s(n.name)+"\n                ")]:t._e()],2)})),0),t._v(" "),i("li",{staticClass:"bk-priority-normal bk-editor-style",staticStyle:{width:"25%"}},[i("bk-form",{ref:"schedule",refInFor:!0,attrs:{"label-width":200,"form-type":"vertical",model:e,rules:t.scheduleRules}},[i("bk-form-item",{attrs:{"data-test-id":"slaAgreement-select-modelList",property:"schedule"}},[i("bk-select",{attrs:{"ext-cls":"cus-align-left",searchable:""},model:{value:e.schedule,callback:function(i){t.$set(e,"schedule",i)},expression:"item.schedule"}},[t._l(t.modelList,(function(t){return i("bk-option",{key:t.id,attrs:{id:t.id,name:t.name}})})),t._v(" "),i("div",{staticStyle:{cursor:"pointer"},attrs:{slot:"extension"},on:{click:t.handleCreate},slot:"extension"},[i("i",{staticClass:"bk-icon icon-plus-circle"}),t._v(t._s(t.$t("m.slaContent['跳转新建']"))+"\n                        ")])],2)],1)],1)],1),t._v(" "),i("li",{staticClass:"bk-priority-normal bk-editor-style bk-none-radius",staticStyle:{width:"25%"}},[i("bk-form",{ref:"replyTime",refInFor:!0,attrs:{"label-width":200,"form-type":"vertical",model:e,rules:t.replyTimeRules}},[i("bk-form-item",{attrs:{"data-test-id":"slaAgreement-input-replyTime",property:"reply_time","icon-offset":t.iconOffset}},[i("bk-input",{attrs:{"font-size":"normal",type:"number",min:0},model:{value:e.reply_time,callback:function(i){t.$set(e,"reply_time",t._n(i))},expression:"item.reply_time"}},[i("bk-dropdown-menu",{key:"dropdown"+n,ref:"dropdown"+n,refInFor:!0,staticClass:"group-text",attrs:{slot:"append","font-size":"normal"},on:{show:function(i){return t.dropdownShow(e,"resp")},hide:function(i){return t.dropdownHide(e,"resp")}},slot:"append"},[i("bk-button",{attrs:{slot:"dropdown-trigger",type:"primary","ext-cls":"cus-width"},slot:"dropdown-trigger"},[t._l(t.timeList,(function(n,s){return i("span",{key:s},[e.reply_unit===n.id?[t._v(t._s(n.name))]:t._e()],2)})),t._v(" "),i("i",{class:["bk-icon icon-angle-down",{"icon-flip":e.isRespDropdownShow}]})],2),t._v(" "),i("ul",{staticClass:"bk-dropdown-list",attrs:{slot:"dropdown-content"},slot:"dropdown-content"},t._l(t.timeList,(function(s,a){return i("li",{key:a},[i("a",{attrs:{href:"javascript:;","data-test-id":"slaAgreement-a-timeHandler"},on:{click:function(i){return t.timeHandler("reply_unit",s,e,n,0)}}},[t._v(t._s(s.name))])])})),0)],1)],1),t._v(" "),t.changeInfo.is_reply_need?t._e():i("div",{staticClass:"bk-disabled-li"})],1)],1)],1),t._v(" "),i("li",{staticClass:"bk-priority-normal bk-editor-style bk-none-radius",staticStyle:{width:"25%"}},[i("bk-form",{ref:"handleTime",refInFor:!0,attrs:{"label-width":200,"form-type":"vertical",model:e,rules:t.handleTimeRules}},[i("bk-form-item",{attrs:{property:"handle_time","data-test-id":"slaAgreement-input-handleTime","icon-offset":t.iconOffset}},[i("bk-input",{attrs:{"font-size":"normal",type:"number",min:0},model:{value:e.handle_time,callback:function(i){t.$set(e,"handle_time",t._n(i))},expression:"item.handle_time"}},[i("bk-dropdown-menu",{ref:"dropdown"+n,refInFor:!0,staticClass:"group-text",attrs:{slot:"append","font-size":"normal"},on:{show:function(i){return t.dropdownShow(e,"deal")},hide:function(i){return t.dropdownHide(e,"deal")}},slot:"append"},[i("bk-button",{attrs:{slot:"dropdown-trigger",type:"primary","ext-cls":"cus-width"},slot:"dropdown-trigger"},[t._l(t.timeList,(function(n,s){return i("span",{key:s},[e.handle_unit===n.id?[t._v(t._s(n.name))]:t._e()],2)})),t._v(" "),i("i",{class:["bk-icon icon-angle-down",{"icon-flip":e.isDealDropdownShow}]})],2),t._v(" "),i("ul",{staticClass:"bk-dropdown-list",attrs:{slot:"dropdown-content"},slot:"dropdown-content"},t._l(t.timeList,(function(s,a){return i("li",{key:a},[i("a",{attrs:{href:"javascript:;"},on:{click:function(i){return t.timeHandler("handle_unit",s,e,n,1)}}},[t._v(t._s(s.name))])])})),0)],1)],1)],1)],1)],1)])}))],2)},s=[];n._withStripped=!0},mo0B:function(t,e,i){"use strict";i.r(e);var n=i("HnXz"),s=i.n(n);for(var a in n)["default"].indexOf(a)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(a);e.default=s.a},nJLV:function(t,e,i){"use strict";i.d(e,"a",(function(){return n})),i.d(e,"b",(function(){return s}));var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"bk-priority-configur"},[i("ul",{staticClass:"bk-priority-head"},[i("li",{staticStyle:{width:"140px","padding-left":"50px"}},[i("span",[t._v(t._s(t.$t('m.slaContent["提醒事件"]')))])]),t._v(" "),i("li",{staticStyle:{width:"calc(19% - 35px)"}},[i("span",[t._v(t._s(t.$t('m.slaContent["提醒规则"]')))])]),t._v(" "),i("li",{staticStyle:{width:"calc(21% - 35px)"}},[i("span",[t._v(t._s(t.$t('m.slaContent["提醒对象"]')))])]),t._v(" "),i("li",{staticStyle:{width:"calc(24% - 35px)"}},[i("span",[t._v(t._s(t.$t('m.slaContent["提醒方式"]')))])]),t._v(" "),i("li",{staticStyle:{width:"calc(36% - 35px)"}},[i("span",[t._v(t._s(t.$t('m.slaContent["提醒频率"]')))])])]),t._v(" "),t._l(t.priorityList,(function(e,n){return i("ul",{key:n,staticClass:"bk-priority-head bk-priority-body"},[!e.hasCheckBox||t.hasCheckBox?i("li",{staticClass:"bk-transform-10",staticStyle:{width:"140px","padding-right":"10px"}},[i("span",[e.hasCheckBox?i("bk-checkbox",{staticStyle:{"padding-right":"10px"},attrs:{"data-test-id":"slaAgreement-checkbox-eventName"},model:{value:e.isCheck,callback:function(i){t.$set(e,"isCheck",i)},expression:"item.isCheck"}}):i("span",{staticStyle:{"padding-right":"30px"}}),t._v("\n                "+t._s(e.eventName)+"\n            ")],1)]):t._e(),t._v(" "),!e.hasCheckBox||t.hasCheckBox?i("li",{staticClass:"bk-priority-normal bk-editor-style bk-transform-10",staticStyle:{width:"calc(19% - 35px)"}},[i("bk-form",{attrs:{"label-width":200,"form-type":"vertical",model:e}},[i("bk-form-item",[t._v("\n                    "+t._s(e.remindRuleText)+"\n                    "),"remindRuleValue"in e?i("span",{staticClass:"bk-border-bottom"},[i("bk-popconfirm",{attrs:{"data-test-id":"slaAgreement-popconfirm-remindRuleValue",placement:"bottom","confirm-text":"","cancel-text":"",trigger:"click"}},[i("div",{staticStyle:{width:"188px","padding-top":"6px"},attrs:{slot:"content"},slot:"content"},[i("bk-slider",{model:{value:e.remindRuleValue,callback:function(i){t.$set(e,"remindRuleValue",i)},expression:"item.remindRuleValue"}})],1),t._v("\n                            "+t._s(e.remindRuleValue)+"\n                            "+t._s(e.remindRuleUnit)+"\n                        ")])],1):t._e(),t._v(" "),e.hasCheckBox&&!e.isCheck?i("div",{staticClass:"bk-disabled-li"}):t._e()])],1)],1):t._e(),t._v(" "),!e.hasCheckBox||t.hasCheckBox?i("li",{staticClass:"bk-priority-normal bk-editor-style bk-none-radius bk-transform-10",staticStyle:{width:"calc(21% - 35px)"}},[i("bk-form",{ref:"receivers",refInFor:!0,attrs:{"label-width":200,"form-type":"vertical",model:e,rules:t.receiversRules}},[i("bk-form-item",{attrs:{"data-test-id":"slaAgreement-select-receivers",property:"receivers"}},[i("bk-select",{attrs:{"ext-cls":"cus-align-left",clearable:!1},model:{value:e.receivers,callback:function(i){t.$set(e,"receivers",i)},expression:"item.receivers"}},t._l(t.receiversOptionList,(function(t){return i("bk-option",{key:t.id,attrs:{id:t.id,name:t.name}})})),1),t._v(" "),e.hasCheckBox&&!e.isCheck?i("div",{staticClass:"bk-disabled-li"}):t._e()],1)],1)],1):t._e(),t._v(" "),!e.hasCheckBox||t.hasCheckBox?i("li",{staticClass:"bk-priority-normal bk-editor-style bk-none-radius bk-remind-type",staticStyle:{width:"calc(24% - 35px)"}},[i("bk-form",{ref:"notifyType",refInFor:!0,attrs:{"label-width":200,"form-type":"vertical",model:e,rules:t.notifyTypeRules}},[i("bk-checkbox-group",{attrs:{"data-test-id":"slaAgreement-checkboxGroup-RemindType"},on:{change:function(i){return t.notifyTypeChange(e.notify_type_list,n)}},model:{value:e.notify_type_list,callback:function(i){t.$set(e,"notify_type_list",i)},expression:"item.notify_type_list"}},[i("bk-checkbox",{staticStyle:{"margin-bottom":"12px"},attrs:{value:"email"}},[t._v("\n                        "+t._s(t.$t('m.treeinfo["邮件"]'))+"\n                    ")]),t._v(" "),i("bk-checkbox",{attrs:{value:"weixin"}},[t._v(t._s(t.$t('m.treeinfo["企业微信"]')))]),t._v(" "),-1!==e.notify_type_list.indexOf("email")?i("bk-form-item",{staticClass:"cus-email",attrs:{"data-test-id":"slaAgreement-select-emailNotifyEventList",property:"email_notify"}},[i("bk-select",{attrs:{clearable:!1,placeholder:t.$t("m.slaContent['请选择通知事件']"),size:"small","popover-width":150,searchable:""},model:{value:e.email_notify,callback:function(i){t.$set(e,"email_notify",i)},expression:"item.email_notify"}},t._l(t.emailNotifyEventList,(function(t){return i("bk-option",{key:t.id,attrs:{id:t.id,name:t.name}})})),1)],1):t._e(),t._v(" "),-1!==e.notify_type_list.indexOf("weixin")?i("bk-form-item",{staticClass:"cus-weixin",attrs:{"data-test-id":"slaAgreement-select-weixinNotifyEventList",property:"weixin_notify"}},[i("bk-select",{attrs:{clearable:!1,placeholder:t.$t("m.slaContent['请选择通知事件']"),size:"small",searchable:""},model:{value:e.weixin_notify,callback:function(i){t.$set(e,"weixin_notify",i)},expression:"item.weixin_notify"}},t._l(t.weixinNotifyEventList,(function(t){return i("bk-option",{key:t.id,attrs:{id:t.id,name:t.name}})})),1)],1):t._e()],1),t._v(" "),e.hasCheckBox&&!e.isCheck?i("div",{staticClass:"bk-disabled-li"}):t._e()],1)],1):t._e(),t._v(" "),!e.hasCheckBox||t.hasCheckBox?i("li",{staticClass:"bk-priority-normal bk-editor-style bk-none-radius bk-remind-radio",staticStyle:{width:"calc(36% - 35px)"}},[i("bk-radio-group",{attrs:{"data-test-id":"slaAgreement-radio-notifyRule"},model:{value:e.notify_rule,callback:function(i){t.$set(e,"notify_rule",i)},expression:"item.notify_rule"}},[i("bk-radio",{staticStyle:{"margin-bottom":"6px"},attrs:{value:"once"}},[t._v(t._s(t.$t('m.slaContent["单次提醒"]')))]),t._v(" "),i("bk-radio",{attrs:{value:"retry"}},[t._v("\n                    "+t._s(t.$t('m.slaContent["递增首次提醒后，耗时每增加"]'))+"\n                    "),i("span",{staticClass:"bk-border-bottom"},[i("input",{directives:[{name:"model",rawName:"v-model.number",value:e.notify_freq,expression:"item.notify_freq",modifiers:{number:!0}}],attrs:{"data-test-id":"slaAgreement-radio-notifyFreq",type:"number"},domProps:{value:e.notify_freq},on:{change:function(i){return t.notifyFreqChange(e.notify_freq,n)},input:function(i){i.target.composing||t.$set(e,"notify_freq",t._n(i.target.value))},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),i("span",{staticClass:"freq-unit"},[i("bk-dropdown-menu",{ref:"dropdown"+n,refInFor:!0,staticClass:"group-text",attrs:{slot:"append","font-size":"normal"},on:{show:function(e){return t.dropdownShow()},hide:function(e){return t.dropdownHide()}},slot:"append"},[i("bk-button",{attrs:{slot:"dropdown-trigger",type:"primary","ext-cls":"cus-width"},slot:"dropdown-trigger"},[t._l(t.timeList,(function(n,s){return i("span",{key:s},[e.freq_unit===n.id?[t._v(t._s(n.name))]:t._e()],2)})),t._v(" "),i("i",{class:["bk-icon icon-angle-down",{"icon-flip":e.isDropdownShow}]})],2),t._v(" "),i("ul",{staticClass:"bk-dropdown-list",attrs:{slot:"dropdown-content"},slot:"dropdown-content"},t._l(t.timeList,(function(s,a){return i("li",{key:a},[i("a",{attrs:{href:"javascript:;","data-test-id":"slaAgreement-a-timeHandler-"+a},on:{click:function(i){return t.timeHandler(s,e,n)}}},[t._v(t._s(s.name))])])})),0)],1)],1),t._v("\n                    "+t._s(t.$t('m.slaContent["再次提醒"]')))])],1),t._v(" "),e.hasCheckBox&&!e.isCheck?i("div",{staticClass:"bk-disabled-li"}):t._e()],1):t._e()])}))],2)},s=[];n._withStripped=!0},qGMc:function(t,e,i){"use strict";i.r(e);var n=i("lUma"),s=i("ww8n");for(var a in s)["default"].indexOf(a)<0&&function(t){i.d(e,t,(function(){return s[t]}))}(a);i("IwqA"),i("y8+Z");var r=i("KHd+"),o=Object(r.a)(s.default,n.a,n.b,!1,null,"4e60c3ee",null);o.options.__file="src/views/slaManager/newAddAgreement/priorityConfigur.vue",e.default=o.exports},sXI1:function(t,e,i){"use strict";i.r(e);var n=i("FmHc"),s=i.n(n);for(var a in n)["default"].indexOf(a)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(a);e.default=s.a},tnY7:function(t,e,i){"use strict";i("gHgP")},ww8n:function(t,e,i){"use strict";i.r(e);var n=i("GwKx"),s=i.n(n);for(var a in n)["default"].indexOf(a)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(a);e.default=s.a},xaSK:function(t,e,i){"use strict";i.r(e);var n=i("jK6i"),s=i.n(n);for(var a in n)["default"].indexOf(a)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(a);e.default=s.a},"y8+Z":function(t,e,i){"use strict";i("BkRN")},yJMH:function(t,e,i){"use strict";i.r(e);var n=i("ZdQW"),s=i("mo0B");for(var a in s)["default"].indexOf(a)<0&&function(t){i.d(e,t,(function(){return s[t]}))}(a);i("ZzVk");var r=i("KHd+"),o=Object(r.a)(s.default,n.a,n.b,!1,null,"0fcc7548",null);o.options.__file="src/views/slaManager/newAddAgreement/index.vue",e.default=o.exports}}]);